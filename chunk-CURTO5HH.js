import{a as We,b as Le,c as He}from"./chunk-BZPR73YG.js";import{a as Ue}from"./chunk-6FCX7RNP.js";import{a as Ge}from"./chunk-ABGH7SJD.js";import{a as Oe}from"./chunk-AFVHDR2Z.js";import{a as Ve,b as Pe,c as Be,d as Re,h as ke}from"./chunk-RMPXGUPG.js";import{a as Me}from"./chunk-NNHHLG53.js";import{o as we,x as Ae}from"./chunk-RAAURFHQ.js";import{a as be,b as Ne}from"./chunk-UVSBIWKY.js";import{a as Ee}from"./chunk-OZ63RRZR.js";import{a as ye,b as xe,c as Te,d as Ce}from"./chunk-SU7IEUNK.js";import{k as De}from"./chunk-CETGYK4I.js";import{c as $}from"./chunk-F7IHWOEY.js";import{c as se,d as _e}from"./chunk-GJAIQ3XH.js";import{b as le,c as F,d as Q,g as pe,i as de,l as ue,n as me,o as Ie,p as ve,q as he,r as ge,t as Se,v as fe}from"./chunk-UA6GT64L.js";import{A as ae,d as oe,e as re,j as ce}from"./chunk-GOUT62LL.js";import{$b as D,Cb as _,Db as p,Eb as P,Fb as X,Gb as ee,Ib as C,Mb as f,Nb as r,Qb as V,Rb as B,Tb as O,Ub as W,Vb as L,Wb as y,X as M,Xb as I,Yb as x,Zb as w,_b as E,ab as Y,ac as b,bc as N,ca as K,cc as te,db as s,dc as ie,eb as k,ha as Z,ia as j,na as q,nc as v,oc as g,pc as ne,qc as H,vb as T,wa as z,xa as a,xb as u,ya as l}from"./chunk-RH76WUG2.js";import{a as U,b as G}from"./chunk-3EYC4JTX.js";var Fe=(()=>{let d=class d{constructor(t,e){this._Apiservice=t,this._AppModeService=e,this._ServiceLifeTime=j(F),this.ScaleSettingsArr=[],this.GetScaleSettings()}GetScaleSettings(){let t={TableName:"ScaleSettings",Columns:["Id","Name","ZaraNumber","BarCodeLength","ProductCodeLength","WeightCodeLength"],Conditions:"",NoPaging:!0};this._Apiservice.post("Global/GetAll",t,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:e=>{this.ScaleSettingsArr=e.Obj.DataReturn}})}};d.\u0275fac=function(e){return new(e||d)(Z(Q),Z($))},d.\u0275prov=K({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var qe=["GLComponent"],ze=["dynamiccomponent"],Ye=["content"],Xe=["OherModal"],et=["AllHold"],tt=["ProductTable"];function it(o,d){o&1&&(_(0,"th",54),I(1),v(2,"translate"),p()),o&2&&(s(),w(" ",g(2,1,"SaleInvoice.DiscountRate")," % "))}function nt(o,d){o&1&&(_(0,"th",57),I(1),v(2,"translate"),p()),o&2&&(s(),w(" ",g(2,1,"SaleInvoice.Discount"),""))}function ot(o,d){if(o&1&&(_(0,"tr")(1,"th",51)(2,"span",52),I(3,"#"),p()(),_(4,"th",53),I(5),v(6,"translate"),p(),_(7,"th",54),I(8),v(9,"translate"),p(),_(10,"th",54),I(11),v(12,"translate"),p(),_(13,"th",54),I(14),v(15,"translate"),p(),T(16,it,3,3,"th",55)(17,nt,3,3,"th",56),_(18,"th",57),I(19),v(20,"translate"),p()()),o&2){let i=r(2);s(5),x(g(6,7,"SaleInvoice.Name")),s(3),x(g(9,9,"SaleInvoice.Unit")),s(3),x(g(12,11,"SaleInvoice.Quantity")),s(3),x(g(15,13,"SaleInvoice.Price")),s(2),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),s(),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),s(2),x(g(20,15,"SaleInvoice.TotalPriceAfterDiscount"))}}function rt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r().$implicit,t=r(2);s(),E("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ct(o,d){if(o&1&&I(0),o&2){let i=d.item;E(" ",i.Name," - ",i.Code," ")}}function at(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r().$implicit,t=r(2);s(),E("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function lt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.NameAndUnitFactor," ")}}function st(o,d){if(o&1&&(_(0,"span",85),I(1),p()),o&2){let i=r().$implicit;s(),x(i.Price)}}function _t(o,d){if(o&1){let i=C();_(0,"input",87),v(1,"translate"),f("change",function(){a(i);let e=r(3);return l(e.CalcInvoice())})("keyup",function(){a(i);let e=r(3);return l(e.CalcInvoice())}),N("ngModelChange",function(e){a(i);let n=r().$implicit;return b(n.Price,e)||(n.Price=e),l(e)}),p()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;V("placeholder",g(1,7,"SaleInvoice.Price")),B("id","Price",e,""),B("name","Price",e,""),u("disabled",t.ProductId==null||t.ProductUnitId==null),D("ngModel",t.Price)}}function pt(o,d){if(o&1){let i=C();_(0,"td",72)(1,"div",73)(2,"button",74),f("click",function(){a(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","+",e),l(n.Discount("DiscountRate",e))}),P(3,"i",62),p(),_(4,"div",75)(5,"input",87),v(6,"translate"),f("change",function(){a(i);let e=r().rowIndex,n=r(2);return l(n.Discount("DiscountRate",e))})("keyup",function(){a(i);let e=r().rowIndex,n=r(2);return l(n.Discount("DiscountRate",e))}),N("ngModelChange",function(e){a(i);let n=r().$implicit;return b(n.DiscountRate,e)||(n.DiscountRate=e),l(e)}),p()(),_(7,"button",77),f("click",function(){a(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","-",e),l(n.Discount("DiscountRate",e))}),_(8,"i",78),I(9," - "),p()()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;s(2),u("disabled",t.ProductId==null||t.ProductUnitId==null),s(3),B("placeholder","",g(6,10,"SaleInvoice.DiscountRate")," %"),B("id","DiscountRate",e,""),B("name","DiscountRate",e,""),u("disabled",t.ProductId==null||t.ProductUnitId==null),D("ngModel",t.DiscountRate),s(2),u("disabled",t.ProductId==null||t.ProductUnitId==null)}}function dt(o,d){if(o&1){let i=C();_(0,"td",72)(1,"div",83)(2,"input",87),v(3,"translate"),f("change",function(){a(i);let e=r().rowIndex,n=r(2);return l(n.Discount("Discount",e))})("keyup",function(){a(i);let e=r().rowIndex,n=r(2);return l(n.Discount("Discount",e))}),N("ngModelChange",function(e){a(i);let n=r().$implicit;return b(n.Discount,e)||(n.Discount=e),l(e)}),p()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;s(2),V("placeholder",g(3,7,"SaleInvoice.Discount")),B("id","Discount",e,""),B("name","Discount",e,""),u("disabled",t.ProductId==null||t.ProductUnitId==null),D("ngModel",t.Discount)}}function ut(o,d){if(o&1){let i=C();_(0,"tr")(1,"td",58)(2,"div",59)(3,"span",60),I(4),p(),_(5,"button",61),f("click",function(){a(i);let e=r(2);return l(e.AppendRow())}),P(6,"i",62),p(),_(7,"button",63),f("click",function(){let e=a(i).rowIndex,n=r(2);return l(n.RemoveRow(e))}),P(8,"i",64),p()()(),_(9,"td",65),v(10,"translate"),_(11,"div",66)(12,"ng-select",67,7),v(14,"translate"),f("clear",function(){let e=a(i).$implicit;return l(e.Items=[])})("focus",function(){let e=a(i).rowIndex,n=y(13),c=r(2);return c.ChangeSearchApiDetails("Items",n,e),l(c._AppModeService.ResetCurrentPage())})("keyup",function(){let e=a(i).rowIndex,n=y(13),c=r(2);return c.ChangeSearchApiDetails("Items",n,e),l(c._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=a(i).rowIndex,n=y(13),c=r(2);return l(c.ChangeSearchApiDetails("Items",n,e))})("close",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("change",function(){let e=a(i),n=e.$implicit,c=e.rowIndex,m=y(13);return r(2).SelectItem(n.ProductId,c),l(m.blur())}),N("ngModelChange",function(e){let n=a(i).$implicit;return b(n.ProductId,e)||(n.ProductId=e),l(e)}),T(15,rt,2,2,"ng-template",28)(16,ct,1,2,"ng-template",29),p(),_(17,"button",68),f("click",function(){let e=a(i).rowIndex,n=r(2),c=y(7);return l(n.ProductBalance(e,c))}),P(18,"i",69),p()()(),_(19,"td",70),v(20,"translate"),_(21,"ng-select",71,8),v(23,"translate"),f("clear",function(){let e=a(i).$implicit;return l(e.ProductUnits=[])})("focus",function(){let e=a(i).rowIndex,n=y(22),c=r(2);return c.ChangeSearchApiDetails("ItemUnits",n,e),l(c._AppModeService.ResetCurrentPage())})("keyup",function(){let e=a(i).rowIndex,n=y(22),c=r(2);return c.ChangeSearchApiDetails("ItemUnits",n,e),l(c._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=a(i).rowIndex,n=y(22),c=r(2);return l(c.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("change",function(){let e=a(i),n=e.$implicit,c=e.rowIndex,m=y(22);return r(2).SelectUnit(n.ProductUnitId,c),l(m.blur())}),N("ngModelChange",function(e){let n=a(i).$implicit;return b(n.ProductUnitId,e)||(n.ProductUnitId=e),l(e)}),T(24,at,2,2,"ng-template",28)(25,lt,1,1,"ng-template",29),p()(),_(26,"td",72)(27,"div",73)(28,"button",74),f("click",function(){let e=a(i).rowIndex,n=r(2);return l(n.Button("Quantity","+",e))}),P(29,"i",62),p(),_(30,"div",75)(31,"input",76),v(32,"translate"),f("change",function(){a(i);let e=r(2);return l(e.CalcInvoice())})("keyup",function(){a(i);let e=r(2);return l(e.CalcInvoice())}),N("ngModelChange",function(e){let n=a(i).$implicit;return b(n.Quantity,e)||(n.Quantity=e),l(e)}),p()(),_(33,"button",77),f("click",function(){let e=a(i).rowIndex,n=r(2);return l(n.Button("Quantity","-",e))}),_(34,"i",78),I(35," - "),p()()()(),_(36,"td",72)(37,"div",79),T(38,st,2,1,"span",80)(39,_t,2,9,"input",81),p()(),T(40,pt,10,12,"td",82)(41,dt,4,9,"td",82),_(42,"td",72)(43,"div",83)(44,"span",84),I(45),v(46,"translate"),p(),_(47,"span",85),I(48),p()()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);s(),V("title",t+1),s(3),x(t+1),s(3),u("disabled",e.Invoice.InvoiceDetails.length==1),s(2),V("title",g(10,36,"TransferStorage.Name")),s(3),B("placeholder","  ",g(14,38,"SaleInvoice.ChooseProduct"),""),u("dropdownPosition","bottom")("items",i.Items)("virtualScroll",!0)("searchable",!0),D("ngModel",i.ProductId),s(5),u("disabled",e._Apiservice.DisabledButton||i.ProductId==null),s(2),V("title",g(20,40,"Item.ItemUnit")),s(2),B("placeholder","  ",g(23,42,"Item.ItemUnit"),""),u("dropdownPosition","bottom")("items",i.ProductUnits)("disabled",i.ProductId==0||i.ProductId==null)("virtualScroll",!0)("searchable",!0),D("ngModel",i.ProductUnitId),s(7),u("disabled",i.ProductId==null||i.ProductUnitId==null),s(3),B("id","Quantity",t,""),B("name","Quantity",t,""),V("placeholder",g(32,44,"SaleInvoice.Quantity")),u("disabled",i.ProductId==null||i.ProductUnitId==null),D("ngModel",i.Quantity),s(2),u("disabled",i.ProductId==null||i.ProductUnitId==null),s(5),u("ngIf",e.ScreenName=="SaleInvoice"||e.ScreenName=="ManufactureInvoice"),s(),u("ngIf",e.ScreenName!="SaleInvoice"&&e.ScreenName!="ManufactureInvoice"),s(),u("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate==!1),s(),u("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscount==!1),s(4),x(g(46,46,"SaleInvoice.TotalPriceAfterDiscount")),s(3),x(e._AppModeService.GetTwoNumberAfterZero(i.TotalPriceAfterDiscount))}}function mt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(2);s(),E("Loaded ",i.ItemsBarCode.length," of ",i._SharedObjectModelService.TotalItems,"")}}function It(o,d){if(o&1&&I(0),o&2){let i=d.item;E(" ",i.Name," - ",i.Code," ")}}function vt(o,d){if(o&1){let i=C();_(0,"div",88)(1,"input",89),v(2,"translate"),f("change",function(){a(i);let e=r(2);return l(e.ChangeGlobalDis("GlobalDiscountRate"))})("keyup",function(){a(i);let e=r(2);return l(e.ChangeGlobalDis("GlobalDiscountRate"))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.GlobalDiscountRate,e)||(n.GlobalDiscountRate=e),l(e)}),p()()}if(o&2){let i=r(2);s(),B("placeholder","",g(2,3,"SaleInvoice.DiscountRate")," %"),D("ngModel",i.GlobalDiscountRate)}}function ht(o,d){if(o&1){let i=C();_(0,"div",88)(1,"input",90),v(2,"translate"),f("change",function(){a(i);let e=r(2);return l(e.ChangeGlobalDis("GlobalDiscount"))})("keyup",function(){a(i);let e=r(2);return l(e.ChangeGlobalDis("GlobalDiscount"))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.GlobalDiscount,e)||(n.GlobalDiscount=e),l(e)}),p()()}if(o&2){let i=r(2);s(),V("placeholder",g(2,2,"SaleInvoice.Discount")),D("ngModel",i.GlobalDiscount)}}function gt(o,d){if(o&1){let i=C();_(0,"div",91)(1,"div",92)(2,"div",93)(3,"label",94),I(4),v(5,"translate"),p(),_(6,"div",95)(7,"input",96),f("change",function(){a(i);let e=r(2);return l(e.ChangeClientType(1))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),l(e)}),p()()()(),_(8,"div",92)(9,"div",93)(10,"label",97),I(11),v(12,"translate"),p(),_(13,"div",95)(14,"input",98),f("change",function(){a(i);let e=r(2);return l(e.ChangeClientType(2))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),l(e)}),p()()()()()}if(o&2){let i=r(2);s(4),w(" ",g(5,8,"SaleInvoice.Window")," "),s(3),D("ngModel",i.Invoice.ClientType),u("checked",i.Invoice.ClientType==1)("value",1),s(4),w(" ",g(12,10,"SaleInvoice.Always")," "),s(3),u("value",2)("checked",i.Invoice.ClientType==2),D("ngModel",i.Invoice.ClientType)}}function St(o,d){if(o&1&&(_(0,"span",52),I(1),v(2,"date"),p()),o&2){let i=r(2);s(),w(" ",ne(2,1,i.Invoice.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function ft(o,d){if(o&1){let i=C();_(0,"p-calendar",99),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.DocDate,e)||(n.Invoice.DocDate=e),l(e)}),p()}if(o&2){let i=r(2);D("ngModel",i.Invoice.DocDate),u("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function yt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(3);s(),E("Loaded ",i.StoreArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function xt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Tt(o,d){if(o&1){let i=C();_(0,"button",105),f("click",function(){a(i);let e=r(3);return l(e.SecoundScreen(e.EnumScreen.Storage))}),P(1,"i",106),p()}}function Ct(o,d){if(o&1){let i=C();_(0,"div",100)(1,"div",101)(2,"ng-select",102,9),v(4,"translate"),f("clear",function(){a(i);let e=r(2);return l(e.StoreArr=[])})("focus",function(){a(i);let e=y(3),n=r(2);return n.ChangeSearchApi("Storages",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(3),n=r(2);return n.ChangeSearchApi("Storages",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(3),n=r(2);return l(n.ChangeSearchApi("Storages",e))})("close",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(2);return l(e.SelectValue(e.Invoice.StoreId,"Store"))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.StoreId,e)||(n.Invoice.StoreId=e),l(e)}),T(5,yt,2,2,"ng-template",28)(6,xt,1,1,"ng-template",29),p()(),_(7,"div",103),T(8,Tt,2,0,"button",104),p()()}if(o&2){let i=r(2);s(2),V("placeholder",g(4,8,"Place")),u("items",i.StoreArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),D("ngModel",i.Invoice.StoreId),s(6),u("ngIf",i.ScreenName=="BuyInvoice")}}function Dt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(3);s(),E("Loaded ",i.SupplierArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function bt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Nt(o,d){if(o&1){let i=C();_(0,"div",100)(1,"div",101)(2,"ng-select",107,10),v(4,"translate"),f("clear",function(){a(i);let e=r(2);return l(e.SupplierArr=[])})("focus",function(){a(i);let e=y(3),n=r(2);return n.ChangeSearchApi("Suppliers",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(3),n=r(2);return n.ChangeSearchApi("Suppliers",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(3),n=r(2);return l(n.ChangeSearchApi("Suppliers",e))})("change",function(){a(i);let e=r(2);return l(e.SelectValue(e.Invoice.SupplierId,"Supplier"))})("close",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.SupplierId,e)||(n.Invoice.SupplierId=e),l(e)}),T(5,Dt,2,2,"ng-template",28)(6,bt,1,1,"ng-template",29),p()(),_(7,"div",108)(8,"button",109),f("click",function(){a(i);let e=r(2);return l(e.SecoundScreen(e.EnumScreen.Supplier))}),P(9,"i",110),p()()()}if(o&2){let i=r(2);s(2),V("placeholder",g(4,7,"BuyOffer.Supplier")),u("items",i.SupplierArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),D("ngModel",i.Invoice.SupplierId)}}function wt(o,d){if(o&1){let i=C();_(0,"input",113),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.ClientName,e)||(n.Invoice.ClientName=e),l(e)}),p()}if(o&2){let i=r(3);u("disabled",!0),D("ngModel",i.Invoice.ClientName)}}function At(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(4);s(),E("Loaded ",i.ClientArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Vt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Pt(o,d){if(o&1){let i=C();_(0,"ng-select",114,11),v(2,"translate"),f("clear",function(){a(i);let e=r(3);return l(e.ClientArr=[])})("focus",function(){a(i);let e=y(1),n=r(3);return n.ChangeSearchApi("Clients",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(1),n=r(3);return n.ChangeSearchApi("Clients",e),l(n._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=y(1),n=r(3);return l(n.ChangeSearchApi("Clients",e))})("scrollToEnd",function(){a(i);let e=y(1),n=r(3);return l(n.ChangeSearchApi("Clients",e))})("change",function(){a(i);let e=r(3);return l(e.SelectValue(e.Invoice.ClientId,"Client"))})("close",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.ClientId,e)||(n.Invoice.ClientId=e),l(e)}),T(3,At,2,2,"ng-template",28)(4,Vt,1,1,"ng-template",29),p()}if(o&2){let i=r(3);V("placeholder",g(2,7,"SaleOffer.Client")),u("items",i.ClientArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),D("ngModel",i.Invoice.ClientId)}}function Mt(o,d){if(o&1){let i=C();_(0,"div",100)(1,"div",101),T(2,wt,1,2,"input",111)(3,Pt,5,9,"ng-select",112),p(),_(4,"div",108)(5,"button",109),f("click",function(){a(i);let e=r(2);return l(e.SecoundScreen(e.EnumScreen.Client))}),P(6,"i",110),p()()()}if(o&2){let i=r(2);s(2),u("ngIf",i.Invoice.ClientType==1),s(),u("ngIf",i.Invoice.ClientType==2)}}function Bt(o,d){if(o&1&&(_(0,"div",115)(1,"div",116)(2,"span",117),I(3),v(4,"translate"),p(),_(5,"div",118),P(6,"input",119),p()(),_(7,"div",116)(8,"span",120),I(9),v(10,"translate"),p(),_(11,"div",118),P(12,"input",121),p()()()),o&2){let i=r(2);s(3),x(g(4,6,"NetThamBranch")),s(3),u("disabled",!0)("value",i._AppModeService.GetTwoNumberAfterZero(i.NetAccountPerson.NetThamBranch)),s(3),x(g(10,8,"NetOtherBranch")),s(3),u("disabled",!0)("value",i._AppModeService.GetTwoNumberAfterZero(i.NetAccountPerson.NetOtherBranch))}}function Et(o,d){o&1&&(_(0,"option",125),I(1),v(2,"translate"),p()),o&2&&(u("value",3),s(),x(g(2,2,"SaleInvoice.Delivery")))}function Rt(o,d){if(o&1){let i=C();_(0,"div",38)(1,"input",128),v(2,"translate"),f("keyup",function(){a(i);let e=r(3);return l(e.ChangeCash())})("change",function(){a(i);let e=r(3);return l(e.ChangeCash())}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.Cash,e)||(n.Invoice.Cash=e),l(e)}),p()()}if(o&2){let i=r(3);s(),V("placeholder",g(2,3,"SaleInvoice.Cash")),u("disabled",i.Invoice.PaymentType==3),D("ngModel",i.Invoice.Cash)}}function kt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(4);s(),E("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ut(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Gt(o,d){if(o&1){let i=C();_(0,"div",100)(1,"div",101)(2,"ng-select",129,12),v(4,"translate"),f("clear",function(){a(i);let e=r(3);return l(e.TreasuryArr=[])})("focus",function(){a(i);let e=y(3),n=r(3);return n.ChangeSearchApi("Treasury",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(3),n=r(3);return n.ChangeSearchApi("Treasury",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(3),n=r(3);return l(n.ChangeSearchApi("Treasury",e))})("close",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(3);return l(e.SelectValue(e.Invoice.TreasuryId,"Treasury"))}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.TreasuryId,e)||(n.Invoice.TreasuryId=e),l(e)}),T(5,kt,2,2,"ng-template",28)(6,Ut,1,1,"ng-template",29),p()(),_(7,"div",108)(8,"button",109),f("click",function(){a(i);let e=r(3);return l(e.SecoundScreen(e.EnumScreen.Treasury))}),P(9,"i",110),p()()()}if(o&2){let i=r(3);s(2),V("placeholder",g(4,8,"BuyInvoice.Treasury")),u("items",i.TreasuryArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Cash==""||i.Invoice.Cash==0),D("ngModel",i.Invoice.TreasuryId)}}function Ot(o,d){if(o&1){let i=C();_(0,"div",38)(1,"input",130),v(2,"translate"),f("keyup",function(){a(i);let e=r(3);return l(e.ChangeCash())})("change",function(){a(i);let e=r(3);return l(e.ChangeCash())}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.Visa,e)||(n.Invoice.Visa=e),l(e)}),p()()}if(o&2){let i=r(3);s(),V("placeholder",g(2,3,"SaleInvoice.Visa")),u("disabled",i.Invoice.PaymentType==3),D("ngModel",i.Invoice.Visa)}}function Wt(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(4);s(),E("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Lt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Ht(o,d){if(o&1){let i=C();_(0,"div",100)(1,"div",101)(2,"ng-select",131,13),v(4,"translate"),f("clear",function(){a(i);let e=r(3);return l(e.BankAccountArr=[])})("focus",function(){a(i);let e=y(3),n=r(3);return n.ChangeSearchApi("BankAccounts",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(3),n=r(3);return n.ChangeSearchApi("BankAccounts",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(3),n=r(3);return l(n.ChangeSearchApi("BankAccounts",e))})("close",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(3);return l(e.SelectValue(e.Invoice.BankAccountId,"BankAccount"))}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.BankAccountId,e)||(n.Invoice.BankAccountId=e),l(e)}),T(5,Wt,2,2,"ng-template",28)(6,Lt,1,1,"ng-template",29),p()(),_(7,"div",108)(8,"button",109),f("click",function(){a(i);let e=r(3);return l(e.SecoundScreen(e.EnumScreen.BankAccount))}),P(9,"i",110),p()()()}if(o&2){let i=r(3);s(2),V("placeholder",g(4,7,"BuyInvoice.Bank")),u("items",i.BankAccountArr)("dropdownPosition","top")("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Visa==""||i.Invoice.Visa==0),D("ngModel",i.Invoice.BankAccountId)}}function Ft(o,d){if(o&1&&(_(0,"small",86),I(1),p()),o&2){let i=r(4);s(),E("Loaded ",i.EmployeeArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function jt(o,d){if(o&1&&I(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Qt(o,d){if(o&1){let i=C();_(0,"div",38)(1,"p",132),I(2),v(3,"translate"),p(),_(4,"ng-select",133,14),f("clear",function(){a(i);let e=r(3);return l(e.EmployeeArr=[])})("focus",function(){a(i);let e=y(5),n=r(3);return n.ChangeSearchApi("Employee",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(5),n=r(3);return n.ChangeSearchApi("Employee",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(5),n=r(3);return l(n.ChangeSearchApi("Employee",e))})("close",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(3);return l(e.SelectValue(e.Invoice.EmployeeId,"Employee"))}),N("ngModelChange",function(e){a(i);let n=r(3);return b(n.Invoice.EmployeeId,e)||(n.Invoice.EmployeeId=e),l(e)}),T(6,Ft,2,2,"ng-template",28)(7,jt,1,1,"ng-template",29),p()()}if(o&2){let i=r(3);s(2),x(g(3,7,"BuyReport.Employee")),s(2),u("items",i.EmployeeArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),D("ngModel",i.Invoice.EmployeeId)}}function $t(o,d){if(o&1&&(P(0,"input",135),v(1,"translate")),o&2){let i=r(4);V("placeholder",g(1,3,"BuyInvoice.Debt")),V("value",i.Invoice.Debt),u("disabled",!0)}}function Zt(o,d){if(o&1&&(_(0,"div",38),T(1,$t,2,5,"input",134),p()),o&2){let i=r(3);s(),u("ngIf",i.Invoice.Debt!=null)}}function Jt(o,d){if(o&1){let i=C();_(0,"div",122)(1,"div",123)(2,"select",124),f("change",function(){a(i);let e=r(2);return l(e.ChangePamentType(e.Invoice.PaymentType))}),N("ngModelChange",function(e){a(i);let n=r(2);return b(n.Invoice.PaymentType,e)||(n.Invoice.PaymentType=e),l(e)}),_(3,"option",125),I(4),v(5,"translate"),p(),_(6,"option",125),I(7),v(8,"translate"),p(),T(9,Et,3,4,"option",126),p()(),T(10,Rt,3,5,"div",127)(11,Gt,10,10,"div",42)(12,Ot,3,5,"div",127)(13,Ht,10,9,"div",42)(14,Qt,8,9,"div",127)(15,Zt,2,1,"div",127),p()}if(o&2){let i=r(2);s(2),D("ngModel",i.Invoice.PaymentType),s(),u("value",1),s(),x(g(5,12,"SaleInvoice.Cash")),s(2),u("value",2),s(),x(g(8,14,"SaleInvoice.Debt")),s(2),u("ngIf",i.ScreenName=="SaleInvoice"||i.ScreenName=="ManufactureInvoice"),s(),u("ngIf",i.Invoice.PaymentType!=3),s(),u("ngIf",i.Invoice.PaymentType!=3),s(),u("ngIf",i.Invoice.PaymentType!=3),s(),u("ngIf",i.Invoice.PaymentType!=3),s(),u("ngIf",i.Invoice.PaymentType==3),s(),u("ngIf",i.Invoice.PaymentType==2)}}function Kt(o,d){if(o&1&&(_(0,"div")(1,"span",46),I(2),v(3,"translate"),p(),_(4,"span",47),I(5),p()()),o&2){let i=r(2);s(2),x(g(3,2,"SaleInvoice.TotalDiscount")),s(3),w("",i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalDisc)," ")}}function qt(o,d){if(o&1&&(_(0,"div")(1,"span",46),I(2),v(3,"translate"),p(),_(4,"span",47),I(5),p()()),o&2){let i=r(2);s(2),x(g(3,2,"SaleInvoice.DiscountRate")),s(3),w("",i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalDiscRate)," ")}}function zt(o,d){if(o&1&&(_(0,"i",46),I(1),v(2,"translate"),_(3,"i",136),I(4),p()()),o&2){let i=r(2);s(),w("",g(2,2,"SaleInvoice.TotalVat")," "),s(3),w(" ",i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.Vat," % ")}}function Yt(o,d){if(o&1&&(_(0,"i",46),I(1),v(2,"translate"),_(3,"i",136),I(4),p()()),o&2){let i=r(2);s(),w(" ",g(2,2,"SaleInvoice.TotalVat")," "),s(3),w(" ",i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalVatRate)," % ")}}function Xt(o,d){if(o&1&&(_(0,"div")(1,"span",46),I(2),v(3,"translate"),p(),_(4,"span",47),I(5),p()()),o&2){let i=r(2);s(2),x(g(3,2,"BuyInvoice.ReturnAmount")),s(3),w(" ",i._AppModeService.GetTwoNumberAfterZero(i.ReturnAmount)," ")}}function ei(o,d){if(o&1){let i=C();P(0,"app-modal-header",19),_(1,"div",20)(2,"div",21)(3,"p-table",22),T(4,ot,21,17,"ng-template",23)(5,ut,49,48,"ng-template",24),p()()(),_(6,"div",25)(7,"div",26)(8,"ng-select",27,6),f("clear",function(){a(i);let e=r();return l(e.ItemsBarCode=[])})("focus",function(){a(i);let e=y(9),n=r();return n.HandleProductCode(e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=y(9),n=r();return n.HandleProductCode(e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=y(9),n=r();return l(n.HandleProductCode(e))})("close",function(){a(i);let e=r();return e._AppModeService.ResetCurrentPage(),l(e.ItemsBarCode=[])})("open",function(){a(i);let e=r();return l(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=y(9),n=r();return n.SelectProductScan(n.ProductBarCodeId),e.handleClearClick(),e.blur(),l(n.ItemsBarCode=[])}),N("ngModelChange",function(e){a(i);let n=r();return b(n.ProductBarCodeId,e)||(n.ProductBarCodeId=e),l(e)}),T(10,mt,2,2,"ng-template",28)(11,It,1,2,"ng-template",29),p()(),_(12,"div",30),T(13,vt,3,5,"div",31)(14,ht,3,4,"div",31),p(),_(15,"div",32),P(16,"input",33),p(),_(17,"div",34)(18,"input",35),v(19,"translate"),N("ngModelChange",function(e){a(i);let n=r();return b(n.Invoice.Notes,e)||(n.Invoice.Notes=e),l(e)}),p()(),T(20,gt,15,12,"div",36),p(),_(21,"div",37)(22,"div",38),T(23,St,3,4,"span",39)(24,ft,1,5,"p-calendar",40),p(),T(25,Ct,9,10,"div",41)(26,Nt,10,9,"div",41)(27,Mt,7,2,"div",42)(28,Bt,13,10,"div",43)(29,Jt,16,16,"div",44),p(),_(30,"div",45)(31,"div")(32,"span",46),I(33),v(34,"translate"),p(),_(35,"span",47),I(36),p()(),_(37,"div")(38,"span",46),I(39),v(40,"translate"),p(),_(41,"span",47),I(42),p()(),T(43,Kt,6,4,"div",48)(44,qt,6,4,"div",48),_(45,"div")(46,"span"),T(47,zt,5,4,"i",49)(48,Yt,5,4,"i",49),p(),_(49,"span",47),I(50),p()(),_(51,"div")(52,"span",46),I(53),v(54,"translate"),p(),_(55,"span",47),I(56),p()(),T(57,Xt,6,4,"div",48),p(),_(58,"app-modal-footer",50),f("SaveEvent",function(){a(i);let e=r();return l(e.Save())})("UpdateEvent",function(){a(i);let e=r();return l(e.Save())})("OpenGlEvent",function(){a(i);let e=r();return l(e.OpenGl())})("HoldEvent",function(){a(i);let e=r();return l(e.HoldInvoice())})("ShowHoldedEvent",function(){a(i);let e=r();return l(e.ShowHoldInvoice())})("CloseEvent",function(){let e=a(i).$implicit,n=r();return e.close("Close click"),l(n.ResetPage())}),p()}if(o&2){let i=r();u("PageTitle",i.PageTitle),s(3),u("value",i.Invoice.InvoiceDetails)("responsive",!0)("scrollable",!0),s(5),u("dropdownPosition","top")("items",i.ItemsBarCode)("virtualScroll",!0)("searchable",!0),D("ngModel",i.ProductBarCodeId),s(5),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),s(),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),s(2),u("value",i.Invoice.DocNo)("disabled",!0),s(2),V("placeholder",g(19,39,"Table.Notes")),D("ngModel",i.Invoice.Notes),s(2),u("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"||i.ScreenName=="ManufactureInvoice"),s(3),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),s(),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),s(),u("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="ManufactureInvoice"||i.ScreenName=="SaleInvoice"&&i._DefaultSettingsService.DefaultSettings.HideSorage==!1),s(),u("ngIf",i.ScreenName=="BuyOffer"||i.ScreenName=="BuyInvoice"),s(),u("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"||i.ScreenName=="ManufactureInvoice"),s(),u("ngIf",i._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1),s(),u("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"||i.ScreenName=="ManufactureInvoice"),s(4),x(g(34,41,"ProductCount")),s(3),x(i.Invoice.InvoiceDetails.length),s(3),x(g(40,43,"SaleInvoice.TotalInvoice")),s(3),w(" ",i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalInvoice)," "),s(),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),s(),u("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),s(3),u("ngIf",i.Invoice.Id==0),s(),u("ngIf",i.Invoice.Id>0),s(2),x(i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalInvoiceVatAmount)),s(3),x(g(54,45,"SaleInvoice.TotalAfterVat")),s(3),w("",i._AppModeService.GetTwoNumberAfterZero(i.Invoice.TotalInvoiceAfterVat)," "),s(),u("ngIf",(i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"||i.ScreenName=="ManufactureInvoice")&&i.Invoice.Id>0),s(),u("Id",i.Invoice.Id)("HideUpdate",!i._Apiservice.environment.SystemUpdate)("Gl",(i.ScreenName=="SaleInvoice",!0))("HoldBtn",(i.ScreenName=="SaleInvoice",!0))}}function ti(o,d){if(o&1){let i=C();X(0),_(1,"app-dynamic-component",137,15),f("ShowToEditeNoDataViewEvent",function(e){let n=a(i).$implicit,c=r();return l(c.GetSaleHold(e,n))}),p(),ee(),_(3,"div",138)(4,"button",139),f("click",function(){let e=a(i).$implicit;return l(e.close("Close click"))}),I(5),v(6,"translate"),p()()}if(o&2){let i=r();s(),u("PageTitle","SaleInvoice.AllHold")("TablePaging",i.OutTablePaging)("IsModal",!0)("GetById","HoldInvoiceEP/GetById")("DeleteUrl","HoldInvoiceEP/Delete"),s(4),x(g(6,6,"Model.Close"))}}function ii(o,d){if(o&1&&(_(0,"tr")(1,"td")(2,"span",143),I(3),p()(),_(4,"td")(5,"span",143),I(6),p()()()),o&2){let i=d.$implicit;s(3),x(i.Name+" - "+i.UnitFactor),s(3),x(i.Qty)}}function ni(o,d){if(o&1&&(_(0,"div",140)(1,"table",141)(2,"thead")(3,"tr")(4,"th"),I(5),v(6,"translate"),p(),_(7,"th"),I(8),v(9,"translate"),p()()(),_(10,"tbody"),T(11,ii,7,2,"tr",142),p()()()),o&2){let i=r();s(5),x(g(6,3,"SaleInvoice.Name")),s(3),x(g(9,5,"Table.Balance")),s(3),u("ngForOf",i.ItemBalanceList)}}function oi(o,d){if(o&1){let i=C();_(0,"app-dynamic-modal",144),f("CloseParentModel",function(){let e=a(i).$implicit,n=r();return e.close("model close"),l(n.ResetSharedScreen())}),p()}if(o&2){let i=r();u("PageTitle",i.SharedScreen.TablePaging.PageTitle)("DataView",i.SharedScreen.DataView)("AddUrl",i.SharedScreen.TablePaging.AddUrl)("UpdateUrl",i.SharedScreen.TablePaging.UpdateUrl)("DeleteUrl",i.SharedScreen.TablePaging.DeleteUrl)("NotInsertTablePaging",!0)("GetById",i.SharedScreen.TablePaging.GetById)}}var Hi=(()=>{let d=class d{constructor(t,e,n,c,m,h,S){this._SharedScreenService=t,this._ScaleSettingsService=e,this._ActivatedRoute=n,this._SharedObjectModelService=c,this._DefaultSettingsService=m,this._AppModeService=h,this._Apiservice=S,this._ServiceLifeTime=j(F),this.SignalR=!1,this.GlResponse=!1,this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.SupplierArr=[],this.ClientArr=[],this.TreasuryArr=[],this.BankAccountArr=[],this.EmployeeArr=[],this.StoreArr=[],this.ItemBalanceList=[],this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.ReturnAmount=0,this.GlobalDiscountRate="",this.GlobalDiscount="",this.ItemsBarCode=[],this.ProductBarCodeId=null,this.Weight="",this.SharedScreen={DataView:[],TablePaging:{BranchFilter:!1,Columns:[],PageTitle:"",TableCell:[],TableName:"",Url:""}},this.EnumScreen={None:0,Client:1,Supplier:2,Treasury:3,BankAccount:4,Storage:5}}ngOnChanges(){let t=Number(this._ActivatedRoute.snapshot.queryParams.Id);t>0&&this.GetByIdRoute(t)}ngOnInit(){this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}StartConnection(){this.Hub_Connection=new He().withUrl(`${le.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:Le.WebSockets,accessTokenFactory:()=>this._Apiservice.getToken()}).configureLogging(We.Error).build(),this.Hub_Connection.start().then(()=>{console.log("Hub Connection Success")}).catch(t=>{console.log(t)})}ServerListener(){this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this.DynamicComponent.Paging.DataReturn=this.DynamicComponent.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}GetPageInfo(){this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:t=>{this.Invoice.DocNo=t.Obj}})}OpenModal(){this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ChangeSearchApi(t,e){let n="";n=`${e.searchTerm}`.trim(),(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let c={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Storages"&&(c.BranchFilter=!0),t=="Treasury"&&(c.BranchFilter=!0),t=="Items"&&(c.Columns=["Id","Name","Code"],c.SearchField="Code"),t=="Items"&&this.ScreenName=="ManufactureInvoice"&&(c.TableName="ProductRecipe",c.BranchFilter=!0,c.Join=!0,c.JoinTables=["Items Product"],c.JoinConditions=["T.ProductId = Product.Id"],c.Columns=["T.ProductId As Id","Product.Name As Name","Product.Code As Code"],c.SearchField="Product.Name"),this._Apiservice.post("Global/GetAll",c,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:m=>{this.HandleResponse(m.Obj,t)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Suppliers"&&(this.SupplierArr=this._SharedObjectModelService.RemoveDuplicates(this.SupplierArr.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ClientArr=this._SharedObjectModelService.RemoveDuplicates(this.ClientArr.concat(t.DataReturn),"Id")),e=="Storages"&&(this.StoreArr=this._SharedObjectModelService.RemoveDuplicates(this.StoreArr.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id")),e=="Employee"&&(this.EmployeeArr=this._SharedObjectModelService.RemoveDuplicates(this.EmployeeArr.concat(t.DataReturn),"Id")),e=="Items"&&(this.ItemsBarCode=this._SharedObjectModelService.RemoveDuplicates(this.ItemsBarCode.concat(t.DataReturn),"Id").map(n=>G(U({},n),{NameAndCode:n.Code!=null?`${n.Name} - ${n.Code}`:`${n.Name}`})))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Supplier"&&(n=this.SupplierArr),e=="Client"&&(n=this.ClientArr),e=="Store"&&(n=this.StoreArr),e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr),e=="Employee"&&(n=this.EmployeeArr);let c=n.find(m=>m.Id==t);if(c==null){this._AppModeService.DontPlay();return}else this.Invoice[`${e}Id`]=t,this.Invoice[`${e}Name`]=c.Name,e=="Supplier"&&this.GetNetSupplier(t),e=="Client"&&this.GetNetClient(t)}else this.Invoice[`${e}Id`]=null,this.Invoice[`${e}Name`]="",(e=="Supplier"||e=="Client")&&(this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0})}HandleProductCode(t){let e="";if(e=`${t.searchTerm}`.trim(),e=="null"&&(t.searchTerm="",e="",t.searchTerm=e),e!=""){for(let n=0;n<this._ScaleSettingsService.ScaleSettingsArr.length;n++){let c=this._ScaleSettingsService.ScaleSettingsArr[n];if(e.length==c.BarCodeLength&&e.startsWith(c.ZaraNumber)){let m=e.substring(c.ZaraNumber.length,c.BarCodeLength).substring(0,c.ProductCodeLength);this.Weight=e.substring(c.ZaraNumber.length).substring(c.ProductCodeLength);let h=Number(this.Weight.substring(0,2)),S=Number(this.Weight.substring(2,this.Weight.length));this.Weight=`${h}.${S}`,t.searchTerm=m,this.ChangeSearchApi("Items",t);break}}return}else this.ChangeSearchApi("Items",t)}SelectProductScan(t){if(t!=null&&t>0){let e=this.ItemsBarCode.find(m=>m.Id==t),n=this.Invoice.InvoiceDetails.findIndex(m=>m.ProductId===null),c=this.Invoice.InvoiceDetails[n];if(c!=null)c.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],c.ProductId=t,this.AfterSelectem(t,n);else{this.AppendRow();let m=this.Invoice.InvoiceDetails.findIndex(S=>S.ProductId===null),h=this.Invoice.InvoiceDetails[m];h.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],h.ProductId=t,this.AfterSelectem(t,m)}this.ItemsBarCode=[],this.ProductBarCodeId=null}this._AppModeService._Toastr.ScannerSound()}ChangeSearchApiDetails(t,e,n){let c=`${e.searchTerm}`.trim();(c==""||c=="null")&&(e.searchTerm="",c="");let m="";this.ScreenName=="BuyInvoice"&&t=="Items"&&(m="ProductType != 2"),this.ScreenName=="SaleInvoice"&&this._DefaultSettingsService.DefaultSettings.HideSorage==!0&&t=="Items"&&(m="ProductType = 2"),this._AppModeService.CurrentPage+=1;let h={TableName:t,Columns:["Id","Name"],Conditions:m,PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:c,SearchField:"Name"};if(t=="Items"&&(h.Columns=["Id","Name","Code"],h.ItemWithItemUnit=!0),t=="Items"&&this.ScreenName=="ManufactureInvoice"&&(h.TableName="ProductRecipe",h.BranchFilter=!0,h.Join=!0,h.JoinTables=["Items Product"],h.JoinConditions=["T.ProductId = Product.Id"],h.Columns=["T.ProductId As Id","Product.Name As Name","Product.Code As Code"],h.SearchField="Product.Name"),t=="ItemUnits"){let S=this.Invoice.InvoiceDetails[n].ProductId==null?0:this.Invoice.InvoiceDetails[n].ProductId;h.Conditions=`ItemId = ${S}`,h.Join=!0,h.JoinTables=["Units U"],h.NoPaging=!0,h.JoinConditions=["T.UnitId = U.Id"],h.Columns=["T.Id","U.Name","T.UnitFactor"],h.SearchField="U.Name"}this._Apiservice.post("Global/GetAll",h,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:S=>{this.HandleResponseDetails(S.Obj,t,n)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Items"&&(this.Invoice.InvoiceDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.Invoice.InvoiceDetails[n].Items.concat(t.DataReturn),"Id"),this.Invoice.InvoiceDetails[n].Items=this.Invoice.InvoiceDetails[n].Items.map(c=>G(U({},c),{NameAndCode:c.Code!=null?`${c.Name} - ${c.Code}`:`${c.Name}`}))),e=="ItemUnits"&&(this.Invoice.InvoiceDetails[n].ProductUnits=t.DataReturn.map(c=>G(U({},c),{NameAndUnitFactor:c.UnitFactor!=null?`${c.Name} - ${c.UnitFactor}`:`${c.Name}`})))}AppendRow(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};this.Invoice.InvoiceDetails.push(t),this._AppModeService.AppendTd()}RemoveRow(t){return this.Invoice.InvoiceDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorFirstRow")),!1):(this.Invoice.InvoiceDetails.splice(t,1),this.CalcInvoice(),!0)}SelectItem(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].Items.find(c=>c.Id==t);if(n!=null)this.Invoice.InvoiceDetails[e].ProductId=n.Id,this.Invoice.InvoiceDetails[e].ProductName=n.Name,this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.AfterSelectem(n.Id,e);else{this._Apiservice.DontPlay();return}}else this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(this.Invoice.InvoiceDetails[e].Price="")}AfterSelectem(t,e){if(t>0){let n={TableName:"ItemUnits",Columns:["Id","Name"],NoPaging:!0,SearchText:"",SearchField:"Name"};n.Conditions=`ItemId = ${t}`,n.Join=!0,n.JoinTables=["Units U"],n.JoinConditions=["T.UnitId = U.Id"],n.Columns=["T.Id","U.Name","T.UnitFactor","T.DefaultUnit"],n.SearchField="U.Name",this._Apiservice.post("Global/GetAll",n,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:c=>{c.Obj.DataReturn=c.Obj.DataReturn.map(S=>G(U({},S),{NameAndUnitFactor:S.UnitFactor!=null?`${S.Name} - ${S.UnitFactor}`:`${S.Name}`}));let m=c.Obj.DataReturn,h=m.find(S=>S.DefaultUnit==!0);if(h&&this.Invoice.InvoiceDetails.find(A=>A.ProductId==t&&A.ProductUnitId==h.Id)==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:h.Id,NameAndUnitFactor:h.Name+" - "+h.UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=h.Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice"?this.SelectUnit(h.Id,e):this.ChangeGlobalDis("");return}for(let S=0;S<m.length;S++){let A=this.Invoice.InvoiceDetails.find(R=>R.ProductId==t&&R.ProductUnitId==m[S].Id);if(A==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:m[S].Id,NameAndUnitFactor:m[S].Name+" - "+m[S].UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=m[S].Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice"?this.SelectUnit(m[S].Id,e):this.ChangeGlobalDis("");break}A!=null&&S==m.length-1&&this.Invoice.InvoiceDetails.splice(e,1)}this.CalcInvoice()}})}}SelectUnit(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].ProductUnits.find(c=>c.Id==t);if(n!=null){if(this.Invoice.InvoiceDetails[e].ProductUnitId=n.Id,this.Invoice.InvoiceDetails[e].ProductUnitName=n.Name,this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice"){let c={ProductId:this.Invoice.InvoiceDetails[e].ProductId,ProductUnitId:n.Id};this._Apiservice.post("ProductPricingEP/ProductPice",c,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:m=>{this.Invoice.InvoiceDetails[e].Price=m.Obj,this.ChangeGlobalDis("")}})}}else{this._Apiservice.DontPlay();return}}else(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(this.Invoice.InvoiceDetails[e].Price="")}ProductBalance(t,e){let n={ProductId:this.Invoice.InvoiceDetails[t].ProductId==null?0:this.Invoice.InvoiceDetails[t].ProductId,StoreId:this.Invoice.StoreId==null?0:this.Invoice.StoreId};this._Apiservice.post("ItemEP/ProductBalance",n,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:c=>{this.ItemBalanceList=c.Obj.StorageBalance,this._AppModeService._NgbModal.open(e,{size:"xl",centered:!0})}})}ChangeClientType(t){this.Invoice.ClientId=null,this.Invoice.ClientName=" ",t==1&&(this.Invoice.ClientType=1,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),t==2&&(this.Invoice.ClientType=2),this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0}}Discount(t,e){let n=this.Invoice.InvoiceDetails[e];t=="DiscountRate"&&Number(n.DiscountRate)>0&&(n.Discount=""),t=="Discount"&&Number(n.Discount)>0&&(n.DiscountRate=""),(Number(n.DiscountRate)>100||Number(n.DiscountRate)<0)&&(n.DiscountRate=""),Number(n.Discount)<0&&(n.Discount=""),Number(n.Price)<0&&(n.Price=""),Number(n.Quantity)<0&&(n.Quantity=""),this.CalcInvoice()}ChangeGlobalDis(t){let e="",n="";if(t=="GlobalDiscountRate"&&(n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),this.GlobalDiscount="",e=""),t=="GlobalDiscount"&&(e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate="",n=""),t==""){n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate=n,this.GlobalDiscount=e,Number(e)==0&&Number(n)==0&&this.CalcInvoice();return}for(let c=0;c<this.Invoice.InvoiceDetails.length;c++)Number(this.Invoice.InvoiceDetails[c].ProductId)>0&&(this.Invoice.InvoiceDetails[c].Discount=e,this.Invoice.InvoiceDetails[c].DiscountRate=n);this.CalcInvoice()}Button(t,e,n){e=="+"&&this.Invoice.InvoiceDetails[n][`${t}`]++,e=="-"&&(this.Invoice.InvoiceDetails[n][`${t}`]=this.Invoice.InvoiceDetails[n][`${t}`]<=0?0:this.Invoice.InvoiceDetails[n][`${t}`]-1),this.CalcInvoice()}GetNetSupplier(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("SupplierEP/SupplierNetAmount",t,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:e=>{this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}}})}GetNetClient(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("ClientEP/ClientNetAmount",t,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:e=>{this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}}})}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:e=>{this.GLComponent.Gl=e.Obj.Gl,this.Drow(e.Obj.model),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})}})}ShowToEdite(t){this.GLComponent.Gl=t.Gl,this.ReturnAmount=t.ReturnAmount,this.Drow(t.PageModel)}Drow(t){let e=this.ScreenName;this.ScreenName=="ManufactureInvoice"&&(e="SaleInvoice"),this.Invoice={Id:t.Id,PaymentType:t.PaymentType,Name:t.Name,Notes:t.Notes,Code:t.Code,InvoiceCollection:t.InvoiceCollection,InvoiceCollected:t.InvoiceCollected,ClientType:t.ClientType,DocNo:t.DocNo,DocDate:new Date(t.DocDate),TotalInvoice:t.TotalInvoice,TotalDiscRate:t.TotalDiscRate,TotalDisc:t.TotalDisc,TotalInvoiceAfterDisc:t.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:t.TotalInvoiceAfterVat,TotalInvoiceVatAmount:t.TotalInvoiceVatAmount,TotalVatRate:t.TotalVatRate,Cash:t.Cash,Visa:t.Visa,Debt:t.Debt,SupplierId:t.SupplierId,SupplierName:t.SupplierName,ClientId:t.ClientId,ClientName:t.ClientName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,EmployeeId:t.EmployeeId,EmployeeName:t.EmployeeName,StoreId:t.StoreId,StoreName:t.StoreName,InvoiceDetails:t[`${e}Details`]},t.SupplierId>0&&(this.SupplierArr=[{Id:t.SupplierId,Name:t.SupplierName}]),t.ClientId>0&&(this.ClientArr=[{Id:t.ClientId,Name:t.ClientName}]),t.TreasuryId>0&&(this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName}]),t.BankAccountId>0&&(this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]),t.EmployeeId>0&&(this.EmployeeArr=[{Id:t.EmployeeId,Name:t.EmployeeName}]),t.StoreId>0&&(this.StoreArr=[{Id:t.StoreId,Name:t.StoreName}]);for(let n=0;n<this.Invoice.InvoiceDetails.length;n++){let c=this.Invoice.InvoiceDetails[n];c.Discount=c.Discount==0?"":c.Discount,c.DiscountRate=c.DiscountRate==0?"":c.DiscountRate,this.Invoice.InvoiceDetails[n].Items=[{Id:c.ProductId,Name:c.ProductName,NameAndCode:c.ProductName}],this.Invoice.InvoiceDetails[n].ProductUnits=[{Id:c.ProductUnitId,Name:c.ProductUnitName,NameAndUnitFactor:c.ProductUnitName}]}}TotalInvoiceVatAmount(){let t=0;for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=Number(this.Invoice.InvoiceDetails[e].Price),c=Number(this.Invoice.InvoiceDetails[e].Quantity),m=n*c,h=Number(this.Invoice.InvoiceDetails[e].Vat),S=Number(this.Invoice.InvoiceDetails[e].Discount),A=Number(this.Invoice.InvoiceDetails[e].DiscountRate);if(S>0&&(t+=(m-S)*(h/100)),A>0){let R=A/100*m;t+=(m-R)*(h/100)}S==0&&A==0&&(t+=m*(h/100))}return Number(t)}CalcInvoice(){this.Invoice.TotalDiscRate=0,this.Invoice.TotalInvoiceAfterDisc=0,this.Invoice.TotalInvoiceAfterVat=0,this.Invoice.TotalVatRate=0,this.Invoice.TotalDisc=0,this.Invoice.TotalInvoice=0,this.Invoice.TotalInvoiceVatAmount=0;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=Number(this.Invoice.InvoiceDetails[t].Price),n=Number(this.Invoice.InvoiceDetails[t].Quantity),c=Number(this.Invoice.InvoiceDetails[t].Discount),m=Number(this.Invoice.InvoiceDetails[t].DiscountRate),h=Number(this.Invoice.InvoiceDetails[t].Vat),S=e*n;this.Invoice.InvoiceDetails[t].TotalPrice=Number(S),this.Invoice.TotalInvoice+=Number(S),this.Invoice.InvoiceDetails[t].Discount=c==0?"":c;let A=0;m>0&&(A=m/100*S),c>0&&(A=c),this.Invoice.TotalDisc+=A,this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount=S-A,this.Invoice.InvoiceDetails[t].TotalPriceAfterVat=Number((e*n-A)*(h/100)+(e*n-A))}this.Invoice.TotalDiscRate=this.Invoice.TotalInvoice==0?0:Number(this.Invoice.TotalDisc/this.Invoice.TotalInvoice*100),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoice-this.Invoice.TotalDisc),this.Invoice.TotalInvoiceVatAmount=this.TotalInvoiceVatAmount(),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterDisc+this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=this.Invoice.TotalInvoiceAfterDisc==0?0:Number(this.Invoice.TotalInvoiceVatAmount/this.Invoice.TotalInvoiceAfterDisc*100),this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDiscRate),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalInvoiceVatAmount=Number(this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalVatRate),this.Invoice.TotalInvoice=Number(this.Invoice.TotalInvoice),this.Invoice.TotalDisc=Number(this.Invoice.TotalDisc),this.Invoice.TotalInvoiceAfterVat=this._AppModeService.GetTwoNumberAfterZero(Number(this.Invoice.TotalInvoiceAfterVat)),this.ChangeCash()}Validate(){if((this.ScreenName=="BuyOffer"||this.ScreenName=="BuyInvoice")&&(this.Invoice.SupplierId==0||this.Invoice.SupplierId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterSupplier")),!1;if(this.ScreenName=="BuyInvoice"&&(this.Invoice.StoreId==0||this.Invoice.StoreId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterStore")),!1;if(this.ScreenName=="SaleOffer"&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)&&this.Invoice.ClientType==2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if((this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.Invoice.DocDate==""||this.Invoice.DocDate==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterDate")),!1;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=t,n=Number(this.Invoice.InvoiceDetails[t].ProductId),c=Number(this.Invoice.InvoiceDetails[t].Price),m=Number(this.Invoice.InvoiceDetails[t].Quantity),h=Number(this.Invoice.InvoiceDetails[t].Discount),S=Number(this.Invoice.InvoiceDetails[t].DiscountRate),A=Number(this.Invoice.InvoiceDetails[t].Vat),R=Number(this.Invoice.InvoiceDetails[t].ProductUnitId),je=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount),Qe=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterVat);if(isNaN(n)||n<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterProduct")+" "+(e+1)),!1;if(R<=0||isNaN(R))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit")+" "+(e+1)),!1;if(this.Invoice.InvoiceDetails.filter(J=>J.ProductId==n&&J.ProductUnitId==R).length>=2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(e+1)),!1;if(isNaN(c)||c<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterPrice")+" "+(e+1)),!1;if(isNaN(m)||m<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterQuantity")+" "+(e+1)),!1;if(isNaN(h)||h<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorDiscount")+" "+(e+1)),!1;if(isNaN(S)||S<0||S>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorDiscountRate")+" "+(e+1)),!1;if(isNaN(A)||A<0||A>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorVat")+" "+(e+1)),!1;if(Qe<0||je<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorNetRow")+" "+(e+1)),!1}if(this.Invoice.TotalInvoice<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.TotalInvoiceAfterVat<0||this.Invoice.TotalInvoiceAfterVat<0&&this.Invoice.TotalInvoiceAfterDisc<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorTotal")),!1;if(this.ScreenName=="SaleInvoice"||this.ScreenName=="BuyInvoice"||this.ScreenName=="ManufactureInvoice"){if(Number(this.Invoice.Visa)<0||isNaN(Number(this.Invoice.Visa)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Cash)<0||isNaN(Number(this.Invoice.Cash)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Debt)<0||isNaN(Number(this.Invoice.Debt)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(Number(this.Invoice.Visa)>0&&(this.Invoice.BankAccountId<=0||this.Invoice.BankAccountId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterBank")),!1;if(Number(this.Invoice.Cash)>0&&(this.Invoice.TreasuryId<=0||this.Invoice.TreasuryId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterTreasury")),!1;if(this.Invoice.PaymentType==1&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)+Number(this.Invoice.Debt)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Debt)<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==3&&this.Invoice.EmployeeId==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SalesReport.ChooseEmployee")),!1}return!0}ChangePamentType(t){this.Invoice.BankAccountId=null,this.Invoice.BankAccountName="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.EmployeeId=null,this.Invoice.EmployeeName="",t==1&&(this.Invoice.PaymentType=1,this.Invoice.Visa="",this.Invoice.Debt="",this.Invoice.Cash=this.Invoice.TotalInvoiceAfterVat),t==2&&(this.Invoice.PaymentType=2,this.Invoice.Cash="",this.Invoice.Visa="",this.Invoice.Debt=this.Invoice.TotalInvoiceAfterVat),t==3&&(this.Invoice.Visa="",this.Invoice.Cash="",this.Invoice.Debt="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.BankAccountId=null,this.Invoice.BankAccountName=""),this.ChangeCash()}ChangeCash(){this.Invoice.PaymentType==2&&(this.Invoice.Debt=Number(this.Invoice.TotalInvoiceAfterVat-(Number(this.Invoice.Cash)+Number(this.Invoice.Visa)))),this.Invoice.PaymentType==1&&(this.Invoice.Cash=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Visa)),this.Invoice.Visa=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Cash))),this.Invoice.TreasuryId=Number(this.Invoice.Cash)==0?null:this.Invoice.TreasuryId,this.Invoice.BankAccountId=Number(this.Invoice.Visa)==0?null:this.Invoice.BankAccountId,this.Invoice.TreasuryName=Number(this.Invoice.Cash)==0?"":this.Invoice.TreasuryName,this.Invoice.BankAccountName=Number(this.Invoice.Visa)==0?"":this.Invoice.BankAccountName,this.Invoice.Cash=Number(this.Invoice.Cash)==0?"":this._AppModeService.GetTwoNumberAfterZero(this.Invoice.Cash),this.Invoice.Visa=Number(this.Invoice.Visa)==0?"":this._AppModeService.GetTwoNumberAfterZero(this.Invoice.Visa),this.Invoice.Debt=Number(this.Invoice.Debt)==0?"":this._AppModeService.GetTwoNumberAfterZero(this.Invoice.Debt),this.DefaultBankTreasury()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(this.Invoice.PaymentType=t.SaleInvoicePaymentType>0?t.SaleInvoicePaymentType:1,t.SaleInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.SaleInvoiceStoreId,this.StoreArr.push({Id:t.SaleInvoiceStoreId,Name:t.SaleInvoiceStoreName})),t.SaleInvoiceClientType>0&&(this.Invoice.ClientType=t.SaleInvoiceClientType,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A")),this.ScreenName=="BuyInvoice"&&(this.Invoice.PaymentType=t.BuyInvoicePaymentType>0?t.BuyInvoicePaymentType:1,t.BuyInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.BuyInvoiceStoreId,this.StoreArr.push({Id:t.BuyInvoiceStoreId,Name:t.BuyInvoiceStoreName})))}DefaultBankTreasury(){let t=this._DefaultSettingsService.DefaultSettings;(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(this.Invoice.Cash>0&&t.SaleInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.SaleInvoiceTreasuryId,this.TreasuryArr.push({Id:t.SaleInvoiceTreasuryId,Name:t.SaleInvoiceTreasuryName})),this.Invoice.Visa>0&&t.SaleInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.SaleInvoiceBankAccountId,this.BankAccountArr.push({Id:t.SaleInvoiceBankAccountId,Name:t.SaleInvoiceBankAccountName}))),this.ScreenName=="BuyInvoice"&&(this.Invoice.Cash>0&&t.BuyInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.BuyInvoiceTreasuryId,this.TreasuryArr.push({Id:t.BuyInvoiceTreasuryId,Name:t.BuyInvoiceTreasuryName})),this.Invoice.Visa>0&&t.BuyInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.BuyInvoiceBankAccountId,this.BankAccountArr.push({Id:t.BuyInvoiceBankAccountId,Name:t.BuyInvoiceBankAccountName})))}Save(){if(this.CalcInvoice(),this.Validate()==!1)return;this.Invoice.Cash=this.Invoice.Cash==""?0:this.Invoice.Cash,this.Invoice.Visa=this.Invoice.Visa==""?0:this.Invoice.Visa,this.Invoice.Debt=this.Invoice.Debt==""?0:this.Invoice.Debt;let t=this.ScreenName;this.ScreenName=="ManufactureInvoice"&&(t="SaleInvoice"),this.Invoice[`${t}Details`]=this.Invoice.InvoiceDetails.map(n=>G(U({},n),{Discount:n.Discount==""?0:n.Discount,DiscountRate:n.DiscountRate==""?0:n.DiscountRate}));let e={Id:this.Invoice.Id,PaymentType:Number(this.Invoice.PaymentType),Name:this.Invoice.Name,Notes:this.Invoice.Notes,Code:this.Invoice.Code,InvoiceCollection:this.Invoice.InvoiceCollection,InvoiceCollected:this.Invoice.InvoiceCollected,ClientType:this.Invoice.ClientType,DocNo:this.Invoice.DocNo,DocDate:this._Apiservice.ConvertISODate(this.Invoice.DocDate),TotalInvoice:this.Invoice.TotalInvoice,TotalDiscRate:this.Invoice.TotalDiscRate,TotalDisc:this.Invoice.TotalDisc,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate,Cash:Number(this.Invoice.Cash),Visa:Number(this.Invoice.Visa),Debt:Number(this.Invoice.Debt),TreasuryId:this.Invoice.TreasuryId,TreasuryName:this.Invoice.TreasuryName,BankAccountId:this.Invoice.BankAccountId,BankAccountName:this.Invoice.BankAccountName,EmployeeId:this.Invoice.EmployeeId,EmployeeName:this.Invoice.EmployeeName,StoreId:this.Invoice.StoreId,StoreName:this.Invoice.StoreName,ClientId:this.Invoice.ClientId==null?0:this.Invoice.ClientId,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName};e[`${t}Details`]=this.Invoice[`${t}Details`],e.Id==0&&this._Apiservice.post(this.AddUrl,e,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:n=>{this._AppModeService._Toastr.success(n.Message),this.ResetPage(),this.GetPageInfo(),this.DynamicComponent.Paging.DataReturn.push(n.Obj)}}),e.Id>0&&this._Apiservice.put(this.UpdateUrl,e,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:n=>{this._AppModeService._Toastr.success(n.Message);let c=n.Obj,m=this.DynamicComponent.Paging.DataReturn.find(h=>h.Id==c.Id);m!=null&&Object.assign(m,c),this.ResetPage(),this.GetPageInfo()}})}HoldInvoice(){let t=this.Invoice.InvoiceDetails.filter(c=>c.ProductId>0).map(c=>G(U({},c),{Discount:c.Discount==""?0:c.Discount,DiscountRate:c.DiscountRate==""?0:c.DiscountRate,Price:c.Price==""?0:c.Price}));if(t.length==0)return;if((this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient"));return}let e=0;(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(e=1),this.ScreenName=="BuyInvoice"&&(e=2);let n={ClientId:this.Invoice.ClientId,ClientType:this.Invoice.ClientType,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName,HoldType:e,HoldInvoiceDetails:t,Id:0,TotalInvoice:this.Invoice.TotalInvoice,TotalDisc:this.Invoice.TotalDisc,TotalDiscRate:this.Invoice.TotalDiscRate,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate};this._Apiservice.post("HoldInvoiceEP/Add",n,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:c=>{this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo()}})}ShowHoldInvoice(){let t="",e=[],n=[],c="Name",m={};(this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&(t="HoldType = 1",e=["Clients Client"],n=["T.ClientId = Client.Id"],c="Client.Name AS ClientName",m={SortName:"ClientName",CellName:"SaleInvoice.Client",ExistSearchField:"Client.Name"}),this.ScreenName=="BuyInvoice"&&(t="HoldType = 2",e=["Suppliers Supplier"],n=["T.SupplierId = Supplier.Id"],c="Supplier.Name AS SupplierName",m={SortName:"SupplierName",CellName:"BuyInvoice.Supplier",ExistSearchField:"Supplier.Name"}),this.OutTablePaging={PageTitle:"",BranchFilter:!0,Url:"Global/GetAll",TableName:"HoldInvoice",Conditions:t,Join:!0,JoinTables:e,JoinConditions:n,Columns:["T.Id",c,"T.TotalInvoice","T.TotalDisc","T.TotalInvoiceVatAmount","T.TotalInvoiceAfterVat","T.Notes"],TableCell:[m,{SortName:"TotalInvoice",CellName:"Table.Total"},{SortName:"TotalDisc",CellName:"Table.Discount"},{SortName:"TotalInvoiceVatAmount",CellName:"Table.Vat"},{SortName:"TotalInvoiceAfterVat",CellName:"Table.NetTotal"}]},this._AppModeService._NgbModal.open(this.AllHoldModel,{size:"xl"})}GetSaleHold(t,e){let n=t.PageModel;if(n.Id>0){this.Invoice.ClientId=n.ClientId,this.Invoice.ClientName=n.ClientName,this.Invoice.SupplierId=n.SupplierId,this.Invoice.SupplierName=n.SupplierName,n.SupplierId>0&&(this.SupplierArr=[{Id:n.SupplierId,Name:n.SupplierName}]),n.ClientId>0&&(this.ClientArr=[{Id:n.ClientId,Name:n.ClientName}]),this.Invoice.InvoiceDetails=[];for(let c=0;c<n.HoldInvoiceDetails.length;c++){let m=n.HoldInvoiceDetails[c];m.Items=[{Id:m.ProductId,Name:m.ProductName,NameAndCode:m.ProductName}],m.ProductUnits=[{Id:m.ProductUnitId,Name:m.ProductUnitName,NameAndUnitFactor:m.ProductUnitName}],this.Invoice.InvoiceDetails.push(m)}e.close("Close click"),this.CalcInvoice(),this.ChangeCash()}}ResetPage(){this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this._DefaultSettingsService.ResetDate(this.Invoice),this.HandleMyDefaultSettings(),this.ReturnAmount=0}ResetDetails(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};if(this.Invoice.InvoiceDetails.length>0&&(this.Invoice.InvoiceDetails=this.Invoice.InvoiceDetails.filter(e=>e.ProductId!=0&&e.ProductId!=null&&e.ProductType!=2),this.Invoice.InvoiceDetails.length==0)){this.Invoice.InvoiceDetails.push(t),this.CalcInvoice();return}}ngOnDestroy(){}handleKeyboardEvent(t){if(t.ctrlKey&&t.key==="Shift"&&(t.preventDefault(),this.AppendRow()),t.ctrlKey&&(t.key==="\u064A"||t.key==="d"||t.key==="D")&&(t.preventDefault(),this.Invoice.InvoiceDetails.length>1)){for(let e=this.Invoice.InvoiceDetails.length-1;e>0;e--)if(this.Invoice.InvoiceDetails[e].ProductId==null){this.RemoveRow(e);break}}t.ctrlKey&&(t.key===" "||t.key==="Space")&&(t.preventDefault(),this._Apiservice.environment.SystemUpdate==!0&&(this.ScreenName=="BuyInvoice"||this.ScreenName=="SaleInvoice"||this.ScreenName=="ManufactureInvoice")&&this.Save(),this.ScreenName!="BuyInvoice"&&this.ScreenName!="SaleInvoice"&&this.ScreenName!="ManufactureInvoice"&&this.Save()),t.ctrlKey&&(t.key==="\u0621"||t.key==="x"||t.key==="X")&&(t.preventDefault(),this.HoldInvoice()),t.ctrlKey&&(t.key==="\u0626"||t.key==="z"||t.key==="Z")&&(t.preventDefault(),this.ShowHoldInvoice())}SecoundScreen(t){t==this.EnumScreen.Client&&(this.SharedScreen=this._SharedScreenService.ClientScreen()),t==this.EnumScreen.Supplier&&(this.SharedScreen=this._SharedScreenService.SupplierScreen()),t==this.EnumScreen.Treasury&&(this.SharedScreen=this._SharedScreenService.TreasuryScreen()),t==this.EnumScreen.BankAccount&&(this.SharedScreen=this._SharedScreenService.BankAccountScreen()),t==this.EnumScreen.Storage&&(this.SharedScreen=this._SharedScreenService.StorageScreen()),this._AppModeService._NgbModal.open(this.OherModal,{size:"xl"})}ResetSharedScreen(){this.SharedScreen={DataView:[],TablePaging:{BranchFilter:!1,Columns:[],PageTitle:"",TableCell:[],TableName:"",Url:""}}}};d.\u0275fac=function(e){return new(e||d)(k(Ue),k(Fe),k(ae),k(Ee),k(Oe),k($),k(Q))},d.\u0275cmp=q({type:d,selectors:[["app-dynamic-invoice"]],viewQuery:function(e,n){if(e&1&&(O(qe,5),O(ze,5),O(Ye,5),O(Xe,5),O(et,5),O(tt,5)),e&2){let c;W(c=L())&&(n.GLComponent=c.first),W(c=L())&&(n.DynamicComponent=c.first),W(c=L())&&(n.ContentModel=c.first),W(c=L())&&(n.OherModal=c.first),W(c=L())&&(n.AllHoldModel=c.first),W(c=L())&&(n.tableContainer=c.first)}},hostBindings:function(e,n){e&1&&f("keydown",function(m){return n.handleKeyboardEvent(m)},!1,Y)},inputs:{SignalR:"SignalR",GlResponse:"GlResponse",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[te([F]),z,ie],decls:12,vars:8,consts:[["dynamiccomponent",""],["content",""],["AllHold",""],["ItemBalance",""],["OherModal",""],["GLComponent",""],["Select",""],["SelectItem22",""],["SelectUnits",""],["SelectStore",""],["SelectSupplier",""],["SelectClient",""],["SelectTreasury",""],["SelectBank",""],["SelectEmployee",""],["appdynamiccomponent",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","PrintUrl","DeleteUrl","OutModal"],[1,"modalConent"],[1,"col-8"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0","Invoicemodalbody"],["id","ProductTable",1,"DivPaging","table-responsive","col-12","p-0","ProductTable"],[1,"",3,"value","responsive","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"bg-white","InvoiceContent","col-12","d-flex","flex-wrap","align-items-center"],["id","myContainer",1,"col-12","col-md-4","p-1"],["id","ngSelectComponent","placeholder","BarCode","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-6","col-xl-3","p-1","d-flex"],["class","d-inline-block mx-1",4,"ngIf"],[1,"col-12","col-md-6","col-xl-1","p-1"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-md-6","col-xl-2","p-1"],["type","text",1,"form-control","text-center",3,"ngModelChange","placeholder","ngModel"],["class","col-12  col-md-4 col-xl-2 p-1 d-flex text-center justify-content-center ",4,"ngIf"],[1,"bg-white","d-flex","flex-wrap","align-items-end","col-12","InvoiceContent"],[1,"col-12","col-md-4","col-lg-3","col-xl-2","p-1"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class","  text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1  d-flex align-items-end",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1 d-flex align-items-end",4,"ngIf"],["class","col-12 col-sm-6 col-md-12 col-lg-4 col-xl-4 p-1 d-flex flex-wrap align-items-center    ",4,"ngIf"],["class","col-12  p-1 d-flex flex-wrap align-items-end",4,"ngIf"],[1,"d-flex","flex-wrap","px-lg-2","TotalsContainer"],[1,"smal-header"],[1,""],[4,"ngIf"],["class","smal-header",4,"ngIf"],[3,"SaveEvent","UpdateEvent","OpenGlEvent","HoldEvent","ShowHoldedEvent","CloseEvent","Id","HideUpdate","Gl","HoldBtn"],[1,"col-"],[1,"d-block","text-center"],[1,"col-3"],[1,"col-2"],["class","col-2",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"col-1"],[1,"Flex1",3,"title"],[1,"d-flex","justify-content-center","align-items-center","col-11","col-md-12"],[1,"d-none","d-lg-inline"],[1,"btn-Primary","py-2","px-2","btn","mx-2",3,"click"],[1,"mx-1","fw-bold","pi","pi-plus"],[1,"btn-Delete","btn-Page","btn","py-2","px-2",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold"],[1,"SelectProduct",3,"title"],[1,"d-flex","col-12"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11","col-lg-10",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","virtualScroll","searchable","ngModel"],[1,"btn","btn-Refresh",3,"click","disabled"],[1,"pi","pi-eye","d-block","mx-auto","fw-bold"],[1,"SelectProductUnit",3,"title"],["bindLabel","NameAndUnitFactor","bindValue","Id",1,"p-0","text-center","col-10","col-lg-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","disabled","virtualScroll","searchable","ngModel"],[1,"p-1"],[1,"d-flex","justify-content-around","align-items-center","col-12"],[1,"btn","btn-Primary","px-1","py-1",3,"click","disabled"],[1,"col-8","px-1"],["min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"change","keyup","ngModelChange","id","name","placeholder","disabled","ngModel"],[1,"btn","btn-Info","px-1","py-1",3,"click","disabled"],[1,"mx-1","px-1","pi","fw-bold"],[1,"col-12"],["class","text-dark d-block text-center",4,"ngIf"],["min","0","type","number","appNumericInput","","class","form-control text-center px-0",3,"placeholder","id","name","disabled","ngModel","change","keyup","ngModelChange",4,"ngIf"],["class","p-1",4,"ngIf"],[1,"text-center","col-12"],[1,"text-dark","d-block","d-md-none","text-center"],[1,"text-dark","d-block","text-center"],[1,"form-text","text-muted"],["min","0","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","placeholder","id","name","disabled","ngModel"],[1,"d-inline-block","mx-1"],["type","number","appNumericInput","","name","GlobalDiscountRate","id","GlobalDiscountRate",1,"form-control","text-center",3,"change","keyup","ngModelChange","placeholder","ngModel"],["type","number","appNumericInput","","name","GlobalDiscount","id","GlobalDiscount",1,"form-control","text-center",3,"change","keyup","ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","col-xl-2","p-1","d-flex","text-center","justify-content-center"],[1,"form-check","p-0","text-center","mx-2"],[1,"d-flex","align-items-center"],["for","ClientType1",1,"p-0","text-center"],[1,"text-end"],["type","radio","name","ClientType","id","ClientType1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","ClientType2",1,"p-0","text-center"],["type","radio","name","ClientType","id","ClientType2",1,"form-check-input","mx-2",3,"change","ngModelChange","value","checked","ngModel"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"col-12","col-md-4","col-lg-3","col-xl-2","p-1","d-flex","align-items-end"],[1,"col-10","p-0"],["bindLabel","Name","bindValue","Id",1,"p-0","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"p-0"],["class","btn btn-Refresh px-2 py-2 mb-0",3,"click",4,"ngIf"],[1,"btn","btn-Refresh","px-2","py-2","mb-0",3,"click"],[1,"m-0","p-0","text-center","fw-bold","pi","pi-plus"],["bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","change","close","open","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"col-2","px-0"],[1,"btn","btn-Refresh","px-2","py-1","mb-0",3,"click"],[1,"m-0","my-2","p-0","text-center","fw-bold","pi","pi-plus"],["placeholder","Name","type","text","class","form-control text-center","name","","id","Client_Name",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["class","p-0 text-center","bindLabel","Name","bindValue","Id",3,"items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel","clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange",4,"ngIf"],["placeholder","Name","type","text","name","","id","Client_Name",1,"form-control","text-center",3,"ngModelChange","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"col-12","col-sm-6","col-md-12","col-lg-4","col-xl-4","p-1","d-flex","flex-wrap","align-items-center"],[1,"col-6","p-1","d-flex","align-items-center","justify-content-between"],[1,"col-5","text-center"],[1,"col-6"],["type","number","appNumericInput","","name","NetThamBranch","id","NetThamBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-6","text-center"],["type","number","appNumericInput","","name","NetOtherBranch","id","NetOtherBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-12","p-1","d-flex","flex-wrap","align-items-end"],[1,"col-12","col-md-4","col-lg-2","col-xl-1","p-1"],["name","","id","",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1",4,"ngIf"],["min","0","type","number","appNumericInput","","id","Cash",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","disabled","ngModel"],["min","0","type","number","appNumericInput","","id","Visa",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","placeholder","virtualScroll","searchable","disabled","ngModel"],[1,"d-inline"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],["id","Debt","min","0","type","number","appNumericInput","","class","form-control text-center",3,"placeholder","disabled","value",4,"ngIf"],["id","Debt","min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"placeholder","disabled","value"],[1,"mx-1"],[3,"ShowToEditeNoDataViewEvent","PageTitle","TablePaging","IsModal","GetById","DeleteUrl"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],["type","button",1,"btn","btn-light","btn-Close","border","border-1","border-dark",3,"click"],[1,"modal-body"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"text-dark"],[3,"CloseParentModel","PageTitle","DataView","AddUrl","UpdateUrl","DeleteUrl","NotInsertTablePaging","GetById"]],template:function(e,n){if(e&1){let c=C();_(0,"app-dynamic-component",16,0),f("OpenModalEvent",function(){return a(c),l(n.OpenModal())})("ShowToEditeEvent",function(h){return a(c),l(n.ShowToEdite(h))}),p(),T(2,ei,59,47,"ng-template",17,1,H)(4,ti,7,8,"ng-template",18,2,H)(6,ni,12,7,"ng-template",18,3,H)(8,oi,1,7,"ng-template",18,4,H),P(10,"app-glsheard",null,5)}if(e&2){let c=y(3);u("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!0)("GlResponse",n.GlResponse)("GetById",n.GetById)("PrintUrl",n.PrintUrl)("DeleteUrl",n.DeleteUrl)("OutModal",c)}},dependencies:[Ae,we,De,ce,Ne,be,fe,he,ge,pe,me,ve,Ie,de,Se,ue,Ce,Te,ye,xe,oe,re,Ve,_e,se,ke,Ge,Me,Pe,Re,Be],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important;cursor:pointer}"]});let o=d;return o})();export{Hi as a};
