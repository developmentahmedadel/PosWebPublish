import{a as Re,b as Ve,c as Be}from"./chunk-BZPR73YG.js";import{a as ve}from"./chunk-RI6KAADW.js";import{a as we}from"./chunk-3UDBFBON.js";import{a as Ie,b as fe,c as Me,h as De}from"./chunk-ZV4STMPN.js";import{a as Se}from"./chunk-VSYXDL23.js";import{a as ge,b as Te}from"./chunk-6BJKXUWP.js";import{a as Ae}from"./chunk-LUZO7NCR.js";import{a as ue,b as Ce,c as ye,d as xe}from"./chunk-MZIKAFPE.js";import{c as he}from"./chunk-NUFVOF6D.js";import{c as ne,d as re}from"./chunk-KALZ37GW.js";import{b as te,c as ie,f as ae,h as se,k as oe,m as le,n as ce,o as _e,p as pe,q as de,u as me}from"./chunk-N4FWSTCP.js";import{A as ee,d as K,e as X,j as Z}from"./chunk-VTADEU6K.js";import{$b as M,Cb as _,Db as p,Eb as k,Ib as v,Mb as S,Nb as r,Qb as I,Rb as G,Tb as j,Ub as U,Vb as F,Wb as C,X as B,Xb as h,Yb as E,Zb as g,_b as V,ac as A,bc as D,db as c,dc as z,eb as N,na as q,nc as y,oc as x,pc as Y,qc as J,vb as f,xa as o,xb as u,ya as l}from"./chunk-J5UB44FZ.js";var Ee=["content"],Pe=["GLComponent"],Ne=["dynamiccomponent"];function ke(s,d){if(s&1&&(_(0,"span",49),h(1),y(2,"date"),p()),s&2){let i=r(2);c(),g(" ",Y(2,1,i.ModelCash.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function be(s,d){if(s&1){let i=v();_(0,"p-calendar",50),D("ngModelChange",function(e){o(i);let n=r(2);return A(n.ModelCash.DocDate,e)||(n.ModelCash.DocDate=e),l(e)}),p()}if(s&2){let i=r(2);M("ngModel",i.ModelCash.DocDate),u("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function Ge(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Oe(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function We(s,d){if(s&1){let i=v();_(0,"div",51)(1,"p"),h(2),y(3,"translate"),p(),_(4,"ng-select",52,3),S("clear",function(){o(i);let e=r(2);return l(e.TreasuryArr=[])})("focus",function(){o(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Treasury",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Treasury",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(5),n=r(2);return l(n.ChangeSearchApi("Treasury",e))})("close",function(){o(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(2);return l(e.SelectValue(e.ModelCash.TreasuryId,"Treasury"))}),D("ngModelChange",function(e){o(i);let n=r(2);return A(n.ModelCash.TreasuryId,e)||(n.ModelCash.TreasuryId=e),l(e)}),f(6,Ge,2,2,"ng-template",53)(7,Oe,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),E(x(3,6,"MoneyIn.Treasury")),c(2),u("items",i.TreasuryArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.TreasuryId)}}function $e(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Le(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function je(s,d){if(s&1){let i=v();_(0,"div",51)(1,"p",56),h(2),y(3,"translate"),p(),_(4,"ng-select",52,4),S("clear",function(){o(i);let e=r(2);return l(e.BankAccountArr=[])})("focus",function(){o(i);let e=C(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),l(n._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),l(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(5),n=r(2);return l(n.ChangeSearchApi("BankAccounts",e))})("close",function(){o(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(2);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(2);return l(e.SelectValue(e.ModelCash.BankAccountId,"BankAccount"))}),D("ngModelChange",function(e){o(i);let n=r(2);return A(n.ModelCash.BankAccountId,e)||(n.ModelCash.BankAccountId=e),l(e)}),f(6,$e,2,2,"ng-template",53)(7,Le,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),E(x(3,6,"MoneyIn.Bank")),c(2),u("items",i.BankAccountArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.BankAccountId)}}function Ue(s,d){s&1&&(_(0,"th"),h(1,"#"),p())}function Fe(s,d){s&1&&(_(0,"th",46),h(1),y(2,"translate"),p()),s&2&&(c(),g(" ",x(2,1,"Table.Name"),""))}function He(s,d){s&1&&(_(0,"th",46),h(1),y(2,"translate"),p()),s&2&&(c(),g(" ",x(2,1,"MoneyIn.AmountTax")," "))}function Qe(s,d){if(s&1){let i=v();_(0,"td",62)(1,"div",63)(2,"span",64),h(3),p(),_(4,"button",65),S("click",function(){o(i);let e=r(3);return l(e.AppendRow())}),k(5,"i",66),p(),_(6,"button",67),S("click",function(){o(i);let e=r().index,n=r(2);return l(n.RemoveRow(e))}),k(7,"i",68),p()()()}if(s&2){let i=r().index,t=r(2);I("title",i+1),c(3),E(i+1),c(3),u("disabled",t.ModelCash.ModelCashDetails.length==1)}}function qe(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ze(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Ye(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,5),S("clear",function(){o(i);let e=r().$implicit;return l(e.AccTrees=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("AllAccTree",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),l(e)}),f(4,qe,2,2,"ng-template",53)(5,ze,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function Je(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Clients.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ke(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Xe(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,6),S("clear",function(){o(i);let e=r().$implicit;return l(e.Clients=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Clients",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.ClientId,"Client",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.ClientId,e)||(n.ClientId=e),l(e)}),f(4,Je,2,2,"ng-template",53)(5,Ke,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Clients)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.ClientId)}}function Ze(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.BankAccounts.length," of ",t._SharedObjectModelService.TotalItems,"")}}function et(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function tt(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,7),S("clear",function(){o(i);let e=r().$implicit;return l(e.BankAccounts=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("BankAccounts",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.BankAccountId,"BankAccount",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.BankAccountId,e)||(n.BankAccountId=e),l(e)}),f(4,Ze,2,2,"ng-template",53)(5,et,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.BankAccounts)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BankAccountId)}}function it(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Treasurys.length," of ",t._SharedObjectModelService.TotalItems,"")}}function nt(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function rt(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,8),S("clear",function(){o(i);let e=r().$implicit;return l(e.Treasurys=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Treasury",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.TreasuryId,"Treasury",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.TreasuryId,e)||(n.TreasuryId=e),l(e)}),f(4,it,2,2,"ng-template",53)(5,nt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Treasurys)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.TreasuryId)}}function at(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Branches.length," of ",t._SharedObjectModelService.TotalItems,"")}}function st(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function ot(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,9),S("clear",function(){o(i);let e=r().$implicit;return l(e.Branches=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Branch",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.BranchClientId,"BranchClient",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.BranchClientId,e)||(n.BranchClientId=e),l(e)}),f(4,at,2,2,"ng-template",53)(5,st,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Branches)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BranchClientId)}}function lt(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Suppliers.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ct(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function _t(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,10),S("clear",function(){o(i);let e=r().$implicit;return l(e.Suppliers=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Suppliers",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.SupplierId,"Supplier",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.SupplierId,e)||(n.SupplierId=e),l(e)}),f(4,lt,2,2,"ng-template",53)(5,ct,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Suppliers)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.SupplierId)}}function pt(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Partners.length," of ",t._SharedObjectModelService.TotalItems,"")}}function dt(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function mt(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,11),S("clear",function(){o(i);let e=r().$implicit;return l(e.Partners=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Partners",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.PartnerId,"Partner",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.PartnerId,e)||(n.PartnerId=e),l(e)}),f(4,pt,2,2,"ng-template",53)(5,dt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Partners)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.PartnerId)}}function ht(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Employees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ut(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Ct(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,12),S("clear",function(){o(i);let e=r().$implicit;return l(e.Employees=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("Employee",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.EmployeeId,"Employee",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.EmployeeId,e)||(n.EmployeeId=e),l(e)}),f(4,ht,2,2,"ng-template",53)(5,ut,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.Employees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.EmployeeId)}}function yt(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function xt(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function gt(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,13),S("clear",function(){o(i);let e=r().$implicit;return l(e.AccTrees=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("AccTreeRevenue",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),l(e)}),f(4,yt,2,2,"ng-template",53)(5,xt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function Tt(s,d){if(s&1&&(_(0,"small",55),h(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function It(s,d){if(s&1&&h(0),s&2){let i=d.item;g(" ",i.Name," ")}}function ft(s,d){if(s&1){let i=v();_(0,"td",69),y(1,"translate"),_(2,"ng-select",70,14),S("clear",function(){o(i);let e=r().$implicit;return l(e.AccTrees=[])})("focus",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),l(a._AppModeService.ResetCurrentPage())})("keyup",function(){o(i);let e=C(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),l(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){o(i);let e=C(3),n=r().index,a=r(2);return l(a.ChangeSearchApiDetails("AccTreeExpenses",e,n))})("close",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("open",function(){o(i);let e=r(3);return l(e._AppModeService.ResetCurrentPage())})("change",function(){o(i);let e=r(),n=e.$implicit,a=e.index,m=r(2);return l(m.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){o(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),l(e)}),f(4,Tt,2,2,"ng-template",53)(5,It,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",x(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function St(s,d){s&1&&(_(0,"span",73),h(1," \u0645\u062F\u064A\u0648\u0646 \u0644\u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function Mt(s,d){s&1&&(_(0,"span",73),h(1," \u0645\u062F\u0627\u064A\u0646 \u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function At(s,d){if(s&1&&(_(0,"td",69),y(1,"translate"),_(2,"span",71),h(3),p(),f(4,St,2,0,"span",72)(5,Mt,2,0,"span",72),p()),s&2){let i=r().$implicit,t=r(2);I("title",x(1,4,"TransferStorage.AmountTax")),c(3),g(" ",t.ConvertNumber(i.Name).toFixed(2)," "),c(),u("ngIf",t.ConvertNumber(i.Name)>0),c(),u("ngIf",t.ConvertNumber(i.Name)<0)}}function Dt(s,d){if(s&1){let i=v();_(0,"tr"),f(1,Qe,8,3,"td",57)(2,Ye,6,9,"td",58)(3,Xe,6,9,"td",58)(4,tt,6,9,"td",58)(5,rt,6,9,"td",58)(6,ot,6,9,"td",58)(7,_t,6,9,"td",58)(8,mt,6,9,"td",58)(9,Ct,6,9,"td",58)(10,gt,6,9,"td",58)(11,ft,6,9,"td",58)(12,At,6,6,"td",58),_(13,"td",59),y(14,"translate"),_(15,"input",60),D("ngModelChange",function(e){let n=o(i).$implicit;return A(n.Amount,e)||(n.Amount=e),l(e)}),p()(),_(16,"td",59),y(17,"translate"),_(18,"input",61),D("ngModelChange",function(e){let n=o(i).$implicit;return A(n.Notes,e)||(n.Notes=e),l(e)}),p()()()}if(s&2){let i=d.$implicit,t=d.index,e=r(2);c(),u("ngIf",e.ModelCash.InitGlType!=e.InitGlType.CreditTaxes),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.AccTree),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Client),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Bank),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Treasury),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Branch),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Supplier),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.PartnersDrawingAccounts),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Salaries||e.ModelCash.InitGlType==e.InitGlType.EmployeeCustody),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Revenues),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Expenses),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.CreditTaxes),c(),I("title",x(14,24,"MoneyIn.Price")),c(2),G("name","Amount",t,""),G("id","Amount",t,""),M("ngModel",i.Amount),c(),I("title",x(17,26,"MoneyIn.Notes")),c(2),G("name","Notes",t,""),G("id","Notes",t,""),M("ngModel",i.Notes)}}function vt(s,d){if(s&1){let i=v();k(0,"app-modal-header",16),_(1,"div",17)(2,"div",18)(3,"div",19)(4,"label",20),h(5),y(6,"translate"),p(),k(7,"input",21),p(),_(8,"div",22)(9,"label",23),h(10),y(11,"translate"),p(),_(12,"input",24),D("ngModelChange",function(e){o(i);let n=r();return A(n.ModelCash.Notes,e)||(n.ModelCash.Notes=e),l(e)}),p()(),_(13,"div",25),f(14,ke,3,4,"span",26)(15,be,1,5,"p-calendar",27),p(),_(16,"div",28)(17,"div",29)(18,"label",30),h(19),y(20,"translate"),p(),_(21,"input",31),S("change",function(){o(i);let e=r();return l(e.ChangePaymentType(1))}),D("ngModelChange",function(e){o(i);let n=r();return A(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),l(e)}),p()(),_(22,"div",32)(23,"label",33),h(24),y(25,"translate"),p(),_(26,"input",34),S("change",function(){o(i);let e=r();return l(e.ChangePaymentType(2))}),D("ngModelChange",function(e){o(i);let n=r();return A(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),l(e)}),p()()(),_(27,"div",35),f(28,We,8,8,"div",36)(29,je,8,8,"div",37),p(),_(30,"div",38)(31,"label",39),h(32),y(33,"translate"),p(),_(34,"select",40),S("change",function(){o(i);let e=r();return l(e.ChangeType())}),D("ngModelChange",function(e){o(i);let n=r();return A(n.ModelCash.InitGlType,e)||(n.ModelCash.InitGlType=e),l(e)}),_(35,"option",41),h(36),y(37,"translate"),p(),_(38,"option",41),h(39),y(40,"translate"),p(),_(41,"option",41),h(42),y(43,"translate"),p(),_(44,"option",41),h(45),y(46,"translate"),p(),_(47,"option",41),h(48),y(49,"translate"),p(),_(50,"option",41),h(51),y(52,"translate"),p(),_(53,"option",41),h(54),y(55,"translate"),p(),_(56,"option",41),h(57),y(58,"translate"),p(),_(59,"option",41),h(60),y(61,"translate"),p(),_(62,"option",41),h(63),y(64,"translate"),p(),_(65,"option",41),h(66),y(67,"translate"),p(),_(68,"option",41),h(69),y(70,"translate"),p()()()(),_(71,"div",42)(72,"table",43)(73,"thead")(74,"tr"),f(75,Ue,2,0,"th",44)(76,Fe,3,3,"th",45)(77,He,3,3,"th",45),_(78,"th",46),h(79),y(80,"translate"),p(),_(81,"th",46),h(82),y(83,"translate"),p()()(),_(84,"tbody"),f(85,Dt,19,28,"tr",47),p()()()(),_(86,"app-modal-footer",48),S("SaveEvent",function(){o(i);let e=r();return l(e.Save())})("UpdateEvent",function(){o(i);let e=r();return l(e.Save())})("OpenGlEvent",function(){o(i);let e=r();return l(e.OpenGl())})("CloseEvent",function(){let e=o(i).$implicit,n=r();return e.close("Close click"),l(n.ResetPage())}),p()}if(s&2){let i=r();u("PageTitle",i.PageTitle),c(5),E(x(6,53,"Table.DocNo")),c(2),u("value",i.ModelCash.DocNo)("disabled",!0),c(3),E(x(11,55,"Table.Notes")),c(2),M("ngModel",i.ModelCash.Notes),c(2),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),c(),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),c(4),g(" ",x(20,57,"MoneyIn.Treasury")," "),c(2),M("ngModel",i.ModelCash.TreasuryCashType),u("checked",i.ModelCash.TreasuryCashType==1)("value",1),c(3),g(" ",x(25,59,"MoneyIn.Bank")," "),c(2),u("checked",i.ModelCash.TreasuryCashType==2)("value",2),M("ngModel",i.ModelCash.TreasuryCashType),c(2),u("ngIf",i.ModelCash.TreasuryCashType==1),c(),u("ngIf",i.ModelCash.TreasuryCashType==2),c(3),E(x(33,61,"MoneyIn.Type")),c(2),M("ngModel",i.ModelCash.InitGlType),c(),I("value",i.InitGlType.AccTree),c(),g(" ",x(37,63,"MoneyIn.AccTree")," "),c(2),I("value",i.InitGlType.Client),c(),g(" ",x(40,65,"MoneyIn.Clients")," "),c(2),I("value",i.InitGlType.Bank),c(),g(" ",x(43,67,"MoneyIn.Bank")," "),c(2),I("value",i.InitGlType.Treasury),c(),g(" ",x(46,69,"MoneyIn.Treasury")," "),c(2),I("value",i.InitGlType.Supplier),c(),g(" ",x(49,71,"MoneyIn.Suppliers")," "),c(2),I("value",i.InitGlType.Branch),c(),g(" ",x(52,73,"InitGlRecept.Branches")," "),c(2),I("value",i.InitGlType.Salaries),c(),g(" ",x(55,75,"InitGlRecept.Salaries")," "),c(2),I("value",i.InitGlType.EmployeeCustody),c(),g(" ",x(58,77,"InitGlRecept.EmployeeCustody")," "),c(2),I("value",i.InitGlType.PartnersDrawingAccounts),c(),g(" ",x(61,79,"InitGlRecept.PartnersDrawingAccounts")," "),c(2),I("value",i.InitGlType.Revenues),c(),g(" ",x(64,81,"MoneyIn.Revenues")," "),c(2),I("value",i.InitGlType.Expenses),c(),g(" ",x(67,83,"MoneyIn.ProofOfExpenses")," "),c(2),I("value",i.InitGlType.CreditTaxes),c(),g(" ",x(70,85,"MoneyIn.CreditTaxes")," "),c(6),u("ngIf",i.ModelCash.InitGlType!=i.InitGlType.CreditTaxes),c(),u("ngIf",i.ModelCash.InitGlType!=i.InitGlType.CreditTaxes),c(),u("ngIf",i.ModelCash.InitGlType==i.InitGlType.CreditTaxes),c(2),g(" ",x(80,87,"MoneyIn.Price")," "),c(3),g(" ",x(83,89,"MoneyIn.Notes")," "),c(3),u("ngForOf",i.ModelCash.ModelCashDetails)("ngForTrackBy",i.trackByMethod),c(),u("Id",i.ModelCash.Id)("Gl",!0)}}var Xt=(()=>{let d=class d{constructor(t,e,n,a,m){this._ActivatedRoute=t,this._SharedObjectModelService=e,this._DefaultSettingsService=n,this._AppModeService=a,this._Apiservice=m,this.SignalR=!1,this.TablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this.InitGlType={None:0,AccTree:1,Client:2,Bank:3,Treasury:4,Supplier:5,Item:6,Branch:7,Salaries:8,EmployeeCustody:9,PartnersDrawingAccounts:10,Revenues:11,Expenses:12,CreditTaxes:13},this.TokenBranch=0,this.TreasuryArr=[],this.BankAccountArr=[]}ngOnInit(){let t=this._Apiservice.UserIdFromCookies();this.TokenBranch=Number(t.BranchId);let e=Number(this._ActivatedRoute.snapshot.queryParams.Id);e>0&&this.GetByIdRoute(e),this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this.GLComponent.Gl=e.Obj.Gl,this.Drow(e.Obj.model),this._AppModeService._NgbModal.open(this.ContentModel,{size:"xl",backdrop:"static"})):this._AppModeService._Toastr.error(e.Message)}})}ConvertNumber(t){return Number(t)}GetPageInfo(){this._AppModeService.DisabledButton=!0,this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:t=>{t.IsSuccess==!0&&t.Obj!=null?(this.ModelCash.DocNo=t.Obj,this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(t.Message))},error:t=>{this._AppModeService.DisabledButton=!1}})}OpenModal(){this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ShowToEdite(t){this.GLComponent.Gl=t.Gl,this.Drow(t.PageModel)}Drow(t){t.TreasuryId>0&&(t.PaymentType=1,t.PaymentType=1,this.TreasuryArr=[],this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName,Code:""}]),t.BankAccountId>0&&(t.PaymentType=2,this.BankAccountArr=[],this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]);let e=t[`${this.ScreenName}Details`];this.ModelCash={Id:t.Id,DocNo:t.DocNo,DocDate:new Date(`${t.DocDate}`),Notes:t.Notes,Code:t.Code,TotalAmount:t.TotalAmount,InitGlType:t.InitGlType,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,TreasuryCashType:t.TreasuryCashType,ModelCashDetails:e};for(let n=0;n<this.ModelCash.ModelCashDetails.length;n++){let a=this.ModelCash.ModelCashDetails[n];a.AccTreeId>0&&(a.AccTrees=[{Id:a.AccTreeId,Name:a.AccTreeName}]),a.ClientId>0&&(a.Clients=[{Id:a.ClientId,Name:a.ClientName}]),a.BankAccountId>0&&(a.BankAccounts=[{Id:a.BankAccountId,Name:a.BankAccountName}]),a.TreasuryId>0&&(a.Treasurys=[{Id:a.TreasuryId,Name:a.TreasuryName}]),a.SupplierId>0&&(a.Suppliers=[{Id:a.SupplierId,Name:a.SupplierName}]),a.BranchClientId>0&&(a.Branches=[{Id:a.BranchClientId,Name:a.BranchClientName}]),a.EmployeeId>0&&(a.Employees=[{Id:a.EmployeeId,Name:a.EmployeeName}]),a.PartnerId>0&&(a.Partners=[{Id:a.PartnerId,Name:a.PartnerName}])}this._AppModeService.DisabledButton=!1}AppendRow(){let t={Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]};return this.ModelCash.ModelCashDetails.push(t),this.TotalMoneyIn(),!0}RemoveRow(t){return this.ModelCash.ModelCashDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorFirstRow")),!1):(this.ModelCash.ModelCashDetails.splice(t,1),this.TotalMoneyIn(),!0)}TotalMoneyIn(){let t=0;for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++)t+=Number(this.ModelCash.ModelCashDetails[e].Amount);return Number(t.toFixed(2))}ChangeType(){this.ModelCash.ModelCashDetails=[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,BranchClientId:null,BranchClientName:"",Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}],Number(this.ModelCash.InitGlType)==this.InitGlType.CreditTaxes&&this._Apiservice.get("AccTreeEP/NetCreditTaxes",!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.ModelCash.ModelCashDetails[0].Name=`${e.Obj}`:this._AppModeService._Toastr.error(e.Message)}})}ChangePaymentType(t){this.ModelCash.BankAccountId=null,this.ModelCash.BankAccountName="",this.ModelCash.TreasuryId=null,this.ModelCash.TreasuryName=""}ChangeSearchApi(t,e){let n=`${e.searchTerm}`.trim();(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let a={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Treasury"&&(a.BranchFilter=!0),this._Apiservice.post("Global/GetAll",a,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:m=>{m.IsSuccess==!0&&m.Obj!=null?this.HandleResponse(m.Obj,t):this._AppModeService._Toastr.error(m.Message)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id"))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr);let a=n.find(m=>m.Id==t);if(a==null){this._AppModeService.DontPlay();return}else this.ModelCash[`${e}Id`]=t,this.ModelCash[`${e}Name`]=a.Name}else this.ModelCash[`${e}Id`]=null,this.ModelCash[`${e}Name`]=""}ChangeSearchApiDetails(t,e,n){let a=`${e.searchTerm}`.trim();(a==""||a=="null")&&(e.searchTerm="",a=""),this._AppModeService.CurrentPage+=1;let m={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:a,SearchField:"Name"};if((t=="AllAccTree"||t=="AccTreeRevenue"||t=="AccTreeExpenses")&&(m.TableName="AccTree",m.BranchFilter=!0,m.Conditions="AccClass >= 3"),t=="AccTreeRevenue"&&(m.Conditions="AccClass >= 3 And Level = 4"),t=="AccTreeExpenses"&&(m.Conditions="AccClass >= 3 And Level = 5"),(t=="Treasury"||t=="Partners")&&(m.BranchFilter=!0),t=="Branch"&&(m.Conditions=`Id != ${this.TokenBranch}`),t=="SaleInvoices"){let R=this.ModelCash.ModelCashDetails[n].ClientId;m.Conditions=`ClientId = ${R} And PaymentType = 2`,m.Columns=["Id","DocNo","Debt","InvoiceCollected","InvoiceCollection"],m.SearchField="",m.SearchText=""}this._Apiservice.post("Global/GetAll",m,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:R=>{R.IsSuccess==!0&&R.Obj!=null?this.HandleResponseDetails(R.Obj,t,n):this._AppModeService._Toastr.error(R.Message)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,(e=="AllAccTree"||e=="AccTreeRevenue"||e=="AccTreeExpenses")&&(this.ModelCash.ModelCashDetails[n].AccTrees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].AccTrees.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ModelCash.ModelCashDetails[n].Clients=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Clients.concat(t.DataReturn),"Id")),e=="SaleInvoices"&&(this.ModelCash.ModelCashDetails[n].SaleInvoices=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].SaleInvoices.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.ModelCash.ModelCashDetails[n].BankAccounts=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].BankAccounts.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.ModelCash.ModelCashDetails[n].Treasurys=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Treasurys.concat(t.DataReturn),"Id")),e=="Suppliers"&&(this.ModelCash.ModelCashDetails[n].Suppliers=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Suppliers.concat(t.DataReturn),"Id")),e=="Branch"&&(this.ModelCash.ModelCashDetails[n].Branches=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Branches.concat(t.DataReturn),"Id")),e=="Employee"&&(this.ModelCash.ModelCashDetails[n].Employees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Employees.concat(t.DataReturn),"Id")),e=="Partners"&&(this.ModelCash.ModelCashDetails[n].Partners=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Partners.concat(t.DataReturn),"Id"))}SelectValueDetails(t,e,n){if(t!=null&&t>0){let a=[];e=="AccTree"&&(a=this.ModelCash.ModelCashDetails[n].AccTrees),e=="Client"&&(a=this.ModelCash.ModelCashDetails[n].Clients),e=="BankAccount"&&(a=this.ModelCash.ModelCashDetails[n].BankAccounts),e=="Treasury"&&(a=this.ModelCash.ModelCashDetails[n].Treasurys),e=="Supplier"&&(a=this.ModelCash.ModelCashDetails[n].Suppliers),e=="BranchClient"&&(a=this.ModelCash.ModelCashDetails[n].Branches),e=="Employee"&&(a=this.ModelCash.ModelCashDetails[n].Employees),e=="Partner"&&(a=this.ModelCash.ModelCashDetails[n].Partners);let m=a.find(R=>R.Id==t);if(m!=null)this.ModelCash.ModelCashDetails[n][`${e}Id`]=m.Id,this.ModelCash.ModelCashDetails[n][`${e}Name`]=m.Name;else{this._Apiservice.DontPlay();return}}else this.ModelCash.ModelCashDetails[n][`${e}Id`]=null,this.ModelCash.ModelCashDetails[n][`${e}Name`]=[]}Save(){if(this.ModelCash.DocDate==""||this.ModelCash.DocDate==null){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleOffer.Error.EnterDate"));return}if(this.ModelCash.InitGlType<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ChooseType"));return}if(this.ModelCash.TreasuryCashType==1&&(this.ModelCash.TreasuryId==0||this.ModelCash.TreasuryId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterTreasury"));return}if(this.ModelCash.TreasuryCashType==2&&(this.ModelCash.BankAccountId==0||this.ModelCash.BankAccountId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterBank"));return}for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++){let n=e,a=Number(this.ModelCash.ModelCashDetails[e].AccTreeId),m=Number(this.ModelCash.ModelCashDetails[e].ClientId),R=Number(this.ModelCash.ModelCashDetails[e].BankAccountId),O=Number(this.ModelCash.ModelCashDetails[e].TreasuryId),b=Number(this.ModelCash.ModelCashDetails[e].SupplierId),W=Number(this.ModelCash.ModelCashDetails[e].SaleInvoiceId),$=Number(this.ModelCash.ModelCashDetails[e].BuyInvoiceId),H=Number(this.ModelCash.ModelCashDetails[e].BranchClientId),P=Number(this.ModelCash.ModelCashDetails[e].EmployeeId),Q=Number(this.ModelCash.ModelCashDetails[e].PartnerId),L=Number(this.ModelCash.ModelCashDetails[e].Amount);if((this.ModelCash.InitGlType==this.InitGlType.AccTree||this.ModelCash.InitGlType==this.InitGlType.Revenues||this.ModelCash.InitGlType==this.InitGlType.Expenses)&&(a==0||isNaN(a))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAccTree"));return}if((this.ModelCash.InitGlType==this.InitGlType.AccTree||this.ModelCash.InitGlType==this.InitGlType.Revenues||this.ModelCash.InitGlType==this.InitGlType.Expenses)&&a>0&&this.ModelCash.ModelCashDetails.filter(T=>T.AccTreeId==a).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&(m==0||isNaN(m))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterClient"));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&m>0&&W>0&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==m&&T.SaleInvoiceId==W).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==m).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&(R==0||isNaN(R))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterBankAccount"));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&R>0&&this.ModelCash.ModelCashDetails.filter(T=>T.BankAccountId==R).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&(O==0||isNaN(O))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterTreasury"));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&O>0&&this.ModelCash.ModelCashDetails.filter(T=>T.TreasuryId==O).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&(b==0||isNaN(b))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterSupplier"));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==b).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&b>0&&$>0&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==b&&T.BuyInvoiceId==$).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&W>0){let w=this.ModelCash.ModelCashDetails[e].SaleInvoices.find(T=>T.DocNo==W);if(w!=null){let T=w.Debt-w.InvoiceCollection;if(L>T){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&$>0){let w=this.ModelCash.ModelCashDetails[e].BuyInvoices.find(T=>T.DocNo==$);if(w!=null&&L>w.InvoiceCollection){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&(H==0||isNaN(H))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseBranch"));return}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&this.ModelCash.ModelCashDetails.filter(T=>T.BranchClientId==H).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&(P==0||isNaN(P))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==P).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&(P==0||isNaN(P))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==P).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&(Q==0||isNaN(Q))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Partners.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&this.ModelCash.ModelCashDetails.filter(T=>T.PartnerId==Q).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(L<=0||isNaN(L)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAmount"));return}}let t={Id:this.ModelCash.Id,DocNo:this.ModelCash.DocNo,DocDate:this._Apiservice.ConvertISODate(this.ModelCash.DocDate),Notes:this.ModelCash.Notes,Code:this.ModelCash.Code,TotalAmount:this.ModelCash.TotalAmount,InitGlType:Number(this.ModelCash.InitGlType),BankAccountId:this.ModelCash.BankAccountId,BankAccountName:this.ModelCash.BankAccountName,TreasuryId:this.ModelCash.TreasuryId,TreasuryName:this.ModelCash.TreasuryName,TreasuryCashType:this.ModelCash.TreasuryCashType,ModelCashDetails:this.ModelCash.ModelCashDetails};t[`${this.ScreenName}Details`]=t.ModelCashDetails,t.Id==0&&this._Apiservice.post(`${this.AddUrl}`,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo(),this.DynamicComponent.Paging.DataReturn.push(e.Obj)):this._AppModeService._Toastr.error(e.Message)}}),t.Id>0&&this._Apiservice.put(`${this.UpdateUrl}`,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{if(e.IsSuccess==!0&&e.Obj!=null){this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.UpdateSuccess"));let n=e.Obj,a=this.DynamicComponent.Paging.DataReturn.find(m=>m.Id==n.Id);a!=null&&Object.assign(a,n),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(e.Message)}})}ResetPage(){this._AppModeService.DisabledButton=!1,this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this._DefaultSettingsService.ResetDate(this.ModelCash),this.HandleMyDefaultSettings()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.TreasuryArr=[],this.BankAccountArr=[],this.ModelCash.Id==0&&(this.ScreenName=="TreasuryIn"&&(t.MoneyInType>0&&(this.ModelCash.TreasuryCashType=t.MoneyInType),t.MoneyInInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyInInitGlType),t.MoneyInBankId>0&&(this.ModelCash.BankAccountId=t.MoneyInBankId,this.BankAccountArr.push({Id:t.MoneyInBankId,Name:t.MoneyInBankName})),t.MoneyInTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyInTreasuryId,this.TreasuryArr.push({Id:t.MoneyInTreasuryId,Name:t.MoneyInTreasuryName}))),this.ScreenName=="TreasuryOut"&&(t.MoneyOutType>0&&(this.ModelCash.TreasuryCashType=t.MoneyOutType),t.MoneyOutInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyOutInitGlType),t.MoneyOutBankId>0&&(this.ModelCash.BankAccountId=t.MoneyOutBankId,this.BankAccountArr.push({Id:t.MoneyOutBankId,Name:t.MoneyOutBankName})),t.MoneyOutTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyOutTreasuryId,this.TreasuryArr.push({Id:t.MoneyOutTreasuryId,Name:t.MoneyOutTreasuryName}))))}trackByMethod(t,e){return e.Id}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}StartConnection(){this.Hub_Connection=new Be().withUrl(`${te.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:Ve.WebSockets,accessTokenFactory:()=>this._Apiservice.getToken()}).configureLogging(Re.Error).build(),this.Hub_Connection.start().then(()=>{console.log("Hub Connection Success")}).catch(t=>{console.log(t)})}ServerListener(){this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.ModelCash.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.ModelCash.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this.DynamicComponent.Paging.DataReturn=this.DynamicComponent.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}};d.\u0275fac=function(e){return new(e||d)(N(ee),N(Ae),N(we),N(he),N(ie))},d.\u0275cmp=q({type:d,selectors:[["app-dynamic-cash-receipt"]],viewQuery:function(e,n){if(e&1&&(j(Ee,5),j(Pe,5),j(Ne,5)),e&2){let a;U(a=F())&&(n.ContentModel=a.first),U(a=F())&&(n.GLComponent=a.first),U(a=F())&&(n.DynamicComponent=a.first)}},inputs:{SignalR:"SignalR",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[z],decls:6,vars:8,consts:[["dynamiccomponent",""],["content",""],["GLComponent",""],["SelectTreasury1",""],["SelectBankAccounts1",""],["SelectAccTreeDetails",""],["SelectClientDetails",""],["SelectBankAccountsDetails",""],["SelectTreasurysDetails",""],["SelectBranchesDetails",""],["SelectSuppliersDetails",""],["SelectPartnersDetails",""],["SelectEmployeesDetails",""],["SelectAccTreeRevenuesDetails",""],["SelectAccTreeExpensesDetails",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","DeleteUrl","PrintUrl","OutModal"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0"],[1,"d-flex","flex-wrap","align-items-end","col-12","px-2"],[1,"col-12","col-sm-6","col-lg-2","col-xl-1","p-1"],["for","DocNo"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-sm-6","col-lg-3","col-xl-2","p-1"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],[1,"col-12","col-sm-6","col-xl-3","p-1"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class"," shadow-none text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],[1,"col-12","col-sm-6","col-md-5","col-xl-3","px-1","d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["for","Payment1",1,"p-0"],["type","radio","name","Payment","id","Payment1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],[1,"d-flex","align-items-center","mx-auto"],["for","Payment2",1,"p-0"],["type","radio","name","Payment","id","Payment2",1,"form-check-input","mx-2",3,"change","ngModelChange","checked","value","ngModel"],[1,"col-12","col-sm-6","col-xl-3"],["class","col-12  ",4,"ngIf"],["class","col-12   ",4,"ngIf"],[1,"col-12","px-1"],["for","Type"],["name","Type","id","Type",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[1,"DivPaging","table-responsive-vertical","shadow-z-1"],[1,"table","table-hover","table-striped","table-light","mt-3"],[4,"ngIf"],["class","col-3",4,"ngIf"],[1,"col-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"SaveEvent","UpdateEvent","OpenGlEvent","CloseEvent","Id","Gl"],[1,"d-block","text-center"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"col-12"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"form-text","text-muted"],["for","PaymentTypeBankAccountId"],["class","Flex1",3,"title",4,"ngIf"],["class","ngSelect",3,"title",4,"ngIf"],[3,"title"],["type","number","appNumericInput","",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],["type","text",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],[1,"Flex1",3,"title"],[1,"d-flex","justify-content-center","align-items-center","col-11","col-md-12"],[1,"d-none","d-lg-inline"],[1,"btn-Add","btn",3,"click"],[1,"mx-1","fw-bold","pi","pi-plus"],[1,"btn-Delete","btn-Page","btn",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold"],[1,"ngSelect",3,"title"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center","col-10","col-lg-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","dropdownPosition","virtualScroll","searchable","ngModel"],[1,"text-dark","d-block","text-center"],["class","text-dark",4,"ngIf"],[1,"text-dark"]],template:function(e,n){if(e&1){let a=v();_(0,"app-dynamic-component",15,0),S("OpenModalEvent",function(){return o(a),l(n.OpenModal())})("ShowToEditeEvent",function(R){return o(a),l(n.ShowToEdite(R))}),p(),f(2,vt,87,91,"ng-template",null,1,J),k(4,"app-glsheard",null,2)}if(e&2){let a=C(3);u("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!1)("GlResponse",!0)("GetById",n.GetById)("DeleteUrl",n.DeleteUrl)("PrintUrl",n.PrintUrl)("OutModal",a)}},dependencies:[Z,Te,ge,xe,ye,ue,Ce,me,pe,de,ae,le,_e,ce,se,oe,K,X,Ie,re,ne,De,ve,fe,Se,Me],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important}"]});let s=d;return s})();export{Xt as a};
