import{a as we,b as Re,c as Ve}from"./chunk-BZPR73YG.js";import{a as Be}from"./chunk-D7RC4W4V.js";import{a as Pe}from"./chunk-R22ILC4E.js";import{a as fe,b as Ae,j as ve}from"./chunk-JSAFLJSP.js";import{a as De}from"./chunk-VSYXDL23.js";import{a as Me}from"./chunk-6KCN6SOZ.js";import{a as Ie,b as Se}from"./chunk-OFCF557E.js";import{a as ye,b as xe,c as ge,d as Te}from"./chunk-ZWNSIIKM.js";import{c as ae,d as se,g as Ce}from"./chunk-JS2GAZTB.js";import{H as ne,I as re,_ as le,aa as oe,b as X,c as Z,d as ee,da as ce,fa as _e,ga as pe,ha as de,i as te,ia as me,ja as he,na as ue,z as ie}from"./chunk-WSHLQXZC.js";import{$b as M,Cb as _,Db as p,Eb as E,Ib as v,Mb as f,Nb as r,Qb as I,Rb as G,Tb as F,Ub as H,Vb as Q,Wb as x,X as B,Xb as m,Yb as P,Zb as g,_b as V,ac as A,bc as D,db as c,dc as z,eb as N,gc as Y,na as q,nc as C,oc as y,pc as J,qc as K,vb as S,xa as l,xb as u,ya as o}from"./chunk-J5UB44FZ.js";var Ee=["content"],be=["GLComponent"],Ne=(s,d)=>({"btn-success":s,"btn-primary":d});function ke(s,d){if(s&1&&(_(0,"span",49),m(1),C(2,"date"),p()),s&2){let i=r(2);c(),g(" ",J(2,1,i.ModelCash.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function Ge(s,d){if(s&1){let i=v();_(0,"p-calendar",50),D("ngModelChange",function(e){l(i);let n=r(2);return A(n.ModelCash.DocDate,e)||(n.ModelCash.DocDate=e),o(e)}),p()}if(s&2){let i=r(2);M("ngModel",i.ModelCash.DocDate),u("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function Oe(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function We(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function je(s,d){if(s&1){let i=v();_(0,"div",51)(1,"p"),m(2),C(3,"translate"),p(),_(4,"ng-select",52,2),f("clear",function(){l(i);let e=r(2);return o(e.TreasuryArr=[])})("focus",function(){l(i);let e=x(5),n=r(2);return n.ChangeSearchApi("Treasury",e),o(n._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(5),n=r(2);return n.ChangeSearchApi("Treasury",e),o(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(5),n=r(2);return o(n.ChangeSearchApi("Treasury",e))})("close",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(2);return o(e.SelectValue(e.ModelCash.TreasuryId,"Treasury"))}),D("ngModelChange",function(e){l(i);let n=r(2);return A(n.ModelCash.TreasuryId,e)||(n.ModelCash.TreasuryId=e),o(e)}),S(6,Oe,2,2,"ng-template",53)(7,We,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),P(y(3,6,"MoneyIn.Treasury")),c(2),u("items",i.TreasuryArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.TreasuryId)}}function $e(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Le(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Ue(s,d){if(s&1){let i=v();_(0,"div",51)(1,"p",56),m(2),C(3,"translate"),p(),_(4,"ng-select",52,3),f("clear",function(){l(i);let e=r(2);return o(e.BankAccountArr=[])})("focus",function(){l(i);let e=x(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),o(n._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),o(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(5),n=r(2);return o(n.ChangeSearchApi("BankAccounts",e))})("close",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(2);return o(e.SelectValue(e.ModelCash.BankAccountId,"BankAccount"))}),D("ngModelChange",function(e){l(i);let n=r(2);return A(n.ModelCash.BankAccountId,e)||(n.ModelCash.BankAccountId=e),o(e)}),S(6,$e,2,2,"ng-template",53)(7,Le,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),P(y(3,6,"MoneyIn.Bank")),c(2),u("items",i.BankAccountArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.BankAccountId)}}function Fe(s,d){s&1&&(_(0,"th"),m(1,"#"),p())}function He(s,d){s&1&&(_(0,"th",42),m(1),C(2,"translate"),p()),s&2&&(c(),g(" ",y(2,1,"Table.Name"),""))}function Qe(s,d){s&1&&(_(0,"th",42),m(1),C(2,"translate"),p()),s&2&&(c(),g(" ",y(2,1,"MoneyIn.AmountTax")," "))}function qe(s,d){if(s&1){let i=v();_(0,"td",62)(1,"div",63)(2,"button",64),f("click",function(){l(i);let e=r(3);return o(e.AppendRow())}),E(3,"i",65),p(),_(4,"span",66),m(5),p(),_(6,"button",67),f("click",function(){l(i);let e=r().index,n=r(2);return o(n.RemoveRow(e))}),E(7,"i",68),p()()()}if(s&2){let i=r().index,t=r(2);I("title",i+1),c(5),P(i+1),c(),u("disabled",t.ModelCash.ModelCashDetails.length==1)}}function ze(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ye(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Je(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,4),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AllAccTree",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),S(4,ze,2,2,"ng-template",53)(5,Ye,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function Ke(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Clients.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Xe(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Ze(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,5),f("clear",function(){l(i);let e=r().$implicit;return o(e.Clients=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Clients",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.ClientId,"Client",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.ClientId,e)||(n.ClientId=e),o(e)}),S(4,Ke,2,2,"ng-template",53)(5,Xe,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Clients)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.ClientId)}}function et(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.BankAccounts.length," of ",t._SharedObjectModelService.TotalItems,"")}}function tt(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function it(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,6),f("clear",function(){l(i);let e=r().$implicit;return o(e.BankAccounts=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("BankAccounts",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.BankAccountId,"BankAccount",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.BankAccountId,e)||(n.BankAccountId=e),o(e)}),S(4,et,2,2,"ng-template",53)(5,tt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.BankAccounts)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BankAccountId)}}function nt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Treasurys.length," of ",t._SharedObjectModelService.TotalItems,"")}}function rt(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function at(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,7),f("clear",function(){l(i);let e=r().$implicit;return o(e.Treasurys=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Treasury",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.TreasuryId,"Treasury",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.TreasuryId,e)||(n.TreasuryId=e),o(e)}),S(4,nt,2,2,"ng-template",53)(5,rt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Treasurys)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.TreasuryId)}}function st(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Branches.length," of ",t._SharedObjectModelService.TotalItems,"")}}function lt(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function ot(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,8),f("clear",function(){l(i);let e=r().$implicit;return o(e.Branches=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Branch",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.BranchClientId,"BranchClient",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.BranchClientId,e)||(n.BranchClientId=e),o(e)}),S(4,st,2,2,"ng-template",53)(5,lt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Branches)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BranchClientId)}}function ct(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Suppliers.length," of ",t._SharedObjectModelService.TotalItems,"")}}function _t(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function pt(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,9),f("clear",function(){l(i);let e=r().$implicit;return o(e.Suppliers=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Suppliers",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.SupplierId,"Supplier",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.SupplierId,e)||(n.SupplierId=e),o(e)}),S(4,ct,2,2,"ng-template",53)(5,_t,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Suppliers)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.SupplierId)}}function dt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Partners.length," of ",t._SharedObjectModelService.TotalItems,"")}}function mt(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function ht(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,10),f("clear",function(){l(i);let e=r().$implicit;return o(e.Partners=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Partners",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.PartnerId,"Partner",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.PartnerId,e)||(n.PartnerId=e),o(e)}),S(4,dt,2,2,"ng-template",53)(5,mt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Partners)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.PartnerId)}}function ut(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Employees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ct(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function yt(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,11),f("clear",function(){l(i);let e=r().$implicit;return o(e.Employees=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Employee",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.EmployeeId,"Employee",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.EmployeeId,e)||(n.EmployeeId=e),o(e)}),S(4,ut,2,2,"ng-template",53)(5,Ct,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.Employees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.EmployeeId)}}function xt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function gt(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function Tt(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,12),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AccTreeRevenue",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),S(4,xt,2,2,"ng-template",53)(5,gt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function It(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function St(s,d){if(s&1&&m(0),s&2){let i=d.item;g(" ",i.Name," ")}}function ft(s,d){if(s&1){let i=v();_(0,"td",69),C(1,"translate"),_(2,"ng-select",70,13),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=x(3),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=x(3),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AccTreeExpenses",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,h=r(2);return o(h.SelectValueDetails(n.AccTreeId,"AccTree",a))}),D("ngModelChange",function(e){l(i);let n=r().$implicit;return A(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),S(4,It,2,2,"ng-template",53)(5,St,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);I("title",y(1,7,"TransferStorage.Name")),c(2),u("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function Mt(s,d){s&1&&(_(0,"span",73),m(1," \u0645\u062F\u064A\u0648\u0646 \u0644\u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function At(s,d){s&1&&(_(0,"span",73),m(1," \u0645\u062F\u0627\u064A\u0646 \u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function Dt(s,d){if(s&1&&(_(0,"td",69),C(1,"translate"),_(2,"span",71),m(3),p(),S(4,Mt,2,0,"span",72)(5,At,2,0,"span",72),p()),s&2){let i=r().$implicit,t=r(2);I("title",y(1,4,"TransferStorage.AmountTax")),c(3),g(" ",t.ConvertNumber(i.Name).toFixed(2)," "),c(),u("ngIf",t.ConvertNumber(i.Name)>0),c(),u("ngIf",t.ConvertNumber(i.Name)<0)}}function vt(s,d){if(s&1){let i=v();_(0,"tr"),S(1,qe,8,3,"td",57)(2,Je,6,9,"td",58)(3,Ze,6,9,"td",58)(4,it,6,9,"td",58)(5,at,6,9,"td",58)(6,ot,6,9,"td",58)(7,pt,6,9,"td",58)(8,ht,6,9,"td",58)(9,yt,6,9,"td",58)(10,Tt,6,9,"td",58)(11,ft,6,9,"td",58)(12,Dt,6,6,"td",58),_(13,"td",59),C(14,"translate"),_(15,"input",60),D("ngModelChange",function(e){let n=l(i).$implicit;return A(n.Amount,e)||(n.Amount=e),o(e)}),p()(),_(16,"td",59),C(17,"translate"),_(18,"input",61),D("ngModelChange",function(e){let n=l(i).$implicit;return A(n.Notes,e)||(n.Notes=e),o(e)}),p()()()}if(s&2){let i=d.$implicit,t=d.index,e=r(2);c(),u("ngIf",e.ModelCash.InitGlType!=e.InitGlType.CreditTaxes),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.AccTree),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Client),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Bank),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Treasury),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Branch),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Supplier),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.PartnersDrawingAccounts),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Salaries||e.ModelCash.InitGlType==e.InitGlType.EmployeeCustody),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Revenues),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.Expenses),c(),u("ngIf",e.ModelCash.InitGlType==e.InitGlType.CreditTaxes),c(),I("title",y(14,24,"MoneyIn.Price")),c(2),G("name","Amount",t,""),G("id","Amount",t,""),M("ngModel",i.Amount),c(),I("title",y(17,26,"MoneyIn.Notes")),c(2),G("name","Notes",t,""),G("id","Notes",t,""),M("ngModel",i.Notes)}}function wt(s,d){s&1&&(_(0,"span"),m(1),C(2,"translate"),p()),s&2&&(c(),g(" ",y(2,1,"Model.Save"),""))}function Rt(s,d){s&1&&(_(0,"span"),m(1),C(2,"translate"),p()),s&2&&(c(),g(" ",y(2,1,"Model.Update"),""))}function Vt(s,d){if(s&1){let i=v();_(0,"button",74),f("click",function(){l(i);let e=r(2);return o(e.OpenGl())}),m(1),C(2,"translate"),p()}s&2&&(c(),g(" ",y(2,1,"Model.Gl"),`
`))}function Bt(s,d){if(s&1){let i=v();E(0,"app-modal-header",15),_(1,"div",16)(2,"div",17)(3,"div",18)(4,"label",19),m(5),C(6,"translate"),p(),E(7,"input",20),p(),_(8,"div",18)(9,"label",21),m(10),C(11,"translate"),p(),_(12,"input",22),D("ngModelChange",function(e){l(i);let n=r();return A(n.ModelCash.Notes,e)||(n.ModelCash.Notes=e),o(e)}),p()(),_(13,"div",18),S(14,ke,3,4,"span",23)(15,Ge,1,5,"p-calendar",24),p(),_(16,"div",25)(17,"div",26)(18,"label",27),m(19),C(20,"translate"),p(),_(21,"input",28),f("change",function(){l(i);let e=r();return o(e.ChangePaymentType(1))}),D("ngModelChange",function(e){l(i);let n=r();return A(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),o(e)}),p()(),_(22,"div",26)(23,"label",29),m(24),C(25,"translate"),p(),_(26,"input",30),f("change",function(){l(i);let e=r();return o(e.ChangePaymentType(2))}),D("ngModelChange",function(e){l(i);let n=r();return A(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),o(e)}),p()()(),_(27,"div",31),S(28,je,8,8,"div",32)(29,Ue,8,8,"div",33),p(),_(30,"div",34)(31,"label",35),m(32),C(33,"translate"),p(),_(34,"select",36),f("change",function(){l(i);let e=r();return o(e.ChangeType())}),D("ngModelChange",function(e){l(i);let n=r();return A(n.ModelCash.InitGlType,e)||(n.ModelCash.InitGlType=e),o(e)}),_(35,"option",37),m(36),C(37,"translate"),p(),_(38,"option",37),m(39),C(40,"translate"),p(),_(41,"option",37),m(42),C(43,"translate"),p(),_(44,"option",37),m(45),C(46,"translate"),p(),_(47,"option",37),m(48),C(49,"translate"),p(),_(50,"option",37),m(51),C(52,"translate"),p(),_(53,"option",37),m(54),C(55,"translate"),p(),_(56,"option",37),m(57),C(58,"translate"),p(),_(59,"option",37),m(60),C(61,"translate"),p(),_(62,"option",37),m(63),C(64,"translate"),p(),_(65,"option",37),m(66),C(67,"translate"),p(),_(68,"option",37),m(69),C(70,"translate"),p()()()(),_(71,"div",38)(72,"table",39)(73,"thead")(74,"tr"),S(75,Fe,2,0,"th",40)(76,He,3,3,"th",41)(77,Qe,3,3,"th",41),_(78,"th",42),m(79),C(80,"translate"),p(),_(81,"th",42),m(82),C(83,"translate"),p()()(),_(84,"tbody"),S(85,vt,19,28,"tr",43),p()()()(),_(86,"div",44)(87,"button",45),f("click",function(){l(i);let e=r();return o(e.Save())}),S(88,wt,3,3,"span",40)(89,Rt,3,3,"span",40),E(90,"i",46),p(),S(91,Vt,3,3,"button",47),_(92,"button",48),f("click",function(){let e=l(i).$implicit,n=r();return e.close("Close click"),o(n.ResetPage())}),m(93),C(94,"translate"),p()()}if(s&2){let i=r();u("PageTitle",i.PageTitle),c(5),P(y(6,56,"Table.DocNo")),c(2),u("value",i.ModelCash.DocNo)("disabled",!0),c(3),P(y(11,58,"Table.Notes")),c(2),M("ngModel",i.ModelCash.Notes),c(2),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),c(),u("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),c(4),g(" ",y(20,60,"MoneyIn.Treasury")," "),c(2),M("ngModel",i.ModelCash.TreasuryCashType),u("checked",i.ModelCash.TreasuryCashType==1)("value",1),c(3),g(" ",y(25,62,"MoneyIn.Bank")," "),c(2),u("checked",i.ModelCash.TreasuryCashType==2)("value",2),M("ngModel",i.ModelCash.TreasuryCashType),c(2),u("ngIf",i.ModelCash.TreasuryCashType==1),c(),u("ngIf",i.ModelCash.TreasuryCashType==2),c(3),P(y(33,64,"MoneyIn.Type")),c(2),M("ngModel",i.ModelCash.InitGlType),c(),I("value",i.InitGlType.AccTree),c(),g(" ",y(37,66,"MoneyIn.AccTree")," "),c(2),I("value",i.InitGlType.Client),c(),g(" ",y(40,68,"MoneyIn.Clients")," "),c(2),I("value",i.InitGlType.Bank),c(),g(" ",y(43,70,"MoneyIn.Bank")," "),c(2),I("value",i.InitGlType.Treasury),c(),g(" ",y(46,72,"MoneyIn.Treasury")," "),c(2),I("value",i.InitGlType.Supplier),c(),g(" ",y(49,74,"MoneyIn.Suppliers")," "),c(2),I("value",i.InitGlType.Branch),c(),g(" ",y(52,76,"InitGlRecept.Branches")," "),c(2),I("value",i.InitGlType.Salaries),c(),g(" ",y(55,78,"InitGlRecept.Salaries")," "),c(2),I("value",i.InitGlType.EmployeeCustody),c(),g(" ",y(58,80,"InitGlRecept.EmployeeCustody")," "),c(2),I("value",i.InitGlType.PartnersDrawingAccounts),c(),g(" ",y(61,82,"InitGlRecept.PartnersDrawingAccounts")," "),c(2),I("value",i.InitGlType.Revenues),c(),g(" ",y(64,84,"MoneyIn.Revenues")," "),c(2),I("value",i.InitGlType.Expenses),c(),g(" ",y(67,86,"MoneyIn.ProofOfExpenses")," "),c(2),I("value",i.InitGlType.CreditTaxes),c(),g(" ",y(70,88,"MoneyIn.CreditTaxes")," "),c(6),u("ngIf",i.ModelCash.InitGlType!=i.InitGlType.CreditTaxes),c(),u("ngIf",i.ModelCash.InitGlType!=i.InitGlType.CreditTaxes),c(),u("ngIf",i.ModelCash.InitGlType==i.InitGlType.CreditTaxes),c(2),g(" ",y(80,90,"MoneyIn.Price")," "),c(3),g(" ",y(83,92,"MoneyIn.Notes")," "),c(3),u("ngForOf",i.ModelCash.ModelCashDetails)("ngForTrackBy",i.trackByMethod),c(2),u("ngClass",Y(96,Ne,i.ModelCash.Id==0,i.ModelCash.Id!=0)),c(),u("ngIf",i.ModelCash.Id==0),c(),u("ngIf",i.ModelCash.Id!=0),c(2),u("ngIf",i.ModelCash.Id>0),c(2),P(y(94,94,"Model.Close"))}}var ti=(()=>{let d=class d{constructor(t,e,n,a,h){this._ActivatedRoute=t,this._SharedObjectModelService=e,this._DefaultSettingsService=n,this._AppModeService=a,this._Apiservice=h,this.SignalR=!1,this.TablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this.InitGlType={None:0,AccTree:1,Client:2,Bank:3,Treasury:4,Supplier:5,Item:6,Branch:7,Salaries:8,EmployeeCustody:9,PartnersDrawingAccounts:10,Revenues:11,Expenses:12,CreditTaxes:13},this.TokenBranch=0,this.TreasuryArr=[],this.BankAccountArr=[]}ngOnInit(){let t=this._Apiservice.UserIdFromCookies();this.TokenBranch=Number(t.BranchId);let e=Number(this._ActivatedRoute.snapshot.queryParams.Id);e>0&&this.GetByIdRoute(e),this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModelService.PageModel=e.Obj.model,this._SharedObjectModelService.Gl=e.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(e.Message)}})}ConvertNumber(t){return Number(t)}GetPageInfo(){this._AppModeService.DisabledButton=!0,this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:t=>{t.IsSuccess==!0&&t.Obj!=null?(this.ModelCash.DocNo=t.Obj,this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(t.Message)},error:t=>{this._AppModeService.DisabledButton=!1}})}OpenModal(){this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){t.TreasuryId>0&&(t.PaymentType=1,t.PaymentType=1,this.TreasuryArr=[],this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName,Code:""}]),t.BankAccountId>0&&(t.PaymentType=2,this.BankAccountArr=[],this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]);let e=t[`${this.ScreenName}Details`];this.ModelCash={Id:t.Id,DocNo:t.DocNo,DocDate:new Date(`${t.DocDate}`),Notes:t.Notes,Code:t.Code,TotalAmount:t.TotalAmount,InitGlType:t.InitGlType,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,TreasuryCashType:t.TreasuryCashType,ModelCashDetails:e};for(let n=0;n<this.ModelCash.ModelCashDetails.length;n++){let a=this.ModelCash.ModelCashDetails[n];a.AccTreeId>0&&(a.AccTrees=[{Id:a.AccTreeId,Name:a.AccTreeName}]),a.ClientId>0&&(a.Clients=[{Id:a.ClientId,Name:a.ClientName}]),a.BankAccountId>0&&(a.BankAccounts=[{Id:a.BankAccountId,Name:a.BankAccountName}]),a.TreasuryId>0&&(a.Treasurys=[{Id:a.TreasuryId,Name:a.TreasuryName}]),a.SupplierId>0&&(a.Suppliers=[{Id:a.SupplierId,Name:a.SupplierName}]),a.BranchClientId>0&&(a.Branches=[{Id:a.BranchClientId,Name:a.BranchClientName}]),a.EmployeeId>0&&(a.Employees=[{Id:a.EmployeeId,Name:a.EmployeeName}]),a.PartnerId>0&&(a.Partners=[{Id:a.PartnerId,Name:a.PartnerName}])}this._AppModeService.DisabledButton=!1}AppendRow(){let t={Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]};return this.ModelCash.ModelCashDetails.push(t),this.TotalMoneyIn(),!0}RemoveRow(t){return this.ModelCash.ModelCashDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorFirstRow")),!1):(this.ModelCash.ModelCashDetails.splice(t,1),this.TotalMoneyIn(),!0)}TotalMoneyIn(){let t=0;for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++)t+=Number(this.ModelCash.ModelCashDetails[e].Amount);return Number(t.toFixed(2))}ChangeType(){this.ModelCash.ModelCashDetails=[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,BranchClientId:null,BranchClientName:"",Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}],Number(this.ModelCash.InitGlType)==this.InitGlType.CreditTaxes&&this._Apiservice.get("AccTreeEP/NetCreditTaxes",!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.ModelCash.ModelCashDetails[0].Name=`${e.Obj}`:this._AppModeService._Toastr.error(e.Message)}})}ChangePaymentType(t){this.ModelCash.BankAccountId=null,this.ModelCash.BankAccountName="",this.ModelCash.TreasuryId=null,this.ModelCash.TreasuryName=""}ChangeSearchApi(t,e){let n=`${e.searchTerm}`.trim();(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let a={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Treasury"&&(a.BranchFilter=!0),this._Apiservice.post("Global/GetAll",a,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:h=>{h.IsSuccess==!0&&h.Obj!=null?this.HandleResponse(h.Obj,t):this._AppModeService._Toastr.error(h.Message)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id"))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr);let a=n.find(h=>h.Id==t);if(a==null){this._AppModeService.DontPlay();return}else this.ModelCash[`${e}Id`]=t,this.ModelCash[`${e}Name`]=a.Name}else this.ModelCash[`${e}Id`]=null,this.ModelCash[`${e}Name`]=""}ChangeSearchApiDetails(t,e,n){let a=`${e.searchTerm}`.trim();(a==""||a=="null")&&(e.searchTerm="",a=""),this._AppModeService.CurrentPage+=1;let h={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:a,SearchField:"Name"};if((t=="AllAccTree"||t=="AccTreeRevenue"||t=="AccTreeExpenses")&&(h.TableName="AccTree",h.BranchFilter=!0,h.Conditions="AccClass >= 3"),t=="AccTreeRevenue"&&(h.Conditions="AccClass >= 3 And Level = 4"),t=="AccTreeExpenses"&&(h.Conditions="AccClass >= 3 And Level = 5"),(t=="Treasury"||t=="Partners")&&(h.BranchFilter=!0),t=="Branch"&&(h.Conditions=`Id != ${this.TokenBranch}`),t=="SaleInvoices"){let R=this.ModelCash.ModelCashDetails[n].ClientId;h.Conditions=`ClientId = ${R} And PaymentType = 2`,h.Columns=["Id","DocNo","Debt","InvoiceCollected","InvoiceCollection"],h.SearchField="",h.SearchText=""}this._Apiservice.post("Global/GetAll",h,!1).pipe(B(this._Apiservice.destroy$)).subscribe({next:R=>{R.IsSuccess==!0&&R.Obj!=null?this.HandleResponseDetails(R.Obj,t,n):this._AppModeService._Toastr.error(R.Message)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,(e=="AllAccTree"||e=="AccTreeRevenue"||e=="AccTreeExpenses")&&(this.ModelCash.ModelCashDetails[n].AccTrees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].AccTrees.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ModelCash.ModelCashDetails[n].Clients=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Clients.concat(t.DataReturn),"Id")),e=="SaleInvoices"&&(this.ModelCash.ModelCashDetails[n].SaleInvoices=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].SaleInvoices.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.ModelCash.ModelCashDetails[n].BankAccounts=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].BankAccounts.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.ModelCash.ModelCashDetails[n].Treasurys=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Treasurys.concat(t.DataReturn),"Id")),e=="Suppliers"&&(this.ModelCash.ModelCashDetails[n].Suppliers=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Suppliers.concat(t.DataReturn),"Id")),e=="Branch"&&(this.ModelCash.ModelCashDetails[n].Branches=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Branches.concat(t.DataReturn),"Id")),e=="Employee"&&(this.ModelCash.ModelCashDetails[n].Employees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Employees.concat(t.DataReturn),"Id")),e=="Partners"&&(this.ModelCash.ModelCashDetails[n].Partners=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Partners.concat(t.DataReturn),"Id"))}SelectValueDetails(t,e,n){if(t!=null&&t>0){let a=[];e=="AccTree"&&(a=this.ModelCash.ModelCashDetails[n].AccTrees),e=="Client"&&(a=this.ModelCash.ModelCashDetails[n].Clients),e=="BankAccount"&&(a=this.ModelCash.ModelCashDetails[n].BankAccounts),e=="Treasury"&&(a=this.ModelCash.ModelCashDetails[n].Treasurys),e=="Supplier"&&(a=this.ModelCash.ModelCashDetails[n].Suppliers),e=="BranchClient"&&(a=this.ModelCash.ModelCashDetails[n].Branches),e=="Employee"&&(a=this.ModelCash.ModelCashDetails[n].Employees),e=="Partner"&&(a=this.ModelCash.ModelCashDetails[n].Partners);let h=a.find(R=>R.Id==t);if(h!=null)this.ModelCash.ModelCashDetails[n][`${e}Id`]=h.Id,this.ModelCash.ModelCashDetails[n][`${e}Name`]=h.Name;else{this._Apiservice.DontPlay();return}}else this.ModelCash.ModelCashDetails[n][`${e}Id`]=null,this.ModelCash.ModelCashDetails[n][`${e}Name`]=[]}Save(){if(this.ModelCash.DocDate==""||this.ModelCash.DocDate==null){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleOffer.Error.EnterDate"));return}if(this.ModelCash.InitGlType<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ChooseType"));return}if(this.ModelCash.TreasuryCashType==1&&(this.ModelCash.TreasuryId==0||this.ModelCash.TreasuryId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterTreasury"));return}if(this.ModelCash.TreasuryCashType==2&&(this.ModelCash.BankAccountId==0||this.ModelCash.BankAccountId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterBank"));return}for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++){let n=e,a=Number(this.ModelCash.ModelCashDetails[e].AccTreeId),h=Number(this.ModelCash.ModelCashDetails[e].ClientId),R=Number(this.ModelCash.ModelCashDetails[e].BankAccountId),O=Number(this.ModelCash.ModelCashDetails[e].TreasuryId),k=Number(this.ModelCash.ModelCashDetails[e].SupplierId),W=Number(this.ModelCash.ModelCashDetails[e].SaleInvoiceId),j=Number(this.ModelCash.ModelCashDetails[e].BuyInvoiceId),L=Number(this.ModelCash.ModelCashDetails[e].BranchClientId),b=Number(this.ModelCash.ModelCashDetails[e].EmployeeId),U=Number(this.ModelCash.ModelCashDetails[e].PartnerId),$=Number(this.ModelCash.ModelCashDetails[e].Amount);if((this.ModelCash.InitGlType==this.InitGlType.AccTree||this.ModelCash.InitGlType==this.InitGlType.Revenues||this.ModelCash.InitGlType==this.InitGlType.Expenses)&&(a==0||isNaN(a))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAccTree"));return}if((this.ModelCash.InitGlType==this.InitGlType.AccTree||this.ModelCash.InitGlType==this.InitGlType.Revenues||this.ModelCash.InitGlType==this.InitGlType.Expenses)&&a>0&&this.ModelCash.ModelCashDetails.filter(T=>T.AccTreeId==a).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&(h==0||isNaN(h))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterClient"));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&h>0&&W>0&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==h&&T.SaleInvoiceId==W).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==h).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&(R==0||isNaN(R))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterBankAccount"));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&R>0&&this.ModelCash.ModelCashDetails.filter(T=>T.BankAccountId==R).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&(O==0||isNaN(O))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterTreasury"));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&O>0&&this.ModelCash.ModelCashDetails.filter(T=>T.TreasuryId==O).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&(k==0||isNaN(k))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterSupplier"));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==k).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&k>0&&j>0&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==k&&T.BuyInvoiceId==j).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&W>0){let w=this.ModelCash.ModelCashDetails[e].SaleInvoices.find(T=>T.DocNo==W);if(w!=null){let T=w.Debt-w.InvoiceCollection;if($>T){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&j>0){let w=this.ModelCash.ModelCashDetails[e].BuyInvoices.find(T=>T.DocNo==j);if(w!=null&&$>w.InvoiceCollection){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&(L==0||isNaN(L))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseBranch"));return}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&this.ModelCash.ModelCashDetails.filter(T=>T.BranchClientId==L).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&(b==0||isNaN(b))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==b).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&(b==0||isNaN(b))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==b).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&(U==0||isNaN(U))){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Partners.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&this.ModelCash.ModelCashDetails.filter(T=>T.PartnerId==U).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if($<=0||isNaN($)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAmount"));return}}let t={Id:this.ModelCash.Id,DocNo:this.ModelCash.DocNo,DocDate:this._Apiservice.ConvertISODate(this.ModelCash.DocDate),Notes:this.ModelCash.Notes,Code:this.ModelCash.Code,TotalAmount:this.ModelCash.TotalAmount,InitGlType:Number(this.ModelCash.InitGlType),BankAccountId:this.ModelCash.BankAccountId,BankAccountName:this.ModelCash.BankAccountName,TreasuryId:this.ModelCash.TreasuryId,TreasuryName:this.ModelCash.TreasuryName,TreasuryCashType:this.ModelCash.TreasuryCashType,ModelCashDetails:this.ModelCash.ModelCashDetails};t[`${this.ScreenName}Details`]=t.ModelCashDetails,t.Id==0&&this._Apiservice.post(`${this.AddUrl}`,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(e.Obj)):this._AppModeService._Toastr.error(e.Message)}}),t.Id>0&&this._Apiservice.put(`${this.UpdateUrl}`,t,!0).pipe(B(this._Apiservice.destroy$)).subscribe({next:e=>{if(e.IsSuccess==!0&&e.Obj!=null){this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.UpdateSuccess"));let n=e.Obj,a=this._SharedObjectModelService.Paging.DataReturn.find(h=>h.Id==n.Id);a!=null&&Object.assign(a,n),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(e.Message)}})}ResetPage(){this._AppModeService.DisabledButton=!1,this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this._DefaultSettingsService.ResetDate(this.ModelCash),this.HandleMyDefaultSettings()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.TreasuryArr=[],this.BankAccountArr=[],this.ModelCash.Id==0&&(this.ScreenName=="TreasuryIn"&&(t.MoneyInType>0&&(this.ModelCash.TreasuryCashType=t.MoneyInType),t.MoneyInInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyInInitGlType),t.MoneyInBankId>0&&(this.ModelCash.BankAccountId=t.MoneyInBankId,this.BankAccountArr.push({Id:t.MoneyInBankId,Name:t.MoneyInBankName})),t.MoneyInTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyInTreasuryId,this.TreasuryArr.push({Id:t.MoneyInTreasuryId,Name:t.MoneyInTreasuryName}))),this.ScreenName=="TreasuryOut"&&(t.MoneyOutType>0&&(this.ModelCash.TreasuryCashType=t.MoneyOutType),t.MoneyOutInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyOutInitGlType),t.MoneyOutBankId>0&&(this.ModelCash.BankAccountId=t.MoneyOutBankId,this.BankAccountArr.push({Id:t.MoneyOutBankId,Name:t.MoneyOutBankName})),t.MoneyOutTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyOutTreasuryId,this.TreasuryArr.push({Id:t.MoneyOutTreasuryId,Name:t.MoneyOutTreasuryName}))))}trackByMethod(t,e){return e.Id}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}StartConnection(){this.Hub_Connection=new Ve().withUrl(`${ne.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:Re.WebSockets,accessTokenFactory:()=>this._Apiservice.getToken()}).configureLogging(we.Error).build(),this.Hub_Connection.start().then(()=>{console.log("Hub Connection Success")}).catch(t=>{console.log(t)})}ServerListener(){this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.ModelCash.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.ModelCash.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this._SharedObjectModelService.Paging.DataReturn=this._SharedObjectModelService.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}};d.\u0275fac=function(e){return new(e||d)(N(ie),N(Me),N(Pe),N(Ce),N(re))},d.\u0275cmp=q({type:d,selectors:[["app-dynamic-cash-receipt"]],viewQuery:function(e,n){if(e&1&&(F(Ee,5),F(be,5)),e&2){let a;H(a=Q())&&(n.ContentModel=a.first),H(a=Q())&&(n.GLComponent=a.first)}},inputs:{SignalR:"SignalR",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[z],decls:5,vars:8,consts:[["content",""],["GLComponent",""],["SelectTreasury1",""],["SelectBankAccounts1",""],["SelectAccTreeDetails",""],["SelectClientDetails",""],["SelectBankAccountsDetails",""],["SelectTreasurysDetails",""],["SelectBranchesDetails",""],["SelectSuppliersDetails",""],["SelectPartnersDetails",""],["SelectEmployeesDetails",""],["SelectAccTreeRevenuesDetails",""],["SelectAccTreeExpensesDetails",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","DeleteUrl","PrintUrl","OutModal"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0"],[1,"d-flex","flex-wrap","align-items-end","col-12"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","px-1"],["for","DocNo"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class"," shadow-none text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","px-1","d-flex"],[1,"d-flex","align-items-center","justify-content-center","col-6"],["for","Payment1",1,"p-0"],["type","radio","name","Payment","id","Payment1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","Payment2",1,"p-0"],["type","radio","name","Payment","id","Payment2",1,"form-check-input","mx-2",3,"change","ngModelChange","checked","value","ngModel"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],["class","col-12  ",4,"ngIf"],["class","col-12   ",4,"ngIf"],[1,"col-12","px-1"],["for","Type"],["name","Type","id","Type",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[1,"table-responsive-vertical","shadow-z-1"],[1,"table","table-hover","table-striped","table-light","mt-3"],[4,"ngIf"],["class","col-3",4,"ngIf"],[1,"col-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],[1,"btn","py-3","px-5",3,"click","ngClass"],[1,"mx-1","pi","pi-save"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["type","button",1,"btn","btn-light","border","border-1","border-dark","px-5","py-3",3,"click"],[1,"d-block","text-center"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"col-12"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"form-text","text-muted"],["for","PaymentTypeBankAccountId"],["class","Flex1",3,"title",4,"ngIf"],["class","ngSelect",3,"title",4,"ngIf"],[3,"title"],["type","number","appNumericInput","",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],["type","text",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],[1,"Flex1",3,"title"],[1,"d-flex","justify-content-center","align-items-center","col-11","col-md-12"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-success",3,"click"],[1,"mx-1","fs-5","fw-bold","pi","pi-plus"],[1,"d-none","d-lg-inline"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold","fs-5"],[1,"ngSelect",3,"title"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","dropdownPosition","virtualScroll","searchable","ngModel"],[1,"text-dark","d-block","text-center"],["class","text-dark",4,"ngIf"],[1,"text-dark"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"]],template:function(e,n){if(e&1){let a=v();_(0,"app-dynamic-component",14),f("OpenModalEvent",function(){return l(a),o(n.OpenModal())})("ShowToEditeEvent",function(){return l(a),o(n.ShowToEdite())}),p(),S(1,Bt,95,99,"ng-template",null,0,K),E(3,"app-glsheard",null,1)}if(e&2){let a=x(2);u("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!1)("GlResponse",!0)("GetById",n.GetById)("DeleteUrl",n.DeleteUrl)("PrintUrl",n.PrintUrl)("OutModal",a)}},dependencies:[te,Se,Ie,Te,ge,ye,xe,ue,me,he,le,_e,de,pe,oe,ce,Z,ee,X,fe,se,ae,ve,Be,Ae,De],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important}"]});let s=d;return s})();export{ti as a};
