import{a as Y,b as q}from"./chunk-6BJKXUWP.js";import"./chunk-3Y7UQ2M3.js";import{a as J}from"./chunk-LUZO7NCR.js";import"./chunk-VUX2NRX2.js";import"./chunk-GEJP5WQO.js";import"./chunk-GNF256I6.js";import{a as G,b as z,c as H,d as U}from"./chunk-MZIKAFPE.js";import"./chunk-RVJIMCIT.js";import{c as $}from"./chunk-NUFVOF6D.js";import{c as N,d as j}from"./chunk-KALZ37GW.js";import{c as x,h as B,k,u as L}from"./chunk-N4FWSTCP.js";import"./chunk-VTADEU6K.js";import{$b as T,Cb as p,Db as c,Eb as b,Ib as F,Mb as I,Nb as V,Wb as A,X as M,Xb as u,Yb as W,Zb as _,_b as O,ac as w,bc as C,db as l,dc as E,eb as v,na as P,nc as h,oc as g,vb as y,xa as s,xb as f,ya as a}from"./chunk-J5UB44FZ.js";import{a as D,b as R}from"./chunk-3EYC4JTX.js";function K(d,m){if(d&1&&(p(0,"small",16),u(1),c()),d&2){let S=V();l(),O("Loaded ",S.Items.length," of ",S._SharedObjectModelService.TotalItems,"")}}function Q(d,m){if(d&1&&u(0),d&2){let S=m.item;_(" ",S.NameAndCode," ")}}var de=(()=>{let m=class m{constructor(n,r,e){this._SharedObjectModelService=n,this._AppModeService=r,this._Apiservice=e,this.Reset={FromDate:"",ToDate:""},this.Items=[]}ngOnInit(){this.Reset.FromDate=new Date(this._Apiservice.FromDate()),this.Reset.ToDate=new Date(this._Apiservice.ToNowDate())}ChangeSearchApi(n,r){let e=`${r.searchTerm}`.trim();(e==""||e=="null")&&(r.searchTerm="",e=""),this._AppModeService.CurrentPage+=1;let i={TableName:n,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:e,SearchField:"Name"};n=="Storages"&&(i.BranchFilter=!0),n=="Items"&&(i.Columns=["Id","Name","Code"],i.Conditions="ProductType != 2"),this._Apiservice.post("Global/GetAll",i,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:o=>{o.IsSuccess==!0&&o.Obj!=null?(this.Items=this._SharedObjectModelService.RemoveDuplicates(this.Items.concat(o.Obj.DataReturn),"Id"),this.Items=this.Items.map(t=>R(D({},t),{NameAndCode:`${t.Name} - ${t.Code}`}))):this._AppModeService._Toastr.error(o.Message)}})}Search(){if(this.Reset.FromDate==null||`${this.Reset.FromDate}`.trim()==""){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Interval.Error.FromDate"));return}if(this.Reset.ToDate==null||`${this.Reset.ToDate}`.trim()==""){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Interval.Error.ToDate"));return}let n={FromDate:this._Apiservice.ConvertISODate(this.Reset.FromDate),ToDate:this._Apiservice.ConvertISODate(this.Reset.ToDate),ProductId:this.Reset.ProductId};if(this._Apiservice.ValidateDate(n.FromDate,n.ToDate)==!1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("StatementOfFinancial.Error.SmallDate"));return}this._Apiservice.post("ResetProductWAEP/Add",n,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:r=>{r.IsSuccess==!0&&r.Obj!=null?this._AppModeService._Toastr.success(r.Message):this._AppModeService._Toastr.error(r.Message)}})}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}};m.\u0275fac=function(r){return new(r||m)(v(J),v($),v(x))},m.\u0275cmp=P({type:m,selectors:[["app-reset-product-wa"]],standalone:!0,features:[E],decls:32,vars:30,consts:[["SelectFromStore",""],["clas","bg-light"],[1,"title-box","font-weight-normal"],[1,"min","border"],[1,"d-flex","flex-wrap","align-items-end","pb-4"],[1,"col-12","col-md-3","p-2"],[1,"my-1"],[1,"formdate"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],["for","Item"],["placeholder","Search","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-3","p-2","text-center"],[1,"btn-Add","btn",3,"click"],[1,"mx-1","pi","pi-save"],[1,"form-text","text-muted"]],template:function(r,e){if(r&1){let i=F();p(0,"section",1)(1,"div",2)(2,"h4"),u(3),h(4,"translate"),c()(),p(5,"div",3)(6,"div",4)(7,"div",5)(8,"p",6),u(9),h(10,"translate"),c(),p(11,"div",7)(12,"p-calendar",8),C("ngModelChange",function(t){return s(i),w(e.Reset.FromDate,t)||(e.Reset.FromDate=t),a(t)}),c()()(),p(13,"div",5)(14,"p",6),u(15),h(16,"translate"),c(),p(17,"div",7)(18,"p-calendar",8),C("ngModelChange",function(t){return s(i),w(e.Reset.ToDate,t)||(e.Reset.ToDate=t),a(t)}),c()()(),p(19,"div",5)(20,"label",9),u(21),h(22,"translate"),c(),p(23,"ng-select",10,0),I("clear",function(){return s(i),a(e.Items=[])})("focus",function(){s(i);let t=A(24);return e.ChangeSearchApi("Items",t),a(e._AppModeService.ResetCurrentPage())})("keyup",function(){s(i);let t=A(24);return e.ChangeSearchApi("Items",t),a(e._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){s(i);let t=A(24);return a(e.ChangeSearchApi("Items",t))})("close",function(){return s(i),a(e._AppModeService.ResetCurrentPage())})("open",function(){return s(i),a(e._AppModeService.ResetCurrentPage())}),C("ngModelChange",function(t){return s(i),w(e.Reset.ProductId,t)||(e.Reset.ProductId=t),a(t)}),y(25,K,2,2,"ng-template",11)(26,Q,1,1,"ng-template",12),c()(),p(27,"div",13)(28,"button",14),I("click",function(){return s(i),a(e.Search())}),u(29),h(30,"translate"),b(31,"i",15),c()()()()()}r&2&&(l(3),W(g(4,20,"ResetProductWA.ResetProductWA")),l(6),_(" ",g(10,22,"SupplierAccount.FromDate"),""),l(3),T("ngModel",e.Reset.FromDate),f("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0),l(3),_(" ",g(16,24,"SupplierAccount.ToDate"),""),l(3),T("ngModel",e.Reset.ToDate),f("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0),l(3),_(" ",g(22,26,"BalanceStorage.ItemId"),""),l(2),f("items",e.Items)("autofocus",!1)("virtualScroll",!0)("searchable",!0),T("ngModel",e.Reset.ProductId),l(6),_("",g(30,28,"Model.Send")," "))},dependencies:[q,Y,L,B,k,j,N,U,H,G,z],styles:[".min[_ngcontent-%COMP%]{min-height:100vh}"]});let d=m;return d})();export{de as ResetProductWAComponent};
