import{a as rt}from"./chunk-VMH4N7SN.js";import{a as tt,b as it}from"./chunk-6T4APQIW.js";import{a as nt}from"./chunk-7ELVQQOT.js";import{a as ot}from"./chunk-I5RCRK26.js";import{a as He,b as Qe,c as Je,d as Ke,f as qe,g as Ze,h as Xe,i as Ye,j as et}from"./chunk-IVKAI2XA.js";import{d as $e}from"./chunk-RNDF35OI.js";import{a as ze}from"./chunk-VSYXDL23.js";import{g as Be,h as Ee,j as ae,k as Oe,l as Ue,m as je,o as Fe,p as Ge,q as We,r as Le,s as le}from"./chunk-XEA7AGRV.js";import{a as Re,b as ke}from"./chunk-J2IHKXEM.js";import{a as ce}from"./chunk-4BXLEV7L.js";import{k as re}from"./chunk-4NNWIUMA.js";import{a as Ne,b as Pe,c as Me,d as Ve}from"./chunk-PXT6JROT.js";import{c as ne,d as oe,g as L}from"./chunk-IFVWP3QJ.js";import{H as Se,I as W,L as xe,N as te,Q as ie,S as ye,T as Ce,U as Te,V as be,W as De,Y as we,_ as Ae,b as ge,c as X,d as Y,i as ee,z as fe}from"./chunk-OQMSVWK6.js";import{$b as w,Aa as ve,Ab as he,Cb as c,Db as l,Eb as T,Fb as J,Ga as _e,Gb as K,Ib as b,Mb as f,Nb as r,Qb as E,Rb as V,Tb as O,Ub as U,Vb as j,Wb as C,X as M,Xb as u,Yb as g,Zb as D,_b as B,ab as Ie,ac as A,bc as N,ca as de,db as a,dc as q,eb as G,ec as Z,ha as se,ia as Q,na as z,nc as I,oc as h,pc as H,qc as $,vb as S,wa as me,xa as _,xb as m,ya as p,za as ue}from"./chunk-J5UB44FZ.js";import{a as R,b as k}from"./chunk-3EYC4JTX.js";var vt=["DeleteModalComponent"],It=["ModalUserInfoModal"],ht=()=>({"min-width":"75rem"}),gt=()=>["Name"],ft=()=>({"min-width":"100%"});function St(o,d){if(o&1){let i=b();c(0,"div",19)(1,"div",20)(2,"span",21),u(3),I(4,"translate"),l()(),c(5,"div",22)(6,"p-multiSelect",23),I(7,"translate"),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.selectedColumns,e)||(n.selectedColumns=e),p(e)}),l()()()}if(o&2){let i=r(2);a(3),g(h(4,7,i.PageTitle)),a(3),he(Z(11,ft)),V("selectedItemsLabel","{0} ",h(7,9,"ColumnsSelected"),""),m("options",i.TablePaging.TableCell),w("ngModel",i.selectedColumns)}}function xt(o,d){if(o&1&&(c(0,"th",31)(1,"span",32),u(2),I(3,"translate"),l(),T(4,"p-sortIcon",33),l()),o&2){let i=d.$implicit;E("pSortableColumn",i.SortName),a(2),D(" ",h(3,4,i.CellName)," "),a(2),E("pSortableColumn",i.SortName),E("field",i.SortName)}}function yt(o,d){if(o&1){let i=b();c(0,"th",24)(1,"p-columnFilter",34,4),I(3,"translate"),f("keyup",function(){let e=_(i).$implicit,n=C(2),s=r(3);return s.LoadDataPaging(s.TablePaging.GlobalData,n.dt.filters[e.SortName],e.ExistSearchField!=null?e.ExistSearchField:e.SortName,!1),p(s.ClearColumns(e,n.dt.filters))}),l()()}if(o&2){let i=d.$implicit;a(),E("field",i.SortName),E("placeholder",h(3,3,"navBar.Search")),m("showMenu",!1)}}function Ct(o,d){if(o&1){let i=b();c(0,"tr")(1,"th",24)(2,"button",25),f("click",function(){_(i),r();let e=C(5),n=r();return n.LoadDataPaging(n.TablePaging.GlobalData,"","",!0),p(n.ClearColumnFilter(e))}),ue(),c(3,"svg",26),T(4,"path",27)(5,"path",28),l()()(),S(6,xt,5,6,"th",29),ve(),T(7,"td",24),l(),c(8,"tr"),T(9,"td",24),S(10,yt,4,5,"th",30),T(11,"td",24),l()}if(o&2){let i=r(2);a(6),m("ngForOf",i.selectedColumns),a(4),m("ngForOf",i.selectedColumns)}}function Tt(o,d){if(o&1&&(J(0),c(1,"span"),u(2),l(),K()),o&2){let i=r().$implicit,t=r().$implicit;a(2),D(" ",t[i.SortName]," ")}}function bt(o,d){o&1&&T(0,"span")}function Dt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),l()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",H(2,1,t[i.SortName],"yyy-M-d")," ")}}function wt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),l()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",H(2,1,t[i.SortName],"yyy-M-d h:mm:ss a")," ")}}function At(o,d){o&1&&(c(0,"span"),T(1,"i",46),l())}function Nt(o,d){o&1&&(c(0,"span"),T(1,"i",47),l())}function Pt(o,d){if(o&1&&(J(0),S(1,At,2,0,"span",10)(2,Nt,2,0,"span",10),K()),o&2){let i=r().$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0),a(),m("ngIf",t[i.SortName]==!1)}}function Mt(o,d){o&1&&(c(0,"span"),T(1,"i",46),l())}function Vt(o,d){if(o&1&&(c(0,"span"),S(1,Mt,2,0,"span",10),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Bt(o,d){o&1&&(c(0,"span"),T(1,"i",47),l())}function Et(o,d){if(o&1&&(c(0,"span"),S(1,Bt,2,0,"span",10),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Rt(o,d){o&1&&(c(0,"span"),T(1,"i",46),l())}function kt(o,d){if(o&1&&(c(0,"span"),S(1,Rt,2,0,"span",10),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function Ot(o,d){o&1&&(c(0,"span"),T(1,"i",47),l())}function Ut(o,d){if(o&1&&(c(0,"span"),S(1,Ot,2,0,"span",10),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function jt(o,d){if(o&1&&(J(0),S(1,Vt,2,1,"span",10)(2,Et,2,1,"span",10)(3,kt,2,1,"span",10)(4,Ut,2,1,"span",10),K()),o&2){let i=r().$implicit;a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean==null)}}function Ft(o,d){if(o&1&&(c(0,"td",36),S(1,Tt,3,1,"ng-container",10)(2,bt,1,0,"span",10)(3,Dt,3,4,"span",10)(4,wt,3,4,"span",10)(5,Pt,3,2,"ng-container",10)(6,jt,5,4,"ng-container",10),l()),o&2){let i=d.$implicit,t=r().$implicit,e=r(2);a(),m("ngIf",(i.CellDate==null||i.CellDate==!1)&&(i.CellDateTime==null||i.CellDateTime==!1)&&e.typeOf(t[i.SortName])!="object"&&(i.DataBoolean==null||i.DataBoolean==!1)),a(),m("ngIf",e.typeOf(t[i.SortName])=="object"),a(),m("ngIf",i.CellDate==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.CellDateTime==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null&&i.CrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&(i.DrBoolean!=null||i.CrBoolean!=null))}}function Gt(o,d){if(o&1){let i=b();c(0,"button",48),f("click",function(){_(i);let e=r().$implicit,n=r(2);return p(n.ConfirmDelete(e.Id))}),T(1,"i",49),l()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton)}}function Wt(o,d){if(o&1){let i=b();c(0,"tr",35)(1,"td",36)(2,"span"),u(3),l(),T(4,"span",37),l(),S(5,Ft,7,6,"td",38),c(6,"td",39)(7,"div",40)(8,"button",41),f("click",function(){let e=_(i).$implicit,n=r(2);return p(n.ShowToEdite(e))}),T(9,"i",42),l(),c(10,"button",43),f("click",function(){let e=_(i).$implicit,n=r(2);return p(n.OpenUserModal(e,n.TablePaging.GlobalData.TableName))}),T(11,"i",44),l(),S(12,Gt,2,1,"button",45),l()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);m("pContextMenuRow",i)("pReorderableRow",t),a(3),g(t+1),a(2),m("ngForOf",e.selectedColumns),a(3),m("disabled",e._AppModeService.DisabledButton),a(2),m("disabled",e._AppModeService.DisabledButton),a(2),m("ngIf",e.DeleteUrl!="")}}function Lt(o,d){if(o&1){let i=b();c(0,"p-paginator",50),f("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),l()}if(o&2){let i=r(2);m("first",i._SharedObjectModel.PagingModal.CurrentPage)("rows",i._SharedObjectModel.PagingModal.PageSize)("totalRecords",i._SharedObjectModel.PagingModal.TotalItems)("rowsPerPageOptions",i._AppModeService.RowCount)}}function Ht(o,d){if(o&1){let i=b();c(0,"p-paginator",51),f("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),l()}if(o&2){let i=r(2);m("first",i._SharedObjectModel.PagingModal.CurrentPage)("rows",i._SharedObjectModel.PagingModal.PageSize)("totalRecords",i._SharedObjectModel.PagingModal.TotalItems)}}function $t(o,d){if(o&1){let i=b();c(0,"div")(1,"div",11),T(2,"p-contextMenu",12,2),c(4,"p-table",13,3),N("contextMenuSelectionChange",function(e){_(i);let n=r();return A(n.contextSelected,e)||(n.contextSelected=e),p(e)}),f("onSort",function(e){_(i);let n=r();return p(n.SortFunction(e))}),S(6,St,8,12,"ng-template",14)(7,Ct,12,2,"ng-template",15)(8,Wt,13,7,"ng-template",16),l()(),S(9,Lt,1,4,"p-paginator",17)(10,Ht,1,3,"p-paginator",18),l()}if(o&2){let i=C(3),t=r();a(2),m("model",t.contextitems),a(2),m("value",t._SharedObjectModel.PagingModal.DataReturn)("lazy",!0)("scrollable",!0)("columns",t.selectedColumns)("paginator",!1)("resizableColumns",!0)("reorderableColumns",!0)("rows",t._SharedObjectModel.PagingModal.PageSize)("tableStyle",Z(15,ht)),w("contextMenuSelection",t.contextSelected),m("contextMenu",i)("globalFilterFields",Z(16,gt)),a(5),m("ngIf",t._SharedObjectModel.PagingModal.TotalItems>=10),a(),m("ngIf",t._SharedObjectModel.PagingModal.TotalItems<10)}}var lt=(()=>{let d=class d{constructor(){this._selectedColumns=[],this.contextitems=[],this.contextSelected={},this.DataInfo={CreatedDate:"",CreatedByName:"",LastModifiedDate:"",ModifyByName:"",ModifyCount:0},this.OpenModalEvent=new _e,this.ShowToEditeEvent=new _e,this.PageTitle="",this.OutModal=null,this.FullScreen=!1,this.TablePaging={},this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.SearchText="",this.SearchField="",this.Field="Id",this.Order=1,this._SharedObjectModel=Q(ce),this._AppModeService=Q(L),this._Apiservice=Q(W)}ConfirmDelete(t){this.DeleteModalComponent.ConfirmDelete(t,this.DeleteUrl,"",!0)}OpenUserModal(t,e){this.ModalUserInfoComponent.ShowDetails(t,e)}ngOnInit(){this._SharedObjectModel.PagingModal={PageSize:10,CurrentPage:1,TotalPages:0,TotalItems:0,DataReturn:[]},this.LoadDataPaging(this.TablePaging.GlobalData,"","",!1),this.HandleCol(),this.contextitems=[{label:"Delete",icon:"pi pi-fw pi-times",command:()=>this.ConfirmDelete(this.contextSelected.Id)}]}get selectedColumns(){return this._selectedColumns}set selectedColumns(t){this._selectedColumns=this.TablePaging.TableCell.filter(e=>t.includes(e))}HandleCol(){this.TablePaging.TableCell=this.TablePaging.TableCell.map(t=>k(R({},t),{ConvertCellName:this._AppModeService._Translate.instant(t.CellName)})),this._selectedColumns=this.TablePaging.TableCell}ClearColumnFilter(t){let e=Object.values(t.filters);for(let n=0;n<e.length;n++)e[n].value=null;this.SearchText="",this.SearchField="",this._SharedObjectModel.PagingModal.CurrentPage=1}ClearColumns(t,e){let n=Object.keys(e),s=Object.values(e);for(let v=0;v<n.length;v++)n[v]!=t.SortName&&(s[v].value=null)}LoadDataPaging(t,e,n,s=!0){e=`${e==""?"":e.value}`.trim(),this.SearchText=e,this.SearchField=n;let v={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:t.BranchFilter,CurrentPage:1,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions};this._Apiservice.post(`${t.Url}`,v,s).pipe(M(this._Apiservice.destroy$)).subscribe({next:y=>{y.IsSuccess==!0&&y.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=y.Obj.DataReturn,this._SharedObjectModel.PagingModal.CurrentPage=y.Obj.CurrentPage,this._SharedObjectModel.PagingModal.TotalItems=y.Obj.TotalItems):this._AppModeService._Toastr.error(y.Message)}})}SortFunction(t){let e=t.multisortmeta[0];if(e!=null){this.Field=e.field,this.Order=e.order;let n=this.TablePaging.GlobalData,s={TableName:n.TableName,Columns:n.Columns,Conditions:n.Conditions==null?"":n.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:n.BranchFilter,CurrentPage:this._SharedObjectModel.PagingModal.CurrentPage,Join:n.Join,JoinTables:n.JoinTables,JoinConditions:n.JoinConditions,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${n.Url}`,s,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=v.Obj.DataReturn,this._SharedObjectModel.PagingModal.CurrentPage=v.Obj.CurrentPage,this._SharedObjectModel.PagingModal.TotalItems=v.Obj.TotalItems):this._AppModeService._Toastr.error(v.Message)}})}}onPageChange(t,e){e.page++,e.first,e.rows,this._SharedObjectModel.PagingModal.CurrentPage=e.first,this._SharedObjectModel.PagingModal.PageSize=e.rows;let n={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:t.BranchFilter,CurrentPage:e.page,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${t.Url}`,n,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:s=>{s.IsSuccess==!0&&s.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=s.Obj.DataReturn,this._SharedObjectModel.PagingModal.TotalItems=s.Obj.TotalItems):this._AppModeService._Toastr.error(s.Message)}})}ShowToEdite(t){this._AppModeService.DisabledButton=!0,this._Apiservice.getById(this.GetById,t.Id).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{this._AppModeService.DisabledButton=!1,e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModel.SecoundPageModel=e.Obj,this.ShowToEditeEvent.emit("ShowToEdite Fire"),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(e.Message))},error:e=>{this._AppModeService.DisabledButton=!1}})}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}typeOf(t){return typeof t}};d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=z({type:d,selectors:[["app-table"]],viewQuery:function(e,n){if(e&1&&(O(vt,5),O(It,5)),e&2){let s;U(s=j())&&(n.DeleteModalComponent=s.first),U(s=j())&&(n.ModalUserInfoComponent=s.first)}},inputs:{PageTitle:"PageTitle",OutModal:"OutModal",FullScreen:"FullScreen",DataView:"DataView",TablePaging:"TablePaging",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl",selectedColumns:"selectedColumns"},outputs:{OpenModalEvent:"OpenModalEvent",ShowToEditeEvent:"ShowToEditeEvent"},standalone:!0,features:[q],decls:10,vars:1,consts:[["ModalUserInfoModal",""],["DeleteModalComponent",""],["cm",""],["dt1",""],["columnFilter",""],["clas",""],["id","container-page",1,"container-page","p-0"],[1,"page-wrapper"],[1,"main-content"],[1,"inner-box","DivPaging"],[4,"ngIf"],[1,"TablePaging","noclear","table","mb-0","p-0","border-top-right-radius-0","border-top-left-radius-0"],[3,"model"],["scrollHeight","100vh","styleClass","p-datatable-striped","dataKey","Id","sortMode","multiple",3,"contextMenuSelectionChange","onSort","value","lazy","scrollable","columns","paginator","resizableColumns","reorderableColumns","rows","tableStyle","contextMenuSelection","contextMenu","globalFilterFields"],["pTemplate","caption",1,"d-flex","p-0","GridTable"],["pTemplate","header"],["pTemplate","body"],["appendTo","table",3,"first","rows","totalRecords","rowsPerPageOptions","onPageChange",4,"ngIf"],["appendTo","table",3,"first","rows","totalRecords","onPageChange",4,"ngIf"],[1,"d-flex","align-items-center","bg-white"],[1,"col-3","my-2","px-2"],[1,"PageTitle","fs-4"],[1,"col-6","my-2","px-2"],["optionLabel","ConvertCellName","placeholder","Choose Columns",1,"w-100",3,"ngModelChange","options","ngModel","selectedItemsLabel"],["pResizableColumn",""],["type","button","icon","pi pi-file-excel",1,"mx-2","px-3","py-1","btn","btn-success",3,"click"],["width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-counterclockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"],["pResizableColumn","","class","col-2 ",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",4,"ngFor","ngForOf"],["pResizableColumn","",1,"col-2",3,"pSortableColumn"],[1,"mx-2"],[3,"pSortableColumn","field"],["type","text",3,"keyup","showMenu","field","placeholder"],[3,"pContextMenuRow","pReorderableRow"],[1,"bg-white"],["pReorderableRowHandle","",1,"pi","pi-bars"],["class","bg-white",4,"ngFor","ngForOf"],[1,"p-0","bg-white"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-search"],[1,"btn","btn-light","border","border-1","border-dark","px-3","py-3",3,"click","disabled"],[1,"mx-1","pi","pi-info"],["class","btn btn-danger text-white shadow-none mx-2 py-2 px-3",3,"disabled","click",4,"ngIf"],[1,"pi","pi-check","text-success",2,"font-size","2rem !important"],[1,"pi","pi-times","text-danger",2,"font-size","2rem !important"],[1,"btn","btn-danger","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-trash"],["appendTo","table",3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["appendTo","table",3,"onPageChange","first","rows","totalRecords"]],template:function(e,n){e&1&&(c(0,"section",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),S(5,$t,11,17,"div",10),l()()()()(),T(6,"app-modal-user-info",null,0)(8,"app-modal-delete",null,1)),e&2&&(a(5),m("ngIf",n.TablePaging.Type=="TablePaging"))},dependencies:[Ee,Be,re,te,ie,le,ae,Oe,je,Fe,Ue,Ge,We,Le,Y,X,Ye,Xe,Ze,qe,oe,ne,ee,Ke,$e]});let o=d;return o})();var ct=(()=>{let d=class d{constructor(t,e){this._Apiservice=t,this._AppModeService=e,this.ScaleSettingsArr=[],this.GetScaleSettings()}GetScaleSettings(){let t={TableName:"ScaleSettings",Columns:["Id","Name","ZaraNumber","BarCodeLength","ProductCodeLength","WeightCodeLength"],Conditions:"",NoPaging:!0};this._Apiservice.post("Global/GetAll",t,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.ScaleSettingsArr=e.Obj.DataReturn:this._AppModeService._Toastr.error(e.Message)}})}};d.\u0275fac=function(e){return new(e||d)(se(W),se(L))},d.\u0275prov=de({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var Kt=["GLComponent"],qt=["content"],Zt=["OherModal"],Xt=["AllHold"],Yt=["ProductTable"];function ei(o,d){o&1&&(c(0,"th",70),u(1),I(2,"translate"),l()),o&2&&(a(),D("",h(2,1,"SaleInvoice.DiscountRate")," %"))}function ti(o,d){o&1&&(c(0,"th",70),u(1),I(2,"translate"),l()),o&2&&(a(),g(h(2,1,"SaleInvoice.Discount")))}function ii(o,d){if(o&1&&(c(0,"tr")(1,"th",64)(2,"span",65),u(3,"Ctrl "),c(4,"span",66),u(5,"+"),l(),u(6," D"),l(),c(7,"span",67),u(8,"Ctrl "),c(9,"span",66),u(10,"+"),l(),u(11," Shift"),l(),c(12,"span",68),u(13,"#"),l()(),c(14,"th",69),u(15),I(16,"translate"),l(),c(17,"th",70),u(18),I(19,"translate"),l(),c(20,"th",70),u(21),I(22,"translate"),l(),c(23,"th",70),u(24),I(25,"translate"),l(),S(26,ei,3,3,"th",71)(27,ti,3,3,"th",71),c(28,"th",70),u(29),I(30,"translate"),l()()),o&2){let i=r(2);a(15),g(h(16,7,"SaleInvoice.Name")),a(3),g(h(19,9,"SaleInvoice.Unit")),a(3),g(h(22,11,"SaleInvoice.Quantity")),a(3),g(h(25,13,"SaleInvoice.Price")),a(2),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(2),g(h(30,15,"SaleInvoice.TotalPriceAfterDiscount"))}}function ni(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r().$implicit,t=r(2);a(),B("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function oi(o,d){if(o&1&&u(0),o&2){let i=d.item;B(" ",i.Name," - ",i.Code," ")}}function ri(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r().$implicit,t=r(2);a(),B("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ai(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.NameAndUnitFactor," ")}}function li(o,d){if(o&1&&(c(0,"span",100),u(1),l()),o&2){let i=r().$implicit;a(),g(i.Price)}}function ci(o,d){if(o&1){let i=b();c(0,"input",102),f("change",function(){_(i);let e=r(3);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(3);return p(e.CalcInvoice())}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Price,e)||(n.Price=e),p(e)}),l()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;V("id","Price",e,""),V("name","Price",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.Price)}}function si(o,d){if(o&1){let i=b();c(0,"td",79)(1,"div",88)(2,"button",89),f("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","+",e),p(n.Discount("DiscountRate",e))}),T(3,"i",75),l(),c(4,"div",90)(5,"span",86),u(6),I(7,"translate"),l(),c(8,"input",103),f("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.DiscountRate,e)||(n.DiscountRate=e),p(e)}),l()(),c(9,"button",92),f("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","-",e),p(n.Discount("DiscountRate",e))}),c(10,"i",93),u(11," - "),l()()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(2),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),a(4),g(h(7,9,"SaleInvoice.DiscountRate")),a(2),V("id","DiscountRate",e,""),V("name","DiscountRate",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.DiscountRate),a(),m("disabled",t.ProductId<=0||t.ProductUnitId<=0)}}function _i(o,d){if(o&1){let i=b();c(0,"td",79)(1,"div",98)(2,"span",99),u(3),I(4,"translate"),l(),c(5,"input",102),f("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Discount,e)||(n.Discount=e),p(e)}),l()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(3),g(h(4,7,"SaleInvoice.Discount")),a(2),V("id","Discount",e,""),V("name","Discount",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.Discount)}}function pi(o,d){if(o&1){let i=b();c(0,"tr")(1,"td",72)(2,"div",73)(3,"button",74),f("click",function(){_(i);let e=r(2);return p(e.AppendRow())}),T(4,"i",75),l(),c(5,"span",76),u(6),l(),c(7,"button",77),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.RemoveRow(e))}),T(8,"i",78),l()()(),c(9,"td",79)(10,"span",80),u(11),I(12,"translate"),l(),c(13,"div",81)(14,"ng-select",82,6),I(16,"translate"),f("clear",function(){let e=_(i).$implicit;return p(e.Items=[])})("focus",function(){let e=_(i).rowIndex,n=C(15),s=r(2);return s.ChangeSearchApiDetails("Items",n,e),p(s._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=C(15),s=r(2);return s.ChangeSearchApiDetails("Items",n,e),p(s._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=C(15),s=r(2);return p(s.ChangeSearchApiDetails("Items",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,s=e.rowIndex,v=C(15);return r(2).SelectItem(n.ProductId,s),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductId,e)||(n.ProductId=e),p(e)}),S(17,ni,2,2,"ng-template",26)(18,oi,1,2,"ng-template",27),l(),c(19,"button",83),f("click",function(){let e=_(i).rowIndex,n=r(2),s=C(6);return p(n.ProductBalance(e,s))}),T(20,"i",84),l()()(),c(21,"td",85)(22,"span",86),u(23),I(24,"translate"),l(),c(25,"ng-select",87,7),I(27,"translate"),f("clear",function(){let e=_(i).$implicit;return p(e.ProductUnits=[])})("focus",function(){let e=_(i).rowIndex,n=C(26),s=r(2);return s.ChangeSearchApiDetails("ItemUnits",n,e),p(s._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=C(26),s=r(2);return s.ChangeSearchApiDetails("ItemUnits",n,e),p(s._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=C(26),s=r(2);return p(s.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,s=e.rowIndex,v=C(26);return r(2).SelectUnit(n.ProductUnitId,s),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductUnitId,e)||(n.ProductUnitId=e),p(e)}),S(28,ri,2,2,"ng-template",26)(29,ai,1,1,"ng-template",27),l()(),c(30,"td",79)(31,"div",88)(32,"button",89),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","+",e))}),T(33,"i",75),l(),c(34,"div",90)(35,"span",86),u(36),I(37,"translate"),l(),c(38,"input",91),f("change",function(){_(i);let e=r(2);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(2);return p(e.CalcInvoice())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.Quantity,e)||(n.Quantity=e),p(e)}),l()(),c(39,"button",92),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","-",e))}),c(40,"i",93),u(41," - "),l()()()(),c(42,"td",79)(43,"div",94)(44,"span",86),u(45),I(46,"translate"),l(),S(47,li,2,1,"span",95)(48,ci,1,6,"input",96),l()(),S(49,si,12,11,"td",97)(50,_i,6,9,"td",97),c(51,"td",79)(52,"div",98)(53,"span",99),u(54),I(55,"translate"),l(),c(56,"span",100),u(57),l()()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);a(6),g(t+1),a(),m("disabled",e.Invoice.InvoiceDetails.length==1),a(4),g(h(12,36,"SaleInvoice.Name")),a(3),V("placeholder","  ",h(16,38,"SaleInvoice.ChooseProduct"),""),m("dropdownPosition",t>1?"top":"bottom")("items",i.Items)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductId),a(5),m("disabled",e._AppModeService.DisabledButton||i.ProductId==null),a(4),g(h(24,40,"Item.ItemUnit")),a(2),V("placeholder","  ",h(27,42,"Item.ItemUnit"),""),m("dropdownPosition",t>1?"top":"bottom")("items",i.ProductUnits)("disabled",i.ProductId==0||i.ProductId==null)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductUnitId),a(7),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),a(4),g(h(37,44,"SaleInvoice.Quantity")),a(2),V("id","Quantity",t,""),V("name","Quantity",t,""),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),w("ngModel",i.Quantity),a(),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),a(6),g(h(46,46,"SaleInvoice.Price")),a(2),m("ngIf",e.ScreenName=="SaleInvoice"),a(),m("ngIf",e.ScreenName!="SaleInvoice"),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate==!1),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscount==!1),a(4),g(h(55,48,"SaleInvoice.TotalPriceAfterDiscount")),a(3),g(i.TotalPriceAfterDiscount.toFixed(2))}}function di(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(2);a(),B("Loaded ",i.ItemsBarCode.length," of ",i._SharedObjectModelService.TotalItems,"")}}function mi(o,d){if(o&1&&u(0),o&2){let i=d.item;B(" ",i.Name," - ",i.Code," ")}}function ui(o,d){if(o&1){let i=b();c(0,"div",104)(1,"span",105),u(2),I(3,"translate"),l(),c(4,"input",106),f("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscountRate,e)||(n.GlobalDiscountRate=e),p(e)}),l()()}if(o&2){let i=r(2);a(2),D("",h(3,2,"SaleInvoice.DiscountRate")," %"),a(2),w("ngModel",i.GlobalDiscountRate)}}function vi(o,d){if(o&1){let i=b();c(0,"div",104)(1,"span",105),u(2),I(3,"translate"),l(),c(4,"input",107),f("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscount,e)||(n.GlobalDiscount=e),p(e)}),l()()}if(o&2){let i=r(2);a(2),D(" ",h(3,2,"SaleInvoice.Discount"),""),a(2),w("ngModel",i.GlobalDiscount)}}function Ii(o,d){o&1&&(c(0,"label",32),u(1),I(2,"translate"),l()),o&2&&(a(),g(h(2,1,"Table.DocDate")))}function hi(o,d){if(o&1&&(c(0,"span",68),u(1),I(2,"date"),l()),o&2){let i=r(2);a(),D(" ",H(2,1,i.Invoice.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function gi(o,d){if(o&1){let i=b();c(0,"p-calendar",108),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.DocDate,e)||(n.Invoice.DocDate=e),p(e)}),l()}if(o&2){let i=r(2);w("ngModel",i.Invoice.DocDate),m("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function fi(o,d){if(o&1){let i=b();c(0,"button",112),f("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.Storage))}),T(1,"i",113),l()}}function Si(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(3);a(),B("Loaded ",i.StoreArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function xi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function yi(o,d){if(o&1){let i=b();c(0,"div",35)(1,"div",109)(2,"p",66),u(3),I(4,"translate"),l(),S(5,fi,2,0,"button",110),l(),c(6,"ng-select",111,8),f("clear",function(){_(i);let e=r(2);return p(e.StoreArr=[])})("focus",function(){_(i);let e=C(7),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(7),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(7),n=r(2);return p(n.ChangeSearchApi("Storages",e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.StoreId,"Store"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.StoreId,e)||(n.Invoice.StoreId=e),p(e)}),S(8,Si,2,2,"ng-template",26)(9,xi,1,1,"ng-template",27),l()()}if(o&2){let i=r(2);a(3),g(h(4,8,"BuyInvoice.Storage")),a(2),m("ngIf",i.ScreenName=="BuyInvoice"),a(),m("items",i.StoreArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.StoreId)}}function Ci(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(3);a(),B("Loaded ",i.SupplierArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ti(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function bi(o,d){if(o&1){let i=b();c(0,"div",114)(1,"div",109)(2,"p",115),u(3),I(4,"translate"),l(),c(5,"button",112),f("click",function(){_(i);let e=r(2);return p(e.SecoundScreen(e.EnumScreen.Supplier))}),T(6,"i",113),l()(),c(7,"ng-select",116,9),f("clear",function(){_(i);let e=r(2);return p(e.SupplierArr=[])})("focus",function(){_(i);let e=C(8),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(8),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(8),n=r(2);return p(n.ChangeSearchApi("Suppliers",e))})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.SupplierId,"Supplier"))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.SupplierId,e)||(n.Invoice.SupplierId=e),p(e)}),S(9,Ci,2,2,"ng-template",26)(10,Ti,1,1,"ng-template",27),l()()}if(o&2){let i=r(2);m("ngClass",i.ScreenName=="BuyOffer"?"col-lg-12":""),a(3),g(h(4,8,"BuyOffer.Supplier")),a(4),m("items",i.SupplierArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.SupplierId)}}function Di(o,d){if(o&1){let i=b();c(0,"input",119),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientName,e)||(n.Invoice.ClientName=e),p(e)}),l()}if(o&2){let i=r(3);m("disabled",!0),w("ngModel",i.Invoice.ClientName)}}function wi(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(4);a(),B("Loaded ",i.ClientArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ai(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Ni(o,d){if(o&1){let i=b();c(0,"ng-select",120,10),f("clear",function(){_(i);let e=r(3);return p(e.ClientArr=[])})("focus",function(){_(i);let e=C(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=C(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("scrollToEnd",function(){_(i);let e=C(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.ClientId,"Client"))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientId,e)||(n.Invoice.ClientId=e),p(e)}),S(2,wi,2,2,"ng-template",26)(3,Ai,1,1,"ng-template",27),l()}if(o&2){let i=r(3);m("items",i.ClientArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.ClientId)}}function Pi(o,d){if(o&1){let i=b();c(0,"div",114)(1,"div",109)(2,"p",115),u(3),I(4,"translate"),l(),c(5,"button",112),f("click",function(){_(i);let e=r(2);return p(e.SecoundScreen(e.EnumScreen.Client))}),T(6,"i",113),l()(),S(7,Di,1,2,"input",117)(8,Ni,4,6,"ng-select",118),l()}if(o&2){let i=r(2);m("ngClass",i.ScreenName=="SaleOffer"?"col-lg-12":""),a(3),g(h(4,4,"SaleOffer.Client")),a(4),m("ngIf",i.Invoice.ClientType==1),a(),m("ngIf",i.Invoice.ClientType==2)}}function Mi(o,d){if(o&1){let i=b();c(0,"div",121)(1,"div",122)(2,"div",123)(3,"label",124),u(4),I(5,"translate"),l(),c(6,"div",125)(7,"input",126),f("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(1))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),l()()()(),c(8,"div",122)(9,"div",123)(10,"label",127),u(11),I(12,"translate"),l(),c(13,"div",125)(14,"input",128),f("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(2))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),l()()()()()}if(o&2){let i=r(2);a(4),D(" ",h(5,8,"SaleInvoice.Window")," "),a(3),w("ngModel",i.Invoice.ClientType),m("checked",i.Invoice.ClientType==1)("value",1),a(4),D(" ",h(12,10,"SaleInvoice.Always")," "),a(3),m("value",2)("checked",i.Invoice.ClientType==2),w("ngModel",i.Invoice.ClientType)}}function Vi(o,d){if(o&1&&(c(0,"div",129)(1,"div",130)(2,"p",131),u(3),I(4,"translate"),l(),T(5,"input",132),l(),c(6,"div",130)(7,"p",131),u(8),I(9,"translate"),l(),T(10,"input",133),l()()),o&2){let i=r(2);a(3),g(h(4,6,"NetThamBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetThamBranch),a(3),g(h(9,8,"NetOtherBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetOtherBranch)}}function Bi(o,d){o&1&&(c(0,"option",137),u(1),I(2,"translate"),l()),o&2&&(m("value",3),a(),g(h(2,2,"SaleInvoice.Delivery")))}function Ei(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(4);a(),B("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ri(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function ki(o,d){if(o&1){let i=b();c(0,"div",34)(1,"div",35)(2,"p",131),u(3),I(4,"translate"),l(),c(5,"input",144),I(6,"translate"),f("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Cash,e)||(n.Invoice.Cash=e),p(e)}),l()(),c(7,"div",35)(8,"div",109)(9,"p",115),u(10),I(11,"translate"),l(),c(12,"button",145),f("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.Treasury))}),T(13,"i",113),l()(),c(14,"ng-select",146,11),f("clear",function(){_(i);let e=r(3);return p(e.TreasuryArr=[])})("focus",function(){_(i);let e=C(15),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(15),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(15),n=r(3);return p(n.ChangeSearchApi("Treasury",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.TreasuryId,"Treasury"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.TreasuryId,e)||(n.Invoice.TreasuryId=e),p(e)}),S(16,Ei,2,2,"ng-template",26)(17,Ri,1,1,"ng-template",27),l()()()}if(o&2){let i=r(3);a(3),g(h(4,12,"BuyInvoice.Cash")),a(2),E("placeholder",h(6,14,"SaleInvoice.Cash")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Cash),a(5),g(h(11,16,"BuyInvoice.Treasury")),a(4),m("items",i.TreasuryArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Cash==""||i.Invoice.Cash==0),w("ngModel",i.Invoice.TreasuryId)}}function Oi(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(4);a(),B("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ui(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function ji(o,d){if(o&1){let i=b();c(0,"div",34)(1,"div",35)(2,"p",131),u(3),I(4,"translate"),l(),c(5,"input",147),I(6,"translate"),f("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Visa,e)||(n.Invoice.Visa=e),p(e)}),l()(),c(7,"div",35)(8,"div",109)(9,"p",115),u(10),I(11,"translate"),l(),c(12,"button",112),f("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.BankAccount))}),T(13,"i",113),l()(),c(14,"ng-select",148,12),f("clear",function(){_(i);let e=r(3);return p(e.BankAccountArr=[])})("focus",function(){_(i);let e=C(15),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(15),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(15),n=r(3);return p(n.ChangeSearchApi("BankAccounts",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.BankAccountId,"BankAccount"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.BankAccountId,e)||(n.Invoice.BankAccountId=e),p(e)}),S(16,Oi,2,2,"ng-template",26)(17,Ui,1,1,"ng-template",27),l()()()}if(o&2){let i=r(3);a(3),g(h(4,11,"BuyInvoice.Visa")),a(2),E("placeholder",h(6,13,"SaleInvoice.Visa")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Visa),a(5),g(h(11,15,"BuyInvoice.Bank")),a(4),m("items",i.BankAccountArr)("dropdownPosition","top")("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Visa==""||i.Invoice.Visa==0),w("ngModel",i.Invoice.BankAccountId)}}function Fi(o,d){if(o&1&&(c(0,"small",101),u(1),l()),o&2){let i=r(4);a(),B("Loaded ",i.EmployeeArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Gi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Wi(o,d){if(o&1){let i=b();c(0,"div",149)(1,"p",150),u(2),I(3,"translate"),l(),c(4,"ng-select",151,13),f("clear",function(){_(i);let e=r(3);return p(e.EmployeeArr=[])})("focus",function(){_(i);let e=C(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(5),n=r(3);return p(n.ChangeSearchApi("Employee",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.EmployeeId,"Employee"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.EmployeeId,e)||(n.Invoice.EmployeeId=e),p(e)}),S(6,Fi,2,2,"ng-template",26)(7,Gi,1,1,"ng-template",27),l()()}if(o&2){let i=r(3);a(2),g(h(3,7,"BuyReport.Employee")),a(2),m("items",i.EmployeeArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.EmployeeId)}}function Li(o,d){o&1&&(c(0,"p",131),u(1),I(2,"translate"),l()),o&2&&(a(),g(h(2,1,"BuyInvoice.Debt")))}function Hi(o,d){if(o&1&&T(0,"input",152),o&2){let i=r(3);E("value",i.Invoice.Debt),m("disabled",!0)}}function $i(o,d){if(o&1){let i=b();c(0,"div",134)(1,"div",135)(2,"p",131),u(3),I(4,"translate"),l(),c(5,"select",136),f("change",function(){_(i);let e=r(2);return p(e.ChangePamentType(e.Invoice.PaymentType))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.PaymentType,e)||(n.Invoice.PaymentType=e),p(e)}),c(6,"option",137),u(7),I(8,"translate"),l(),c(9,"option",137),u(10),I(11,"translate"),l(),S(12,Bi,3,4,"option",138),l()(),S(13,ki,18,18,"div",139)(14,ji,18,17,"div",139)(15,Wi,8,9,"div",140),c(16,"div",141),S(17,Li,3,3,"p",142)(18,Hi,1,2,"input",143),l()()}if(o&2){let i=r(2);a(3),g(h(4,12,"BuyInvoice.PamentType")),a(2),w("ngModel",i.Invoice.PaymentType),a(),m("value",1),a(),g(h(8,14,"SaleInvoice.Cash")),a(2),m("value",2),a(),g(h(11,16,"SaleInvoice.Debt")),a(2),m("ngIf",i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType==3),a(2),m("ngIf",i.Invoice.PaymentType==2),a(),m("ngIf",i.Invoice.PaymentType==2&&i.Invoice.Debt!=null)}}function Qi(o,d){if(o&1&&(c(0,"div",47)(1,"span",153),u(2),I(3,"translate"),l(),c(4,"span",49),u(5),l()()),o&2){let i=r(2);a(2),g(h(3,2,"SaleInvoice.TotalDiscount")),a(3),g(i.Invoice.TotalDisc.toFixed(2))}}function zi(o,d){if(o&1&&(c(0,"div",47)(1,"span",154),u(2),I(3,"translate"),l(),c(4,"span",49),u(5),l()()),o&2){let i=r(2);a(2),D("",h(3,2,"SaleInvoice.DiscountRate"),"%"),a(3),g(i.Invoice.TotalDiscRate.toFixed(2))}}function Ji(o,d){if(o&1&&(c(0,"span"),u(1),l()),o&2){let i=r(2);a(),D(" ",i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.Vat,"% ")}}function Ki(o,d){if(o&1&&(c(0,"span"),u(1),l()),o&2){let i=r(2);a(),D(" ",i.Invoice.TotalVatRate.toFixed(2),"% ")}}function qi(o,d){if(o&1&&(c(0,"div",54)(1,"span",155),u(2),I(3,"translate"),l(),c(4,"span",49),u(5),l()()),o&2){let i=r(2);a(2),g(h(3,2,"BuyInvoice.ReturnAmount")),a(3),g(i._SharedObjectModelService.ReturnAmount.toFixed(2))}}function Zi(o,d){if(o&1){let i=b();c(0,"button",156),f("click",function(){_(i);let e=r(2);return p(e.Save())}),u(1),I(2,"translate"),c(3,"span",63),u(4,"Ctrl + Space"),l(),T(5,"i",157),l()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Save")," ")}}function Xi(o,d){if(o&1){let i=b();c(0,"button",159),f("click",function(){_(i);let e=r(3);return p(e.Save())}),u(1),I(2,"translate"),c(3,"span",63),u(4,"Ctrl + Space"),l()()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Update")," ")}}function Yi(o,d){if(o&1&&(c(0,"span"),S(1,Xi,5,4,"button",158),l()),o&2){let i=r(2);a(),m("ngIf",i.Invoice.Id!=0)}}function en(o,d){if(o&1){let i=b();c(0,"button",160),f("click",function(){_(i);let e=r(2);return p(e.OpenGl())}),u(1),I(2,"translate"),l()}o&2&&(a(),D(" ",h(2,1,"Model.Gl")," "))}function tn(o,d){if(o&1){let i=b();c(0,"button",161),f("click",function(){_(i);let e=r(2);return p(e.HoldInvoice())}),u(1," \u062A\u0639\u0644\u064A\u0642 Hold "),c(2,"span",63),u(3,"Ctrl + X"),l()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function nn(o,d){if(o&1){let i=b();c(0,"button",162),f("click",function(){_(i);let e=r(2);return p(e.ShowHoldInvoice())}),u(1," \u0639\u0631\u0636 Hold "),c(2,"span",63),u(3,"Ctrl + Z"),l()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function on(o,d){if(o&1){let i=b();T(0,"app-modal-header",17),c(1,"div",18)(2,"div",19)(3,"p-table",20),S(4,ii,31,17,"ng-template",21)(5,pi,58,50,"ng-template",22),l()()(),c(6,"div",23)(7,"div",24)(8,"ng-select",25,5),f("clear",function(){_(i);let e=r();return p(e.ItemsBarCode=[])})("focus",function(){_(i);let e=C(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(9),n=r();return p(n.HandleProductCode(e))})("close",function(){_(i);let e=r();return e._AppModeService.ResetCurrentPage(),p(e.ItemsBarCode=[])})("open",function(){_(i);let e=r();return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=C(9),n=r();return n.SelectProductScan(n.ProductBarCodeId),e.handleClearClick(),e.blur(),p(n.ItemsBarCode=[])}),N("ngModelChange",function(e){_(i);let n=r();return A(n.ProductBarCodeId,e)||(n.ProductBarCodeId=e),p(e)}),S(10,di,2,2,"ng-template",26)(11,mi,1,2,"ng-template",27),l()(),c(12,"div",28),S(13,ui,5,4,"div",29)(14,vi,5,4,"div",29),l()(),c(15,"div",30)(16,"div",31)(17,"label",32),u(18),I(19,"translate"),l(),T(20,"input",33),l(),c(21,"div",34)(22,"div",35)(23,"label",36),u(24),I(25,"translate"),l(),c(26,"input",37),N("ngModelChange",function(e){_(i);let n=r();return A(n.Invoice.Notes,e)||(n.Invoice.Notes=e),p(e)}),l()(),c(27,"div",35),S(28,Ii,3,3,"label",38)(29,hi,3,4,"span",39)(30,gi,1,5,"p-calendar",40),l()(),c(31,"div",34),S(32,yi,10,10,"div",41)(33,bi,11,10,"div",42)(34,Pi,9,6,"div",42),l(),S(35,Mi,15,12,"div",43)(36,Vi,11,10,"div",44)(37,$i,19,18,"div",45),l(),c(38,"div",46)(39,"div",47)(40,"span",48),u(41),I(42,"translate"),l(),c(43,"span",49),u(44),l()(),c(45,"div",47)(46,"span",48),u(47),I(48,"translate"),l(),c(49,"span",49),u(50),l()(),S(51,Qi,6,4,"div",50)(52,zi,6,4,"div",50),c(53,"div",51)(54,"span",52),u(55),I(56,"translate"),S(57,Ji,2,1,"span",53)(58,Ki,2,1,"span",53),l(),c(59,"span",49),u(60),l()(),c(61,"div",54)(62,"span",55),u(63),I(64,"translate"),l(),c(65,"span",49),u(66),l()(),S(67,qi,6,4,"div",56),l(),c(68,"div",57),S(69,Zi,6,4,"button",58)(70,Yi,2,1,"span",53)(71,en,3,3,"button",59)(72,tn,4,1,"button",60)(73,nn,4,1,"button",61),c(74,"button",62),f("click",function(){let e=_(i).$implicit,n=r();return e.close("Close click"),p(n.ResetPage())}),u(75),I(76,"translate"),c(77,"span",63),u(78,"Esc"),l()()()}if(o&2){let i=r();m("PageTitle",i.PageTitle),a(3),m("value",i.Invoice.InvoiceDetails)("scrollable",!0),a(5),m("items",i.ItemsBarCode)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductBarCodeId),a(5),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(4),g(h(19,42,"Table.DocNo")),a(2),m("value",i.Invoice.DocNo)("disabled",!0),a(4),g(h(25,44,"Table.Notes")),a(2),w("ngModel",i.Invoice.Notes),a(2),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(2),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"&&i._DefaultSettingsService.DefaultSettings.HideSorage==!1),a(),m("ngIf",i.ScreenName=="BuyOffer"||i.ScreenName=="BuyInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(4),g(h(42,46,"ProductCount")),a(3),g(i.Invoice.InvoiceDetails.length),a(3),g(h(48,48,"SaleInvoice.TotalInvoice")),a(3),g(i.Invoice.TotalInvoice.toFixed(2)),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(3),D("",h(56,50,"SaleInvoice.TotalVat")," "),a(2),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i.Invoice.Id>0),a(2),g(i.Invoice.TotalInvoiceVatAmount.toFixed(2)),a(3),g(h(64,52,"SaleInvoice.TotalAfterVat")),a(3),g(i.Invoice.TotalInvoiceAfterVat.toFixed(2)),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i._Apiservice.environment.SystemUpdate&&(i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice")||i.ScreenName!="BuyInvoice"&&i.ScreenName!="SaleInvoice"),a(),m("ngIf",i.Invoice.Id>0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),D(" ",h(76,54,"Model.Close")," ")}}function rn(o,d){if(o&1){let i=b();c(0,"app-table",163),f("ShowToEditeEvent",function(){let e=_(i).$implicit,n=r();return p(n.GetSaleHold(e))}),l(),c(1,"div",57)(2,"button",62),f("click",function(){let e=_(i).$implicit;return p(e.close("Close click"))}),u(3),I(4,"translate"),l()()}if(o&2){let i=r();m("PageTitle","SaleInvoice.AllHold")("TablePaging",i.OutTablePaging)("GetById","HoldInvoiceEP/GetById")("DeleteUrl","HoldInvoiceEP/Delete"),a(3),g(h(4,5,"Model.Close"))}}function an(o,d){if(o&1&&(c(0,"tr")(1,"td")(2,"span",167),u(3),l()(),c(4,"td")(5,"span",167),u(6),l()()()),o&2){let i=d.$implicit;a(3),g(i.Name+" - "+i.UnitFactor),a(3),g(i.Qty)}}function ln(o,d){if(o&1&&(c(0,"div",164)(1,"table",165)(2,"thead")(3,"tr")(4,"th"),u(5),I(6,"translate"),l(),c(7,"th"),u(8),I(9,"translate"),l()()(),c(10,"tbody"),S(11,an,7,2,"tr",166),l()()()),o&2){let i=r();a(5),g(h(6,3,"SaleInvoice.Name")),a(3),g(h(9,5,"Table.Balance")),a(3),m("ngForOf",i.ItemBalanceList)}}function cn(o,d){if(o&1){let i=b();c(0,"app-dynamic-modal",168),f("CloseParentModel",function(){let e=_(i).$implicit,n=r();return e.close("model close"),p(n.ResetSharedScreen())}),l()}if(o&2){let i=r();m("PageTitle",i.SharedScreen.PageTitle)("DataView",i.SharedScreen.DataView)("AddUrl",i.SharedScreen.AddUrl)("UpdateUrl",i.SharedScreen.UpdateUrl)("DeleteUrl",i.SharedScreen.DeleteUrl)("NotInsertTablePaging",!0)("GetById",i.SharedScreen.GetById)}}var to=(()=>{let d=class d{constructor(t,e,n,s,v,y,x){this._SharedScreenService=t,this._ScaleSettingsService=e,this._ActivatedRoute=n,this._SharedObjectModelService=s,this._DefaultSettingsService=v,this._AppModeService=y,this._Apiservice=x,this.SignalR=!1,this.GlResponse=!1,this.TablePaging={},this.OutTablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.SupplierArr=[],this.ClientArr=[],this.TreasuryArr=[],this.BankAccountArr=[],this.EmployeeArr=[],this.StoreArr=[],this.ItemBalanceList=[],this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this.ItemsBarCode=[],this.ProductBarCodeId=null,this.Weight="",this.SharedScreen={AddUrl:"",DataView:[],DeleteUrl:"",PageTitle:"",TablePaging:{},UpdateUrl:"",GetById:""},this.EnumScreen={None:0,Client:1,Supplier:2,Treasury:3,BankAccount:4,Storage:5}}ngOnChanges(){let t=Number(this._ActivatedRoute.snapshot.queryParams.Id);t>0&&this.GetByIdRoute(t)}ngOnInit(){this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}StartConnection(){this.Hub_Connection=new it().withUrl(`${Se.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:tt.WebSockets}).build(),this.Hub_Connection.start().then(()=>{}).catch(t=>{console.log("Error Hub Connection",t)})}ServerListener(){this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this._SharedObjectModelService.Paging.DataReturn=this._SharedObjectModelService.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}GetPageInfo(){this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:t=>{t.IsSuccess==!0&&t.Obj!=null?(this.Invoice.DocNo=t.Obj,this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(t.Message)},error:t=>{this._AppModeService.DisabledButton=!1}})}OpenModal(){this._AppModeService.DisabledButton=!0,this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ChangeSearchApi(t,e){let n="";n=`${e.searchTerm}`.trim(),(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let s={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Storages"&&(s.BranchFilter=!0),t=="Treasury"&&(s.BranchFilter=!0),t=="Items"&&(s.Columns=["Id","Name","Code"],s.SearchField="Code"),this._Apiservice.post("Global/GetAll",s,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?this.HandleResponse(v.Obj,t):this._AppModeService._Toastr.error(v.Message)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Suppliers"&&(this.SupplierArr=this._SharedObjectModelService.RemoveDuplicates(this.SupplierArr.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ClientArr=this._SharedObjectModelService.RemoveDuplicates(this.ClientArr.concat(t.DataReturn),"Id")),e=="Storages"&&(this.StoreArr=this._SharedObjectModelService.RemoveDuplicates(this.StoreArr.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id")),e=="Employee"&&(this.EmployeeArr=this._SharedObjectModelService.RemoveDuplicates(this.EmployeeArr.concat(t.DataReturn),"Id")),e=="Items"&&(this.ItemsBarCode=this._SharedObjectModelService.RemoveDuplicates(this.ItemsBarCode.concat(t.DataReturn),"Id").map(n=>k(R({},n),{NameAndCode:n.Code!=null?`${n.Name} - ${n.Code}`:`${n.Name}`})))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Supplier"&&(n=this.SupplierArr),e=="Client"&&(n=this.ClientArr),e=="Store"&&(n=this.StoreArr),e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr),e=="Employee"&&(n=this.EmployeeArr);let s=n.find(v=>v.Id==t);if(s==null){this._AppModeService.DontPlay();return}else this.Invoice[`${e}Id`]=t,this.Invoice[`${e}Name`]=s.Name,e=="Supplier"&&this.GetNetSupplier(t),e=="Client"&&this.GetNetClient(t)}else this.Invoice[`${e}Id`]=null,this.Invoice[`${e}Name`]="",(e=="Supplier"||e=="Client")&&(this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0})}HandleProductCode(t){let e="";if(e=`${t.searchTerm}`.trim(),e=="null"&&(t.searchTerm="",e="",t.searchTerm=e),e!=""){for(let n=0;n<this._ScaleSettingsService.ScaleSettingsArr.length;n++){let s=this._ScaleSettingsService.ScaleSettingsArr[n];if(e.length==s.BarCodeLength&&e.startsWith(s.ZaraNumber)){let v=e.substring(s.ZaraNumber.length,s.BarCodeLength).substring(0,s.ProductCodeLength);this.Weight=e.substring(s.ZaraNumber.length).substring(s.ProductCodeLength);let y=Number(this.Weight.substring(0,2)),x=Number(this.Weight.substring(2,this.Weight.length));this.Weight=`${y}.${x}`,t.searchTerm=v,this.ChangeSearchApi("Items",t);break}}return}else this.ChangeSearchApi("Items",t)}SelectProductScan(t){if(t!=null&&t>0){let e=this.ItemsBarCode.find(v=>v.Id==t),n=this.Invoice.InvoiceDetails.findIndex(v=>v.ProductId===null),s=this.Invoice.InvoiceDetails[n];if(s!=null)s.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],s.ProductId=t,this.AfterSelectem(t,n);else{this.AppendRow();let v=this.Invoice.InvoiceDetails.findIndex(x=>x.ProductId===null),y=this.Invoice.InvoiceDetails[v];y.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],y.ProductId=t,this.AfterSelectem(t,v)}this.ItemsBarCode=[],this.ProductBarCodeId=null}}ChangeSearchApiDetails(t,e,n){let s=`${e.searchTerm}`.trim();(s==""||s=="null")&&(e.searchTerm="",s="");let v="";this.ScreenName=="BuyInvoice"&&t=="Items"&&(v="ProductType != 2"),this.ScreenName=="SaleInvoice"&&this._DefaultSettingsService.DefaultSettings.HideSorage==!0&&t=="Items"&&(v="ProductType = 2"),this._AppModeService.CurrentPage+=1;let y={TableName:t,Columns:["Id","Name"],Conditions:v,PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:s,SearchField:"Name"};if(t=="Items"&&(y.Columns=["Id","Name","Code"],y.ItemWithItemUnit=!0),t=="ItemUnits"){let x=this.Invoice.InvoiceDetails[n].ProductId==null?0:this.Invoice.InvoiceDetails[n].ProductId;y.Conditions=`ItemId = ${x}`,y.Join=!0,y.JoinTables=["Units U"],y.NoPaging=!0,y.JoinConditions=["T.UnitId = U.Id"],y.Columns=["T.Id","U.Name","T.UnitFactor"],y.SearchField="U.Name"}this._Apiservice.post("Global/GetAll",y,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:x=>{x.IsSuccess==!0&&x.Obj!=null?this.HandleResponseDetails(x.Obj,t,n):this._AppModeService._Toastr.error(x.Message)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Items"&&(this.Invoice.InvoiceDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.Invoice.InvoiceDetails[n].Items.concat(t.DataReturn),"Id"),this.Invoice.InvoiceDetails[n].Items=this.Invoice.InvoiceDetails[n].Items.map(s=>k(R({},s),{NameAndCode:s.Code!=null?`${s.Name} - ${s.Code}`:`${s.Name}`}))),e=="ItemUnits"&&(this.Invoice.InvoiceDetails[n].ProductUnits=t.DataReturn.map(s=>k(R({},s),{NameAndUnitFactor:s.UnitFactor!=null?`${s.Name} - ${s.UnitFactor}`:`${s.Name}`})))}AppendRow(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};this.Invoice.InvoiceDetails.push(t),this._AppModeService.AppendTd()}RemoveRow(t){return this.Invoice.InvoiceDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorFirstRow")),!1):(this.Invoice.InvoiceDetails.splice(t,1),this.CalcInvoice(),!0)}SelectItem(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].Items.find(s=>s.Id==t);if(n!=null)this.Invoice.InvoiceDetails[e].ProductId=n.Id,this.Invoice.InvoiceDetails[e].ProductName=n.Name,this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.AfterSelectem(n.Id,e);else{this._Apiservice.DontPlay();return}}else this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}AfterSelectem(t,e){if(t>0){let n={TableName:"ItemUnits",Columns:["Id","Name"],NoPaging:!0,SearchText:"",SearchField:"Name"};n.Conditions=`ItemId = ${t}`,n.Join=!0,n.JoinTables=["Units U"],n.JoinConditions=["T.UnitId = U.Id"],n.Columns=["T.Id","U.Name","T.UnitFactor","T.DefaultUnit"],n.SearchField="U.Name",this._Apiservice.post("Global/GetAll",n,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:s=>{if(s.IsSuccess==!0&&s.Obj!=null){s.Obj.DataReturn=s.Obj.DataReturn.map(x=>k(R({},x),{NameAndUnitFactor:x.UnitFactor!=null?`${x.Name} - ${x.UnitFactor}`:`${x.Name}`}));let v=s.Obj.DataReturn,y=v.find(x=>x.DefaultUnit==!0);if(y&&this.Invoice.InvoiceDetails.find(P=>P.ProductId==t&&P.ProductUnitId==y.Id)==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:y.Id,NameAndUnitFactor:y.Name+" - "+y.UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=y.Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(y.Id,e):this.ChangeGlobalDis("");return}for(let x=0;x<v.length;x++){let P=this.Invoice.InvoiceDetails.find(F=>F.ProductId==t&&F.ProductUnitId==v[x].Id);if(P==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:v[x].Id,NameAndUnitFactor:v[x].Name+" - "+v[x].UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=v[x].Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(v[x].Id,e):this.ChangeGlobalDis("");break}P!=null&&x==v.length-1&&this.Invoice.InvoiceDetails.splice(e,1)}this.CalcInvoice()}else this._AppModeService._Toastr.error(s.Message)}})}}SelectUnit(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].ProductUnits.find(s=>s.Id==t);if(n!=null){if(this.Invoice.InvoiceDetails[e].ProductUnitId=n.Id,this.Invoice.InvoiceDetails[e].ProductUnitName=n.Name,this.ScreenName=="SaleInvoice"){this._AppModeService.DisabledButton=!0;let s={ProductId:this.Invoice.InvoiceDetails[e].ProductId,ProductUnitId:n.Id};this._Apiservice.post("ItemEP/ProductPice",s,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this.Invoice.InvoiceDetails[e].Price=v.Obj,this.ChangeGlobalDis(""),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(v.Message))},error:v=>{this._AppModeService.DisabledButton=!1},complete:()=>{this._AppModeService.DisabledButton=!1}})}}else{this._Apiservice.DontPlay();return}}else this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}ProductBalance(t,e){this._AppModeService.DisabledButton=!0;let n={ProductId:this.Invoice.InvoiceDetails[t].ProductId==null?0:this.Invoice.InvoiceDetails[t].ProductId,StoreId:this.Invoice.StoreId==null?0:this.Invoice.StoreId};this._Apiservice.post("ItemEP/ProductBalance",n,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:s=>{s.IsSuccess==!0&&s.Obj!=null?(this._AppModeService.DisabledButton=!1,this.ItemBalanceList=s.Obj.StorageBalance,this._AppModeService._NgbModal.open(e,{size:"xl",centered:!0})):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(s.Message))},error:s=>{this._AppModeService.DisabledButton=!1}})}ChangeClientType(t){this.Invoice.ClientId=null,this.Invoice.ClientName=" ",t==1&&(this.Invoice.ClientType=1,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),t==2&&(this.Invoice.ClientType=2),this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0}}Discount(t,e){let n=this.Invoice.InvoiceDetails[e];t=="DiscountRate"&&Number(n.DiscountRate)>0&&(n.Discount=""),t=="Discount"&&Number(n.Discount)>0&&(n.DiscountRate=""),(Number(n.DiscountRate)>100||Number(n.DiscountRate)<0)&&(n.DiscountRate=""),Number(n.Discount)<0&&(n.Discount=""),Number(n.Price)<0&&(n.Price=""),Number(n.Quantity)<0&&(n.Quantity=""),this.CalcInvoice()}ChangeGlobalDis(t){let e="",n="";if(t=="GlobalDiscountRate"&&(n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),this.GlobalDiscount="",e=""),t=="GlobalDiscount"&&(e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate="",n=""),t==""){n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate=n,this.GlobalDiscount=e,Number(e)==0&&Number(n)==0&&this.CalcInvoice();return}for(let s=0;s<this.Invoice.InvoiceDetails.length;s++)Number(this.Invoice.InvoiceDetails[s].ProductId)>0&&(this.Invoice.InvoiceDetails[s].Discount=e,this.Invoice.InvoiceDetails[s].DiscountRate=n);this.CalcInvoice()}Button(t,e,n){e=="+"&&this.Invoice.InvoiceDetails[n][`${t}`]++,e=="-"&&(this.Invoice.InvoiceDetails[n][`${t}`]=this.Invoice.InvoiceDetails[n][`${t}`]<=0?0:this.Invoice.InvoiceDetails[n][`${t}`]-1),this.CalcInvoice()}GetNetSupplier(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("SupplierEP/SupplierNetAmount",t,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)}})}GetNetClient(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("ClientEP/ClientNetAmount",t,!1).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)}})}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModelService.PageModel=e.Obj.model,this._SharedObjectModelService.Gl=e.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(e.Message)}})}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){this.Invoice={Id:t.Id,PaymentType:t.PaymentType,Name:t.Name,Notes:t.Notes,Code:t.Code,InvoiceCollection:t.InvoiceCollection,InvoiceCollected:t.InvoiceCollected,ClientType:t.ClientType,DocNo:t.DocNo,DocDate:new Date(t.DocDate),TotalInvoice:t.TotalInvoice,TotalDiscRate:t.TotalDiscRate,TotalDisc:t.TotalDisc,TotalInvoiceAfterDisc:t.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:t.TotalInvoiceAfterVat,TotalInvoiceVatAmount:t.TotalInvoiceVatAmount,TotalVatRate:t.TotalVatRate,Cash:t.Cash,Visa:t.Visa,Debt:t.Debt,SupplierId:t.SupplierId,SupplierName:t.SupplierName,ClientId:t.ClientId,ClientName:t.ClientName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,EmployeeId:t.EmployeeId,EmployeeName:t.EmployeeName,StoreId:t.StoreId,StoreName:t.StoreName,InvoiceDetails:t[`${this.ScreenName}Details`]},t.SupplierId>0&&(this.SupplierArr=[{Id:t.SupplierId,Name:t.SupplierName}]),t.ClientId>0&&(this.ClientArr=[{Id:t.ClientId,Name:t.ClientName}]),t.TreasuryId>0&&(this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName}]),t.BankAccountId>0&&(this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]),t.EmployeeId>0&&(this.EmployeeArr=[{Id:t.EmployeeId,Name:t.EmployeeName}]),t.StoreId>0&&(this.StoreArr=[{Id:t.StoreId,Name:t.StoreName}]);for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=this.Invoice.InvoiceDetails[e];n.Discount=n.Discount==0?"":n.Discount,n.DiscountRate=n.DiscountRate==0?"":n.DiscountRate,this.Invoice.InvoiceDetails[e].Items=[{Id:n.ProductId,Name:n.ProductName,NameAndCode:n.ProductName}],this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:n.ProductUnitId,Name:n.ProductUnitName,NameAndUnitFactor:n.ProductUnitName}]}this._AppModeService.DisabledButton=!1}TotalInvoiceVatAmount(){let t=0;for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=Number(this.Invoice.InvoiceDetails[e].Price),s=Number(this.Invoice.InvoiceDetails[e].Quantity),v=n*s,y=Number(this.Invoice.InvoiceDetails[e].Vat),x=Number(this.Invoice.InvoiceDetails[e].Discount),P=Number(this.Invoice.InvoiceDetails[e].DiscountRate);if(x>0&&(t+=(v-x)*(y/100)),P>0){let F=P/100*v;t+=(v-F)*(y/100)}x==0&&P==0&&(t+=v*(y/100))}return Number(t)}CalcInvoice(){this.Invoice.TotalDiscRate=0,this.Invoice.TotalInvoiceAfterDisc=0,this.Invoice.TotalInvoiceAfterVat=0,this.Invoice.TotalVatRate=0,this.Invoice.TotalDisc=0,this.Invoice.TotalInvoice=0,this.Invoice.TotalInvoiceVatAmount=0;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=Number(this.Invoice.InvoiceDetails[t].Price),n=Number(this.Invoice.InvoiceDetails[t].Quantity),s=Number(this.Invoice.InvoiceDetails[t].Discount),v=Number(this.Invoice.InvoiceDetails[t].DiscountRate),y=Number(this.Invoice.InvoiceDetails[t].Vat),x=e*n;this.Invoice.InvoiceDetails[t].TotalPrice=Number(x),this.Invoice.TotalInvoice+=Number(x),this.Invoice.InvoiceDetails[t].Discount=s==0?"":s;let P=0;v>0&&(P=v/100*x),s>0&&(P=s),this.Invoice.TotalDisc+=P,this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount=x-P,this.Invoice.InvoiceDetails[t].TotalPriceAfterVat=Number((e*n-P)*(y/100)+(e*n-P))}this.Invoice.TotalDiscRate=this.Invoice.TotalInvoice==0?0:Number(this.Invoice.TotalDisc/this.Invoice.TotalInvoice*100),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoice-this.Invoice.TotalDisc),this.Invoice.TotalInvoiceVatAmount=this.TotalInvoiceVatAmount(),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterDisc+this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=this.Invoice.TotalInvoiceAfterDisc==0?0:Number(this.Invoice.TotalInvoiceVatAmount/this.Invoice.TotalInvoiceAfterDisc*100),this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDiscRate),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalInvoiceVatAmount=Number(this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalVatRate),this.Invoice.TotalInvoice=Number(this.Invoice.TotalInvoice),this.Invoice.TotalDisc=Number(this.Invoice.TotalDisc),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterVat),this.ChangeCash()}Validate(){if((this.ScreenName=="BuyOffer"||this.ScreenName=="BuyInvoice")&&(this.Invoice.SupplierId==0||this.Invoice.SupplierId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterSupplier")),!1;if(this.ScreenName=="BuyInvoice"&&(this.Invoice.StoreId==0||this.Invoice.StoreId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterStore")),!1;if(this.ScreenName=="SaleOffer"&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.Invoice.DocDate==""||this.Invoice.DocDate==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterDate")),!1;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=t,n=Number(this.Invoice.InvoiceDetails[t].ProductId),s=Number(this.Invoice.InvoiceDetails[t].Price),v=Number(this.Invoice.InvoiceDetails[t].Quantity),y=Number(this.Invoice.InvoiceDetails[t].Discount),x=Number(this.Invoice.InvoiceDetails[t].DiscountRate),P=Number(this.Invoice.InvoiceDetails[t].Vat),F=Number(this.Invoice.InvoiceDetails[t].ProductUnitId),st=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount),_t=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterVat);if(isNaN(n)||n<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterProduct")+" "+(e+1)),!1;if(F<=0||isNaN(F))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit")+" "+(e+1)),!1;if(this.Invoice.InvoiceDetails.filter(pe=>pe.ProductId==n&&pe.ProductUnitId==F).length>=2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(e+1)),!1;if(isNaN(s)||s<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterPrice")+" "+(e+1)),!1;if(isNaN(v)||v<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterQuantity")+" "+(e+1)),!1;if(isNaN(y)||y<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorDiscount")+" "+(e+1)),!1;if(isNaN(x)||x<0||x>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorDiscountRate")+" "+(e+1)),!1;if(isNaN(P)||P<0||P>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorVat")+" "+(e+1)),!1;if(_t<0||st<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorNetRow")+" "+(e+1)),!1}if(this.Invoice.TotalInvoice<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.TotalInvoiceAfterVat<0||this.Invoice.TotalInvoiceAfterVat<0&&this.Invoice.TotalInvoiceAfterDisc<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorTotal")),!1;if(this.ScreenName=="SaleInvoice"||this.ScreenName=="BuyInvoice"){if(Number(this.Invoice.Visa)<0||isNaN(Number(this.Invoice.Visa)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Cash)<0||isNaN(Number(this.Invoice.Cash)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Debt)<0||isNaN(Number(this.Invoice.Debt)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(Number(this.Invoice.Visa)>0&&(this.Invoice.BankAccountId<=0||this.Invoice.BankAccountId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterBank")),!1;if(Number(this.Invoice.Cash)>0&&(this.Invoice.TreasuryId<=0||this.Invoice.TreasuryId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterTreasury")),!1;if(this.Invoice.PaymentType==1&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)+Number(this.Invoice.Debt)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Debt)<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==3&&this.Invoice.EmployeeId==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SalesReport.ChooseEmployee")),!1}return!0}ChangePamentType(t){this.Invoice.BankAccountId=null,this.Invoice.BankAccountName="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.EmployeeId=null,this.Invoice.EmployeeName="",t==1&&(this.Invoice.PaymentType=1,this.Invoice.Visa="",this.Invoice.Debt="",this.Invoice.Cash=this.Invoice.TotalInvoiceAfterVat),t==2&&(this.Invoice.PaymentType=2,this.Invoice.Cash="",this.Invoice.Visa="",this.Invoice.Debt=this.Invoice.TotalInvoiceAfterVat),t==3&&(this.Invoice.Visa="",this.Invoice.Cash="",this.Invoice.Debt="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.BankAccountId=null,this.Invoice.BankAccountName=""),this.ChangeCash()}ChangeCash(){this.Invoice.PaymentType==2&&(this.Invoice.Debt=Number(this.Invoice.TotalInvoiceAfterVat-(Number(this.Invoice.Cash)+Number(this.Invoice.Visa)))),this.Invoice.PaymentType==1&&(this.Invoice.Cash=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Visa)),this.Invoice.Visa=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Cash))),this.Invoice.TreasuryId=Number(this.Invoice.Cash)==0?null:this.Invoice.TreasuryId,this.Invoice.BankAccountId=Number(this.Invoice.Visa)==0?null:this.Invoice.BankAccountId,this.Invoice.TreasuryName=Number(this.Invoice.Cash)==0?"":this.Invoice.TreasuryName,this.Invoice.BankAccountName=Number(this.Invoice.Visa)==0?"":this.Invoice.BankAccountName,this.Invoice.Cash=Number(this.Invoice.Cash)==0?"":this.Invoice.Cash,this.Invoice.Visa=Number(this.Invoice.Visa)==0?"":this.Invoice.Visa,this.Invoice.Debt=Number(this.Invoice.Debt)==0?"":this.Invoice.Debt,this.DefaultBankTreasury()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.PaymentType=t.SaleInvoicePaymentType>0?t.SaleInvoicePaymentType:1,t.SaleInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.SaleInvoiceStoreId,this.StoreArr.push({Id:t.SaleInvoiceStoreId,Name:t.SaleInvoiceStoreName})),t.SaleInvoiceClientType>0&&(this.Invoice.ClientType=t.SaleInvoiceClientType,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A")),this.ScreenName=="BuyInvoice"&&(this.Invoice.PaymentType=t.BuyInvoicePaymentType>0?t.BuyInvoicePaymentType:1,t.BuyInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.BuyInvoiceStoreId,this.StoreArr.push({Id:t.BuyInvoiceStoreId,Name:t.BuyInvoiceStoreName})))}DefaultBankTreasury(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.Cash>0&&t.SaleInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.SaleInvoiceTreasuryId,this.TreasuryArr.push({Id:t.SaleInvoiceTreasuryId,Name:t.SaleInvoiceTreasuryName})),this.Invoice.Visa>0&&t.SaleInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.SaleInvoiceBankAccountId,this.BankAccountArr.push({Id:t.SaleInvoiceBankAccountId,Name:t.SaleInvoiceBankAccountName}))),this.ScreenName=="BuyInvoice"&&(this.Invoice.Cash>0&&t.BuyInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.BuyInvoiceTreasuryId,this.TreasuryArr.push({Id:t.BuyInvoiceTreasuryId,Name:t.BuyInvoiceTreasuryName})),this.Invoice.Visa>0&&t.BuyInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.BuyInvoiceBankAccountId,this.BankAccountArr.push({Id:t.BuyInvoiceBankAccountId,Name:t.BuyInvoiceBankAccountName})))}Save(){if(this.CalcInvoice(),this.Validate()==!1)return;this.Invoice.Cash=this.Invoice.Cash==""?0:this.Invoice.Cash,this.Invoice.Visa=this.Invoice.Visa==""?0:this.Invoice.Visa,this.Invoice.Debt=this.Invoice.Debt==""?0:this.Invoice.Debt,this.Invoice[`${this.ScreenName}Details`]=this.Invoice.InvoiceDetails.map(e=>k(R({},e),{Discount:e.Discount==""?0:e.Discount,DiscountRate:e.DiscountRate==""?0:e.DiscountRate}));let t={Id:this.Invoice.Id,PaymentType:Number(this.Invoice.PaymentType),Name:this.Invoice.Name,Notes:this.Invoice.Notes,Code:this.Invoice.Code,InvoiceCollection:this.Invoice.InvoiceCollection,InvoiceCollected:this.Invoice.InvoiceCollected,ClientType:this.Invoice.ClientType,DocNo:this.Invoice.DocNo,DocDate:this._Apiservice.ConvertISODate(this.Invoice.DocDate),TotalInvoice:this.Invoice.TotalInvoice,TotalDiscRate:this.Invoice.TotalDiscRate,TotalDisc:this.Invoice.TotalDisc,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate,Cash:Number(this.Invoice.Cash),Visa:Number(this.Invoice.Visa),Debt:Number(this.Invoice.Debt),TreasuryId:this.Invoice.TreasuryId,TreasuryName:this.Invoice.TreasuryName,BankAccountId:this.Invoice.BankAccountId,BankAccountName:this.Invoice.BankAccountName,EmployeeId:this.Invoice.EmployeeId,EmployeeName:this.Invoice.EmployeeName,StoreId:this.Invoice.StoreId,StoreName:this.Invoice.StoreName,ClientId:this.Invoice.ClientId==null?0:this.Invoice.ClientId,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName};t[`${this.ScreenName}Details`]=this.Invoice[`${this.ScreenName}Details`],t.Id==0&&this._Apiservice.post(this.AddUrl,t,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._AppModeService._Toastr.success(e.Message),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(e.Obj)):this._AppModeService._Toastr.error(e.Message)}}),t.Id>0&&this._Apiservice.put(this.UpdateUrl,t,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:e=>{if(e.IsSuccess==!0&&e.Obj!=null){this._AppModeService._Toastr.success(e.Message);let n=e.Obj,s=this._SharedObjectModelService.Paging.DataReturn.find(v=>v.Id==n.Id);s!=null&&Object.assign(s,n),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(e.Message)}})}HoldInvoice(){let t=this.Invoice.InvoiceDetails.filter(s=>s.ProductId>0).map(s=>k(R({},s),{Discount:s.Discount==""?0:s.Discount,DiscountRate:s.DiscountRate==""?0:s.DiscountRate,Price:s.Price==""?0:s.Price}));if(t.length==0)return;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient"));return}let e=0;this.ScreenName=="SaleInvoice"&&(e=1),this.ScreenName=="BuyInvoice"&&(e=2);let n={ClientId:this.Invoice.ClientId,ClientType:this.Invoice.ClientType,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName,HoldType:e,HoldInvoiceDetails:t,Id:0,TotalInvoice:this.Invoice.TotalInvoice,TotalDisc:this.Invoice.TotalDisc,TotalDiscRate:this.Invoice.TotalDiscRate,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate};this._Apiservice.post("HoldInvoiceEP/Add",n,!0).pipe(M(this._Apiservice.destroy$)).subscribe({next:s=>{s.IsSuccess==!0&&s.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo()):this._AppModeService._Toastr.error(s.Message)}})}ShowHoldInvoice(){let t="",e=[],n=[],s="Name",v={};this.ScreenName=="SaleInvoice"&&(t="HoldType = 1",e=["Clients Client"],n=["T.ClientId = Client.Id"],s="Client.Name AS ClientName",v={SortName:"ClientName",CellName:"SaleInvoice.Client",ExistSearchField:"Client.Name"}),this.ScreenName=="BuyInvoice"&&(t="HoldType = 2",e=["Suppliers Supplier"],n=["T.SupplierId = Supplier.Id"],s="Supplier.Name AS SupplierName",v={SortName:"SupplierName",CellName:"BuyInvoice.Supplier",ExistSearchField:"Supplier.Name"}),this.OutTablePaging={InputType:"Table",Type:"TablePaging",GlobalData:{BranchFilter:!0,Url:"Global/GetAll",TableName:"HoldInvoice",Conditions:t,Join:!0,JoinTables:e,JoinConditions:n,Columns:["T.Id",s,"T.TotalInvoice","T.TotalDisc","T.TotalInvoiceVatAmount","T.TotalInvoiceAfterVat","T.Notes"]},Required:!1,TableCell:[v,{SortName:"TotalInvoice",CellName:"Table.Total"},{SortName:"TotalDisc",CellName:"Table.Discount"},{SortName:"TotalInvoiceVatAmount",CellName:"Table.Vat"},{SortName:"TotalInvoiceAfterVat",CellName:"Table.NetTotal"},{SortName:"Notes",CellName:"Table.Notes"}]},this._AppModeService._NgbModal.open(this.AllHoldModel,{size:"xl"})}GetSaleHold(t){let e=this._SharedObjectModelService.SecoundPageModel;this.Invoice.ClientId=e.ClientId,this.Invoice.ClientName=e.ClientName,this.Invoice.SupplierId=e.SupplierId,this.Invoice.SupplierName=e.SupplierName,e.SupplierId>0&&(this.SupplierArr=[{Id:e.SupplierId,Name:e.SupplierName}]),e.ClientId>0&&(this.ClientArr=[{Id:e.ClientId,Name:e.ClientName}]),this.Invoice.InvoiceDetails=[];for(let n=0;n<e.HoldInvoiceDetails.length;n++){let s=e.HoldInvoiceDetails[n];s.Items=[{Id:s.ProductId,Name:s.ProductName,NameAndCode:s.ProductName}],s.ProductUnits=[{Id:s.ProductUnitId,Name:s.ProductUnitName,NameAndUnitFactor:s.ProductUnitName}],this.Invoice.InvoiceDetails.push(s)}t.close("Close click"),this.CalcInvoice(),this.ChangeCash()}ResetPage(){this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this._DefaultSettingsService.ResetDate(this.Invoice),this.HandleMyDefaultSettings(),this._SharedObjectModelService.ReturnAmount=0}ResetDetails(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};if(this.Invoice.InvoiceDetails.length>0&&(this.Invoice.InvoiceDetails=this.Invoice.InvoiceDetails.filter(e=>e.ProductId!=0&&e.ProductId!=null&&e.ProductType!=2),this.Invoice.InvoiceDetails.length==0)){this.Invoice.InvoiceDetails.push(t),this.CalcInvoice();return}}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}handleKeyboardEvent(t){if(t.ctrlKey&&t.key==="Shift"&&(t.preventDefault(),this.AppendRow()),t.ctrlKey&&(t.key==="\u064A"||t.key==="d"||t.key==="D")&&(t.preventDefault(),this.Invoice.InvoiceDetails.length>1)){for(let e=this.Invoice.InvoiceDetails.length-1;e>0;e--)if(this.Invoice.InvoiceDetails[e].ProductId==null){this.RemoveRow(e);break}}t.ctrlKey&&(t.key===" "||t.key==="Space")&&(t.preventDefault(),this.Save()),t.ctrlKey&&(t.key==="\u0621"||t.key==="x"||t.key==="X")&&(t.preventDefault(),this.HoldInvoice()),t.ctrlKey&&(t.key==="\u0626"||t.key==="z"||t.key==="Z")&&(t.preventDefault(),this.ShowHoldInvoice())}SecoundScreen(t){t==this.EnumScreen.Client&&(this.SharedScreen=this._SharedScreenService.ClientScreen()),t==this.EnumScreen.Supplier&&(this.SharedScreen=this._SharedScreenService.SupplierScreen()),t==this.EnumScreen.Treasury&&(this.SharedScreen=this._SharedScreenService.TreasuryScreen()),t==this.EnumScreen.BankAccount&&(this.SharedScreen=this._SharedScreenService.BankAccountScreen()),t==this.EnumScreen.Storage&&(this.SharedScreen=this._SharedScreenService.StorageScreen()),this._AppModeService._NgbModal.open(this.OherModal,{size:"xl"})}ResetSharedScreen(){this.SharedScreen={AddUrl:"",DataView:[],DeleteUrl:"",PageTitle:"",TablePaging:{},UpdateUrl:"",GetById:""}}};d.\u0275fac=function(e){return new(e||d)(G(rt),G(ct),G(fe),G(ce),G(ot),G(L),G(W))},d.\u0275cmp=z({type:d,selectors:[["app-dynamic-invoice"]],viewQuery:function(e,n){if(e&1&&(O(Kt,5),O(qt,5),O(Zt,5),O(Xt,5),O(Yt,5)),e&2){let s;U(s=j())&&(n.GLComponent=s.first),U(s=j())&&(n.ContentModel=s.first),U(s=j())&&(n.OherModal=s.first),U(s=j())&&(n.AllHoldModel=s.first),U(s=j())&&(n.tableContainer=s.first)}},hostBindings:function(e,n){e&1&&f("keydown",function(v){return n.handleKeyboardEvent(v)},!1,Ie)},inputs:{SignalR:"SignalR",GlResponse:"GlResponse",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[me,q],decls:11,vars:8,consts:[["content",""],["AllHold",""],["ItemBalance",""],["OherModal",""],["GLComponent",""],["Select",""],["SelectItem22",""],["SelectUnits",""],["SelectStore",""],["SelectSupplier",""],["SelectClient",""],["SelectTreasury",""],["SelectBank",""],["SelectEmployee",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","PrintUrl","DeleteUrl","OutModal"],[1,"modalConent"],[1,"col-8"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0","Invoicemodalbody"],["id","ProductTable",1,"col-12","card","p-0","ProductTable"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"bg-white","InvoiceContent","mt-3","mt-md-0","col-12","d-flex","flex-wrap","justify-content-between","align-items-center","bg-light","InvoiceContent"],["id","myContainer",1,"col-12","col-md-4"],["id","ngSelectComponent","placeholder","BarCode","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-6","col-xl-4","mx-auto","d-flex","flex-wrap","align-items-center","InvoiceDisInput"],["class","d-flex col-12 p-1 col-md-6 py-2",4,"ngIf"],[1,"bg-white","d-flex","flex-wrap","align-items-end","col-12","InvoiceContent"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","col-xl-1","p-1"],["for","DocNo"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-md-8","col-lg-4","col-xl-3","px-0","d-flex","flex-wrap","align-items-center"],[1,"col-12","col-md-6","px-md-1","my-1","my-lg-0"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],["for","DocNo",4,"ngIf"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class","  text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],["class","col-12 col-md-6 px-md-1 my-1 my-lg-0",4,"ngIf"],["class","col-12 col-md-6 px-md-1 my-1 my-lg-0",3,"ngClass",4,"ngIf"],["class","col-12  col-md-4 col-lg-2 px-1 d-flex text-center justify-content-center ",4,"ngIf"],["class","col-12 col-sm-6 col-md-4 col-lg-4 col-xl-3 p-1 d-flex flex-wrap",4,"ngIf"],["class","col-12 my-2 p-2 d-flex flex-wrap",4,"ngIf"],[1,"TotalContainer","d-flex","flex-wrap","justify-content-between"],[1,"col-3","col-lg-1","mx-auto","p-1","text-center"],["for","TotalInvoice",1,"text-white","m-0","p-0","text-center"],[1,"d-block","m-0","p-0","text-center"],["class","col-3 col-lg-1 mx-auto p-1 text-center",4,"ngIf"],[1,"col-4","col-lg-1","mx-auto","py-1","text-center"],["for","TotalVat",1,"text-white","m-0","p-0","text-center"],[4,"ngIf"],[1,"col-4","col-lg-1","mx-auto","p-1","text-center"],["for","TotalAfterVat",1,"text-white","m-0","p-0","text-center"],["class","col-4 col-lg-1 mx-auto p-1 text-center",4,"ngIf"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],["class","btn btn-success py-3 px-5",3,"disabled","click",4,"ngIf"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["class","btn btn-dark my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["class","btn btn-warning my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-light","border","border-1","border-dark","px-5","py-3",3,"click"],[1,"fs-5","mx-1"],[1,"col-"],[1,"d-none","d-lg-inline","text-danger","mx-2"],[1,"d-inline"],[1,"d-none","d-lg-inline","text-success","mx-2"],[1,"d-block","text-center"],[1,"col-3"],[1,"col-2"],["class","col-2",4,"ngIf"],[1,""],[1,"d-flex","justify-content-center","align-items-center","col-12"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-success",3,"click"],[1,"mx-1","fs-5","fw-bold","pi","pi-plus"],[1,"d-none","d-lg-inline"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold","fs-5"],[1,"p-1"],[1,"text-dark","d-block","d-xl-none","text-center","col-12"],[1,"d-flex","col-12"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11","col-md-11","col-lg-10",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","virtualScroll","searchable","ngModel"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-primary",3,"click","disabled"],[1,"pi","pi-eye","d-block","mx-auto","fw-bold","fs-2"],[1,"ngSelect","p-1"],[1,"text-dark","d-block","d-xl-none","text-center"],["bindLabel","NameAndUnitFactor","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","disabled","virtualScroll","searchable","ngModel"],[1,"d-flex","justify-content-around","align-items-center","col-12"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-success",3,"click","disabled"],[1,"col-8","px-1"],["min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"mx-1","px-1","pi","fw-bold","fs-2"],[1,"col-12"],["class","text-dark d-block text-center",4,"ngIf"],["min","0","type","number","appNumericInput","","class","form-control text-center px-0",3,"id","name","disabled","ngModel","change","keyup","ngModelChange",4,"ngIf"],["class","p-1",4,"ngIf"],[1,"text-center","col-12"],[1,"text-dark","d-block","d-md-none","text-center"],[1,"text-dark","d-block","text-center"],[1,"form-text","text-muted"],["min","0","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],["min","0","placeholder","%","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],[1,"d-flex","col-12","p-1","col-md-6","py-2"],[1,"d-block","col-5","col-md-5","px-1"],["type","number","appNumericInput","","placeholder","%","name","GlobalDiscountRate","id","GlobalDiscountRate",1,"form-control","text-center",3,"change","keyup","ngModelChange","ngModel"],["type","number","appNumericInput","","name","GlobalDiscount","id","GlobalDiscount",1,"form-control","text-center",3,"change","keyup","ngModelChange","ngModel"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"my-2","my-lg-1"],["class","btn btn-primary  text-center mx-2",3,"click",4,"ngIf"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],[1,"btn","btn-primary","text-center","mx-2",3,"click"],[1,"m-0","p-0","text-center","fs-6","fw-bold","pi","pi-plus"],[1,"col-12","col-md-6","px-md-1","my-1","my-lg-0",3,"ngClass"],[1,"m-0","d-inline"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","change","close","open","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],["placeholder","Name","type","text","class","form-control text-center","name","","id","Client_Name",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["placeholder","Search","class","p-0 text-center","bindLabel","Name","bindValue","Id",3,"items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel","clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange",4,"ngIf"],["placeholder","Name","type","text","name","","id","Client_Name",1,"form-control","text-center",3,"ngModelChange","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],[1,"col-12","col-md-4","col-lg-2","px-1","d-flex","text-center","justify-content-center"],[1,"form-check","p-0","col-6","text-center"],[1,"d-flex","align-items-center"],["for","ClientType1",1,"p-0","col-6","text-center"],[1,"col-6","text-end"],["type","radio","name","ClientType","id","ClientType1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","ClientType2",1,"p-0","col-6","text-center"],["type","radio","name","ClientType","id","ClientType2",1,"form-check-input","mx-2",3,"change","ngModelChange","value","checked","ngModel"],[1,"col-12","col-sm-6","col-md-4","col-lg-4","col-xl-3","p-1","d-flex","flex-wrap"],[1,"col-6","px-2","text-center"],[1,"my-1"],["type","number","appNumericInput","","name","NetThamBranch","id","NetThamBranch",1,"form-control","text-center",3,"disabled","value"],["type","number","appNumericInput","","name","NetOtherBranch","id","NetOtherBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-12","my-2","p-2","d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-2","col-xl-1","px-1","my-1","my-lg-0"],["name","","id","",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],["class","col-12 col-md-8 col-lg-4 col-xl-3 px-0 d-flex flex-wrap align-items-center",4,"ngIf"],["class","col-12 col-md-4 col-lg-2 my-1 px-2",4,"ngIf"],[1,"col-12","col-md-4","col-lg-2","px-3","my-1","my-lg-0"],["class","my-1",4,"ngIf"],["id","Debt","min","0","type","number","appNumericInput","","class","form-control text-center",3,"disabled","value",4,"ngIf"],["min","0","type","number","appNumericInput","","id","Cash",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],[1,"btn","btn-primary","text-center","me-4",3,"click"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","disabled","ngModel"],["min","0","type","number","appNumericInput","","id","Visa",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","virtualScroll","searchable","disabled","ngModel"],[1,"col-12","col-md-4","col-lg-2","my-1","px-2"],[1,"m-0"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],["id","Debt","min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"disabled","value"],["for","TotalDiscount",1,"text-white","m-0","p-0","text-center"],["for","TotalDiscRate",1,"text-white","m-0","p-0","text-center"],["for","TotalAfterVat",1,"text-danger","m-0","p-0","text-center"],[1,"btn","btn-success","py-3","px-5",3,"click","disabled"],[1,"mx-1","pi","pi-save"],["class","btn btn-primary py-3 px-5",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary","py-3","px-5",3,"click","disabled"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"],[1,"btn","btn-dark","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[1,"btn","btn-warning","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[3,"ShowToEditeEvent","PageTitle","TablePaging","GetById","DeleteUrl"],[1,"modal-body"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"text-dark"],[3,"CloseParentModel","PageTitle","DataView","AddUrl","UpdateUrl","DeleteUrl","NotInsertTablePaging","GetById"]],template:function(e,n){if(e&1){let s=b();c(0,"app-dynamic-component",14),f("OpenModalEvent",function(){return _(s),p(n.OpenModal())})("ShowToEditeEvent",function(){return _(s),p(n.ShowToEdite())}),l(),S(1,on,79,56,"ng-template",15,0,$)(3,rn,5,7,"ng-template",16,1,$)(5,ln,12,7,"ng-template",16,2,$)(7,cn,1,7,"ng-template",16,3,$),T(9,"app-glsheard",null,4)}if(e&2){let s=C(2);m("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!0)("GlResponse",n.GlResponse)("GetById",n.GetById)("PrintUrl",n.PrintUrl)("DeleteUrl",n.DeleteUrl)("OutModal",s)}},dependencies:[le,ae,re,ee,ke,Re,Ae,be,De,xe,ye,Te,Ce,te,we,ie,Ve,Me,Ne,Pe,X,Y,ge,He,oe,ne,et,nt,lt,ze,Qe,Je],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2.5rem!important;height:2.5rem!important}label[_ngcontent-%COMP%]{cursor:pointer}label[_ngcontent-%COMP%], span[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-weight:500;margin:6px 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#172d50!important;color:#fff!important;box-shadow:none!important}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{box-shadow:3px 5px 3px 1px #eee;border:1px solid #eee}table[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-wrap:break-word!important;word-spacing:wrap!important;overflow-wrap:break-word!important}#editing-view-port[_ngcontent-%COMP%]{overflow-wrap:break-word!important}svg[_ngcontent-%COMP%]{cursor:pointer}td.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}"]});let o=d;return o})();export{to as a};
