import{a as Ye,b as et}from"./chunk-6T4APQIW.js";import{a as tt}from"./chunk-PLYKRIX3.js";import{a as it}from"./chunk-AK5AIK5K.js";import{a as He,b as Le,c as $e,d as Je,f as ze,g as Ke,h as qe,i as Ze,j as Xe}from"./chunk-ZLLO2CPJ.js";import{a as Qe}from"./chunk-VSYXDL23.js";import{g as Me,h as Be,j as ae,k as ke,l as Ue,m as Oe,o as Fe,p as Ge,q as je,r as We,s as le}from"./chunk-5VO5RH76.js";import{a as Ee,b as Re}from"./chunk-2W5TGM3Y.js";import{a as ce}from"./chunk-7XIF7JPY.js";import{k as re}from"./chunk-7FMAHILW.js";import{a as Ae,b as Ne,c as Pe,d as Ve}from"./chunk-IBMBVOFU.js";import{c as ne,d as oe,g as H}from"./chunk-DLDN7W7Q.js";import{H as fe,I as W,L as xe,N as te,Q as ie,S as Se,T as ye,U as Ce,V as Te,W as be,Y as De,_ as we,b as he,c as X,d as Y,i as ee,z as ge}from"./chunk-XINR554T.js";import{$b as w,Ab as Ie,Cb as s,Db as c,Eb as T,Fb as J,Ga as _e,Gb as z,Ib as b,Mb as f,Nb as r,Qb as E,Rb as M,Tb as O,Ub as F,Vb as G,Wb as C,X as V,Xb as u,Yb as g,Zb as D,_b as B,ab as ve,ac as A,bc as N,ca as de,db as a,dc as K,eb as j,ec as q,ha as se,ia as $,na as Q,nc as I,oc as h,pc as L,qc as Z,vb as x,wa as me,xa as _,xb as m,ya as p,za as ue}from"./chunk-J5UB44FZ.js";import{a as R,b as k}from"./chunk-3EYC4JTX.js";var dt=["DeleteModalComponent"],mt=["ModalUserInfoModal"],ut=()=>({"min-width":"75rem"}),vt=()=>["Name"],It=()=>({"min-width":"100%"});function ht(o,d){if(o&1){let i=b();s(0,"div",19)(1,"div",20)(2,"span",21),u(3),I(4,"translate"),c()(),s(5,"div",22)(6,"p-multiSelect",23),I(7,"translate"),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.selectedColumns,e)||(n.selectedColumns=e),p(e)}),c()(),s(8,"div",24)(9,"button",25),f("click",function(){_(i),r();let e=C(5),n=r();return n.LoadDataPaging(n.TablePaging.GlobalData,"","",!0),p(n.ClearColumnFilter(e))}),ue(),s(10,"svg",26),T(11,"path",27)(12,"path",28),c()()()()}if(o&2){let i=r(2);a(3),g(h(4,7,i.PageTitle)),a(3),Ie(q(11,It)),M("selectedItemsLabel","{0} ",h(7,9,"ColumnsSelected"),""),m("options",i.TablePaging.TableCell),w("ngModel",i.selectedColumns)}}function gt(o,d){if(o&1&&(s(0,"th",32)(1,"span",33),u(2),I(3,"translate"),c(),T(4,"p-sortIcon",34),c()),o&2){let i=d.$implicit;E("pSortableColumn",i.SortName),a(2),D(" ",h(3,4,i.CellName)," "),a(2),E("pSortableColumn",i.SortName),E("field",i.SortName)}}function ft(o,d){if(o&1){let i=b();s(0,"th",29)(1,"p-columnFilter",35,4),I(3,"translate"),f("keyup",function(){let e=_(i).$implicit,n=C(2),l=r(3);return l.LoadDataPaging(l.TablePaging.GlobalData,n.dt.filters[e.SortName],e.ExistSearchField!=null?e.ExistSearchField:e.SortName,!1),p(l.ClearColumns(e,n.dt.filters))}),c()()}if(o&2){let i=d.$implicit;a(),E("field",i.SortName),E("placeholder",h(3,3,"navBar.Search")),m("showMenu",!1)}}function xt(o,d){if(o&1&&(s(0,"tr"),T(1,"th",29),x(2,gt,5,6,"th",30),T(3,"th",29),c(),s(4,"tr"),T(5,"th",29),x(6,ft,4,5,"th",31),T(7,"th",29),c()),o&2){let i=r(2);a(2),m("ngForOf",i.selectedColumns),a(4),m("ngForOf",i.selectedColumns)}}function St(o,d){if(o&1&&(J(0),s(1,"span"),u(2),c(),z()),o&2){let i=r().$implicit,t=r().$implicit;a(2),D(" ",t[i.SortName]," ")}}function yt(o,d){o&1&&T(0,"span")}function Ct(o,d){if(o&1&&(s(0,"span"),u(1),I(2,"date"),c()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",L(2,1,t[i.SortName],"yyy-M-d")," ")}}function Tt(o,d){if(o&1&&(s(0,"span"),u(1),I(2,"date"),c()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",L(2,1,t[i.SortName],"yyy-M-d h:mm:ss a")," ")}}function bt(o,d){o&1&&(s(0,"span"),T(1,"i",47),c())}function Dt(o,d){o&1&&(s(0,"span"),T(1,"i",48),c())}function wt(o,d){if(o&1&&(J(0),x(1,bt,2,0,"span",10)(2,Dt,2,0,"span",10),z()),o&2){let i=r().$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0),a(),m("ngIf",t[i.SortName]==!1)}}function At(o,d){o&1&&(s(0,"span"),T(1,"i",47),c())}function Nt(o,d){if(o&1&&(s(0,"span"),x(1,At,2,0,"span",10),c()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Pt(o,d){o&1&&(s(0,"span"),T(1,"i",48),c())}function Vt(o,d){if(o&1&&(s(0,"span"),x(1,Pt,2,0,"span",10),c()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Mt(o,d){o&1&&(s(0,"span"),T(1,"i",47),c())}function Bt(o,d){if(o&1&&(s(0,"span"),x(1,Mt,2,0,"span",10),c()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function Et(o,d){o&1&&(s(0,"span"),T(1,"i",48),c())}function Rt(o,d){if(o&1&&(s(0,"span"),x(1,Et,2,0,"span",10),c()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function kt(o,d){if(o&1&&(J(0),x(1,Nt,2,1,"span",10)(2,Vt,2,1,"span",10)(3,Bt,2,1,"span",10)(4,Rt,2,1,"span",10),z()),o&2){let i=r().$implicit;a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean==null)}}function Ut(o,d){if(o&1&&(s(0,"td",37),x(1,St,3,1,"ng-container",10)(2,yt,1,0,"span",10)(3,Ct,3,4,"span",10)(4,Tt,3,4,"span",10)(5,wt,3,2,"ng-container",10)(6,kt,5,4,"ng-container",10),c()),o&2){let i=d.$implicit,t=r().$implicit,e=r(2);a(),m("ngIf",(i.CellDate==null||i.CellDate==!1)&&(i.CellDateTime==null||i.CellDateTime==!1)&&e.typeOf(t[i.SortName])!="object"&&(i.DataBoolean==null||i.DataBoolean==!1)),a(),m("ngIf",e.typeOf(t[i.SortName])=="object"),a(),m("ngIf",i.CellDate==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.CellDateTime==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null&&i.CrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&(i.DrBoolean!=null||i.CrBoolean!=null))}}function Ot(o,d){if(o&1){let i=b();s(0,"button",49),f("click",function(){_(i);let e=r().$implicit,n=r(2);return p(n.ConfirmDelete(e.Id))}),u(1),I(2,"translate"),T(3,"i",50),c()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton),a(),D("",h(2,2,"Model.Delete")," ")}}function Ft(o,d){if(o&1){let i=b();s(0,"tr",36)(1,"td",37)(2,"span"),u(3),c(),T(4,"span",38),c(),x(5,Ut,7,6,"td",39),s(6,"td",40)(7,"div",41)(8,"button",42),f("click",function(){let e=_(i).$implicit,n=r(2);return p(n.ShowToEdite(e))}),u(9),I(10,"translate"),T(11,"i",43),c(),s(12,"button",44),f("click",function(){let e=_(i).$implicit,n=r(2);return p(n.OpenUserModal(e,n.TablePaging.GlobalData.TableName))}),u(13),I(14,"translate"),T(15,"i",45),c(),x(16,Ot,4,4,"button",46),c()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);m("pContextMenuRow",i)("pReorderableRow",t),a(3),g(t+1),a(2),m("ngForOf",e.selectedColumns),a(3),m("disabled",e._AppModeService.DisabledButton),a(),D("",h(10,9,"Table.Show")," "),a(3),m("disabled",e._AppModeService.DisabledButton),a(),D("",h(14,11,"Table.Details")," "),a(3),m("ngIf",e.DeleteUrl!="")}}function Gt(o,d){if(o&1){let i=b();s(0,"p-paginator",51),f("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),c()}if(o&2){let i=r(2);m("first",i.Paging.CurrentPage)("rows",i.Paging.PageSize)("totalRecords",i.Paging.TotalItems)("rowsPerPageOptions",i._AppModeService.RowCount)}}function jt(o,d){if(o&1){let i=b();s(0,"p-paginator",52),f("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),c()}if(o&2){let i=r(2);m("first",i.Paging.CurrentPage)("rows",i.Paging.PageSize)("totalRecords",i.Paging.TotalItems)}}function Wt(o,d){if(o&1){let i=b();s(0,"div")(1,"div",11),T(2,"p-contextMenu",12,2),s(4,"p-table",13,3),N("contextMenuSelectionChange",function(e){_(i);let n=r();return A(n.contextSelected,e)||(n.contextSelected=e),p(e)}),f("onSort",function(e){_(i);let n=r();return p(n.SortFunction(e))}),x(6,ht,13,12,"ng-template",14)(7,xt,8,2,"ng-template",15)(8,Ft,17,13,"ng-template",16),c()(),x(9,Gt,1,4,"p-paginator",17)(10,jt,1,3,"p-paginator",18),c()}if(o&2){let i=C(3),t=r();a(2),m("model",t.contextitems),a(2),m("value",t.Paging.DataReturn)("lazy",!0)("scrollable",!0)("columns",t.selectedColumns)("paginator",!1)("resizableColumns",!0)("reorderableColumns",!0)("rows",t.Paging.PageSize)("tableStyle",q(15,ut)),w("contextMenuSelection",t.contextSelected),m("contextMenu",i)("globalFilterFields",q(16,vt)),a(5),m("ngIf",t.Paging.TotalItems>=10),a(),m("ngIf",t.Paging.TotalItems<10)}}var ot=(()=>{let d=class d{constructor(){this._selectedColumns=[],this.contextitems=[],this.contextSelected={},this.Paging={PageSize:10,CurrentPage:1,TotalPages:0,TotalItems:0,DataReturn:[]},this.DataInfo={CreatedDate:"",CreatedByName:"",LastModifiedDate:"",ModifyByName:"",ModifyCount:0},this.OpenModalEvent=new _e,this.ShowToEditeEvent=new _e,this.PageTitle="",this.OutModal=null,this.FullScreen=!1,this.TablePaging={},this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.SearchText="",this.SearchField="",this.Field="Id",this.Order=1,this._SharedObjectModel=$(ce),this._AppModeService=$(H),this._Apiservice=$(W)}ConfirmDelete(t){this.DeleteModalComponent.ConfirmDelete(t,this.DeleteUrl)}OpenUserModal(t,e){this.ModalUserInfoComponent.ShowDetails(t,e)}ngOnInit(){this.Paging.DataReturn=[],this.Paging.TotalItems=0,this.LoadDataPaging(this.TablePaging.GlobalData,"","",!1),this.HandleCol(),this.contextitems=[{label:"Delete",icon:"pi pi-fw pi-times",command:()=>this.ConfirmDelete(this.contextSelected.Id)}]}get selectedColumns(){return this._selectedColumns}set selectedColumns(t){this._selectedColumns=this.TablePaging.TableCell.filter(e=>t.includes(e))}HandleCol(){this.TablePaging.TableCell=this.TablePaging.TableCell.map(t=>k(R({},t),{ConvertCellName:this._AppModeService._Translate.instant(t.CellName)})),this._selectedColumns=this.TablePaging.TableCell}ClearColumnFilter(t){let e=Object.values(t.filters);for(let n=0;n<e.length;n++)e[n].value=null;this.SearchText="",this.SearchField="",this.Paging.CurrentPage=1}ClearColumns(t,e){let n=Object.keys(e),l=Object.values(e);for(let v=0;v<n.length;v++)n[v]!=t.SortName&&(l[v].value=null)}LoadDataPaging(t,e,n,l=!0){e=`${e==""?"":e.value}`.trim(),this.SearchText=e,this.SearchField=n;let v={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this.Paging.PageSize,BranchFilter:t.BranchFilter,CurrentPage:1,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions};this._Apiservice.post(`${t.Url}`,v,l).pipe(V(this._Apiservice.destroy$)).subscribe({next:S=>{S.IsSuccess==!0&&S.Obj!=null?(this.Paging.DataReturn=S.Obj.DataReturn,this.Paging.CurrentPage=S.Obj.CurrentPage,this.Paging.TotalItems=S.Obj.TotalItems):this._AppModeService._Toastr.error(S.Message)}})}SortFunction(t){let e=t.multisortmeta[0];if(e!=null){this.Field=e.field,this.Order=e.order;let n=this.TablePaging.GlobalData,l={TableName:n.TableName,Columns:n.Columns,Conditions:n.Conditions==null?"":n.Conditions,PageSize:this.Paging.PageSize,BranchFilter:n.BranchFilter,CurrentPage:this.Paging.CurrentPage,Join:n.Join,JoinTables:n.JoinTables,JoinConditions:n.JoinConditions,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${n.Url}`,l,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this.Paging.DataReturn=v.Obj.DataReturn,this.Paging.CurrentPage=v.Obj.CurrentPage,this.Paging.TotalItems=v.Obj.TotalItems):this._AppModeService._Toastr.error(v.Message)}})}}onPageChange(t,e){e.page++,e.first,e.rows,this.Paging.CurrentPage=e.first,this.Paging.PageSize=e.rows;let n={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this.Paging.PageSize,BranchFilter:t.BranchFilter,CurrentPage:e.page,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${t.Url}`,n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this.Paging.DataReturn=l.Obj.DataReturn,this.Paging.TotalItems=l.Obj.TotalItems):this._AppModeService._Toastr.error(l.Message)}})}ShowToEdite(t){this._AppModeService.DisabledButton=!0,this._Apiservice.getById(this.GetById,t.Id).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{this._AppModeService.DisabledButton=!1,e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModel.SecoundPageModel=e.Obj,this.ShowToEditeEvent.emit("ShowToEdite Fire"),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(e.Message))},error:e=>{this._AppModeService.DisabledButton=!1}})}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}typeOf(t){return typeof t}};d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=Q({type:d,selectors:[["app-table"]],viewQuery:function(e,n){if(e&1&&(O(dt,5),O(mt,5)),e&2){let l;F(l=G())&&(n.DeleteModalComponent=l.first),F(l=G())&&(n.ModalUserInfoComponent=l.first)}},inputs:{PageTitle:"PageTitle",OutModal:"OutModal",FullScreen:"FullScreen",DataView:"DataView",TablePaging:"TablePaging",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl",selectedColumns:"selectedColumns"},outputs:{OpenModalEvent:"OpenModalEvent",ShowToEditeEvent:"ShowToEditeEvent"},standalone:!0,features:[K],decls:10,vars:1,consts:[["ModalUserInfoModal",""],["DeleteModalComponent",""],["cm",""],["dt1",""],["columnFilter",""],["clas",""],["id","container-page",1,"container-page","p-0"],[1,"page-wrapper"],[1,"main-content"],[1,"inner-box","DivPaging"],[4,"ngIf"],[1,"TablePaging","noclear","table","mb-0","p-0","border-top-right-radius-0","border-top-left-radius-0"],[3,"model"],["scrollHeight","100vh","styleClass","p-datatable-striped","dataKey","Id","sortMode","multiple",3,"contextMenuSelectionChange","onSort","value","lazy","scrollable","columns","paginator","resizableColumns","reorderableColumns","rows","tableStyle","contextMenuSelection","contextMenu","globalFilterFields"],["pTemplate","caption",1,"d-flex","p-0","GridTable"],["pTemplate","header"],["pTemplate","body"],["appendTo","table",3,"first","rows","totalRecords","rowsPerPageOptions","onPageChange",4,"ngIf"],["appendTo","table",3,"first","rows","totalRecords","onPageChange",4,"ngIf"],[1,"d-flex","align-items-center","bg-white"],[1,"col-3","my-2","px-2"],[1,"PageTitle","fs-4"],[1,"col-6","my-2","px-2"],["optionLabel","ConvertCellName","placeholder","Choose Columns",1,"w-100",3,"ngModelChange","options","ngModel","selectedItemsLabel"],[1,"col-3","my-2","divend"],["type","button","icon","pi pi-file-excel",1,"mx-2","px-3","py-1","btn","btn-primary",3,"click"],["width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-counterclockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"],["pResizableColumn",""],["pResizableColumn","","class","col-2 ",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",4,"ngFor","ngForOf"],["pResizableColumn","",1,"col-2",3,"pSortableColumn"],[1,"mx-2"],[3,"pSortableColumn","field"],["type","text",3,"keyup","showMenu","field","placeholder"],[3,"pContextMenuRow","pReorderableRow"],[1,"bg-white"],["pReorderableRowHandle","",1,"pi","pi-bars"],["class","bg-white",4,"ngFor","ngForOf"],[1,"p-0","bg-white"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-search"],[1,"btn","btn-light","border","border-1","border-dark","px-3","py-3",3,"click","disabled"],[1,"mx-1","pi","pi-info"],["class","btn btn-danger text-white shadow-none mx-2 py-2 px-3",3,"disabled","click",4,"ngIf"],[1,"pi","pi-check","text-success",2,"font-size","2rem !important"],[1,"pi","pi-times","text-danger",2,"font-size","2rem !important"],[1,"btn","btn-danger","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-trash"],["appendTo","table",3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["appendTo","table",3,"onPageChange","first","rows","totalRecords"]],template:function(e,n){e&1&&(s(0,"section",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),x(5,Wt,11,17,"div",10),c()()()()(),T(6,"app-modal-user-info",null,0)(8,"app-modal-delete",null,1)),e&2&&(a(5),m("ngIf",n.TablePaging.Type=="TablePaging"))},dependencies:[Be,Me,re,te,ie,le,ae,ke,Oe,Fe,Ue,Ge,je,We,Y,X,Ze,qe,Ke,ze,oe,ne,ee,Je,Le]});let o=d;return o})();var rt=(()=>{let d=class d{constructor(t,e){this._Apiservice=t,this._AppModeService=e,this.ScaleSettingsArr=[],this.GetScaleSettings()}GetScaleSettings(){let t={TableName:"ScaleSettings",Columns:["Id","Name","ZaraNumber","BarCodeLength","ProductCodeLength","WeightCodeLength"],Conditions:"",NoPaging:!0};this._Apiservice.post("Global/GetAll",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.ScaleSettingsArr=e.Obj.DataReturn:this._AppModeService._Toastr.error(e.Message)}})}};d.\u0275fac=function(e){return new(e||d)(se(W),se(H))},d.\u0275prov=de({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var Qt=["GLComponent"],Jt=["content"],zt=["AllHold"],Kt=["ProductTable"];function qt(o,d){o&1&&(s(0,"th",69),u(1),I(2,"translate"),c()),o&2&&(a(),D("",h(2,1,"SaleInvoice.DiscountRate")," %"))}function Zt(o,d){o&1&&(s(0,"th",69),u(1),I(2,"translate"),c()),o&2&&(a(),g(h(2,1,"SaleInvoice.Discount")))}function Xt(o,d){if(o&1&&(s(0,"tr")(1,"th",63)(2,"span",64),u(3,"Ctrl "),s(4,"span",65),u(5,"+"),c(),u(6," D"),c(),s(7,"span",66),u(8,"Ctrl "),s(9,"span",65),u(10,"+"),c(),u(11," Shift"),c(),s(12,"span",67),u(13,"#"),c()(),s(14,"th",68),u(15),I(16,"translate"),c(),s(17,"th",69),u(18),I(19,"translate"),c(),s(20,"th",69),u(21),I(22,"translate"),c(),s(23,"th",69),u(24),I(25,"translate"),c(),x(26,qt,3,3,"th",70)(27,Zt,3,3,"th",70),s(28,"th",69),u(29),I(30,"translate"),c()()),o&2){let i=r(2);a(15),g(h(16,7,"SaleInvoice.Name")),a(3),g(h(19,9,"SaleInvoice.Unit")),a(3),g(h(22,11,"SaleInvoice.Quantity")),a(3),g(h(25,13,"SaleInvoice.Price")),a(2),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(2),g(h(30,15,"SaleInvoice.TotalPriceAfterDiscount"))}}function Yt(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r().$implicit,t=r(2);a(),B("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ei(o,d){if(o&1&&u(0),o&2){let i=d.item;B(" ",i.Name," - ",i.Code," ")}}function ti(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r().$implicit,t=r(2);a(),B("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ii(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.NameAndUnitFactor," ")}}function ni(o,d){if(o&1&&(s(0,"span",98),u(1),c()),o&2){let i=r().$implicit;a(),g(i.Price)}}function oi(o,d){if(o&1){let i=b();s(0,"input",100),f("change",function(){_(i);let e=r(3);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(3);return p(e.CalcInvoice())}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Price,e)||(n.Price=e),p(e)}),c()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;M("id","Price",e,""),M("name","Price",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.Price)}}function ri(o,d){if(o&1){let i=b();s(0,"td",77)(1,"div",86)(2,"button",87),f("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","+",e),p(n.Discount("DiscountRate",e))}),T(3,"i",74),c(),s(4,"div",88)(5,"span",84),u(6),I(7,"translate"),c(),s(8,"input",101),f("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.DiscountRate,e)||(n.DiscountRate=e),p(e)}),c()(),s(9,"button",90),f("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","-",e),p(n.Discount("DiscountRate",e))}),s(10,"i",91),u(11," - "),c()()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(2),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),a(4),g(h(7,9,"SaleInvoice.DiscountRate")),a(2),M("id","DiscountRate",e,""),M("name","DiscountRate",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.DiscountRate),a(),m("disabled",t.ProductId<=0||t.ProductUnitId<=0)}}function ai(o,d){if(o&1){let i=b();s(0,"td",77)(1,"div",96)(2,"span",97),u(3),I(4,"translate"),c(),s(5,"input",100),f("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Discount,e)||(n.Discount=e),p(e)}),c()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(3),g(h(4,7,"SaleInvoice.Discount")),a(2),M("id","Discount",e,""),M("name","Discount",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),w("ngModel",t.Discount)}}function li(o,d){if(o&1){let i=b();s(0,"tr")(1,"td",71)(2,"div",72)(3,"button",73),f("click",function(){_(i);let e=r(2);return p(e.AppendRow())}),T(4,"i",74),c(),s(5,"button",75),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.RemoveRow(e))}),T(6,"i",76),c()()(),s(7,"td",77)(8,"span",78),u(9),I(10,"translate"),c(),s(11,"div",79)(12,"ng-select",80,5),I(14,"translate"),f("clear",function(){let e=_(i).$implicit;return p(e.Items=[])})("focus",function(){let e=_(i).rowIndex,n=C(13),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),p(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=C(13),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),p(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=C(13),l=r(2);return p(l.ChangeSearchApiDetails("Items",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,l=e.rowIndex,v=C(13);return r(2).SelectItem(n.ProductId,l),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductId,e)||(n.ProductId=e),p(e)}),x(15,Yt,2,2,"ng-template",25)(16,ei,1,2,"ng-template",26),c(),s(17,"button",81),f("click",function(){let e=_(i).rowIndex,n=r(2),l=C(6);return p(n.ProductBalance(e,l))}),T(18,"i",82),c()()(),s(19,"td",83)(20,"span",84),u(21),I(22,"translate"),c(),s(23,"ng-select",85,6),I(25,"translate"),f("clear",function(){let e=_(i).$implicit;return p(e.ProductUnits=[])})("focus",function(){let e=_(i).rowIndex,n=C(24),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),p(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=C(24),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),p(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=C(24),l=r(2);return p(l.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,l=e.rowIndex,v=C(24);return r(2).SelectUnit(n.ProductUnitId,l),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductUnitId,e)||(n.ProductUnitId=e),p(e)}),x(26,ti,2,2,"ng-template",25)(27,ii,1,1,"ng-template",26),c()(),s(28,"td",77)(29,"div",86)(30,"button",87),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","+",e))}),T(31,"i",74),c(),s(32,"div",88)(33,"span",84),u(34),I(35,"translate"),c(),s(36,"input",89),f("change",function(){_(i);let e=r(2);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(2);return p(e.CalcInvoice())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.Quantity,e)||(n.Quantity=e),p(e)}),c()(),s(37,"button",90),f("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","-",e))}),s(38,"i",91),u(39," - "),c()()()(),s(40,"td",77)(41,"div",92)(42,"span",84),u(43),I(44,"translate"),c(),x(45,ni,2,1,"span",93)(46,oi,1,6,"input",94),c()(),x(47,ri,12,11,"td",95)(48,ai,6,9,"td",95),s(49,"td",77)(50,"div",96)(51,"span",97),u(52),I(53,"translate"),c(),s(54,"span",98),u(55),c()()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);a(5),m("disabled",e.Invoice.InvoiceDetails.length==1),a(4),g(h(10,33,"SaleInvoice.Name")),a(3),M("placeholder","  ",h(14,35,"SaleInvoice.ChooseProduct"),""),m("items",i.Items)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductId),a(5),m("disabled",e._AppModeService.DisabledButton||i.ProductId==null),a(4),g(h(22,37,"Item.ItemUnit")),a(2),M("placeholder","  ",h(25,39,"Item.ItemUnit"),""),m("items",i.ProductUnits)("disabled",i.ProductId==0||i.ProductId==null)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductUnitId),a(7),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),a(4),g(h(35,41,"SaleInvoice.Quantity")),a(2),M("id","Quantity",t,""),M("name","Quantity",t,""),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),w("ngModel",i.Quantity),a(),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),a(6),g(h(44,43,"SaleInvoice.Price")),a(2),m("ngIf",e.ScreenName=="SaleInvoice"),a(),m("ngIf",e.ScreenName!="SaleInvoice"),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate==!1),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscount==!1),a(4),g(h(53,45,"SaleInvoice.TotalPriceAfterDiscount")),a(3),g(i.TotalPriceAfterDiscount.toFixed(2))}}function ci(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(2);a(),B("Loaded ",i.ItemsBarCode.length," of ",i._SharedObjectModelService.TotalItems,"")}}function si(o,d){if(o&1&&u(0),o&2){let i=d.item;B(" ",i.Name," - ",i.Code," ")}}function _i(o,d){if(o&1){let i=b();s(0,"div",102)(1,"span",103),u(2),I(3,"translate"),c(),s(4,"input",104),f("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscountRate,e)||(n.GlobalDiscountRate=e),p(e)}),c()()}if(o&2){let i=r(2);a(2),D("",h(3,2,"SaleInvoice.DiscountRate")," %"),a(2),w("ngModel",i.GlobalDiscountRate)}}function pi(o,d){if(o&1){let i=b();s(0,"div",102)(1,"span",103),u(2),I(3,"translate"),c(),s(4,"input",105),f("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscount,e)||(n.GlobalDiscount=e),p(e)}),c()()}if(o&2){let i=r(2);a(2),D(" ",h(3,2,"SaleInvoice.Discount"),""),a(2),w("ngModel",i.GlobalDiscount)}}function di(o,d){o&1&&(s(0,"label",31),u(1),I(2,"translate"),c()),o&2&&(a(),g(h(2,1,"Table.DocDate")))}function mi(o,d){if(o&1&&(s(0,"span",67),u(1),I(2,"date"),c()),o&2){let i=r(2);a(),D(" ",L(2,1,i.Invoice.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function ui(o,d){if(o&1){let i=b();s(0,"p-calendar",106),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.DocDate,e)||(n.Invoice.DocDate=e),p(e)}),c()}if(o&2){let i=r(2);w("ngModel",i.Invoice.DocDate),m("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function vi(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(3);a(),B("Loaded ",i.StoreArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ii(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function hi(o,d){if(o&1){let i=b();s(0,"div",34)(1,"p",107),u(2),I(3,"translate"),c(),s(4,"ng-select",108,7),f("clear",function(){_(i);let e=r(2);return p(e.StoreArr=[])})("focus",function(){_(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(5),n=r(2);return p(n.ChangeSearchApi("Storages",e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.StoreId,"Store"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.StoreId,e)||(n.Invoice.StoreId=e),p(e)}),x(6,vi,2,2,"ng-template",25)(7,Ii,1,1,"ng-template",26),c()()}if(o&2){let i=r(2);a(2),g(h(3,7,"BuyInvoice.Storage")),a(2),m("items",i.StoreArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.StoreId)}}function gi(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(3);a(),B("Loaded ",i.SupplierArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function fi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function xi(o,d){if(o&1){let i=b();s(0,"div",109)(1,"p",107),u(2),I(3,"translate"),c(),s(4,"ng-select",110,8),f("clear",function(){_(i);let e=r(2);return p(e.SupplierArr=[])})("focus",function(){_(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(5),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(5),n=r(2);return p(n.ChangeSearchApi("Suppliers",e))})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.SupplierId,"Supplier"))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.SupplierId,e)||(n.Invoice.SupplierId=e),p(e)}),x(6,gi,2,2,"ng-template",25)(7,fi,1,1,"ng-template",26),c()()}if(o&2){let i=r(2);m("ngClass",i.ScreenName=="BuyOffer"?"col-lg-12":""),a(2),g(h(3,8,"BuyOffer.Supplier")),a(2),m("items",i.SupplierArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.SupplierId)}}function Si(o,d){if(o&1){let i=b();s(0,"input",113),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientName,e)||(n.Invoice.ClientName=e),p(e)}),c()}if(o&2){let i=r(3);m("disabled",!0),w("ngModel",i.Invoice.ClientName)}}function yi(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(4);a(),B("Loaded ",i.ClientArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ci(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Ti(o,d){if(o&1){let i=b();s(0,"ng-select",114,9),f("clear",function(){_(i);let e=r(3);return p(e.ClientArr=[])})("focus",function(){_(i);let e=C(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=C(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("scrollToEnd",function(){_(i);let e=C(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.ClientId,"Client"))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientId,e)||(n.Invoice.ClientId=e),p(e)}),x(2,yi,2,2,"ng-template",25)(3,Ci,1,1,"ng-template",26),c()}if(o&2){let i=r(3);m("items",i.ClientArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.ClientId)}}function bi(o,d){if(o&1&&(s(0,"div",109)(1,"p",107),u(2),I(3,"translate"),c(),x(4,Si,1,2,"input",111)(5,Ti,4,6,"ng-select",112),c()),o&2){let i=r(2);m("ngClass",i.ScreenName=="SaleOffer"?"col-lg-12":""),a(2),g(h(3,4,"SaleOffer.Client")),a(2),m("ngIf",i.Invoice.ClientType==1),a(),m("ngIf",i.Invoice.ClientType==2)}}function Di(o,d){if(o&1){let i=b();s(0,"div",115)(1,"div",116)(2,"div",117)(3,"label",118),u(4),I(5,"translate"),c(),s(6,"div",119)(7,"input",120),f("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(1))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),c()()()(),s(8,"div",116)(9,"div",117)(10,"label",121),u(11),I(12,"translate"),c(),s(13,"div",119)(14,"input",122),f("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(2))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),c()()()()()}if(o&2){let i=r(2);a(4),D(" ",h(5,8,"SaleInvoice.Window")," "),a(3),w("ngModel",i.Invoice.ClientType),m("checked",i.Invoice.ClientType==1)("value",1),a(4),D(" ",h(12,10,"SaleInvoice.Always")," "),a(3),m("value",2)("checked",i.Invoice.ClientType==2),w("ngModel",i.Invoice.ClientType)}}function wi(o,d){if(o&1&&(s(0,"div",123)(1,"div",124)(2,"p",125),u(3),I(4,"translate"),c(),T(5,"input",126),c(),s(6,"div",124)(7,"p",125),u(8),I(9,"translate"),c(),T(10,"input",127),c()()),o&2){let i=r(2);a(3),g(h(4,6,"NetThamBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetThamBranch),a(3),g(h(9,8,"NetOtherBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetOtherBranch)}}function Ai(o,d){o&1&&(s(0,"option",131),u(1),I(2,"translate"),c()),o&2&&(m("value",3),a(),g(h(2,2,"SaleInvoice.Delivery")))}function Ni(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(4);a(),B("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Pi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Vi(o,d){if(o&1){let i=b();s(0,"div",33)(1,"div",34)(2,"p",125),u(3),I(4,"translate"),c(),s(5,"input",138),I(6,"translate"),f("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Cash,e)||(n.Invoice.Cash=e),p(e)}),c()(),s(7,"div",34)(8,"p",125),u(9),I(10,"translate"),c(),s(11,"ng-select",139,10),f("clear",function(){_(i);let e=r(3);return p(e.TreasuryArr=[])})("focus",function(){_(i);let e=C(12),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(12),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(12),n=r(3);return p(n.ChangeSearchApi("Treasury",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.TreasuryId,"Treasury"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.TreasuryId,e)||(n.Invoice.TreasuryId=e),p(e)}),x(13,Ni,2,2,"ng-template",25)(14,Pi,1,1,"ng-template",26),c()()()}if(o&2){let i=r(3);a(3),g(h(4,12,"BuyInvoice.Cash")),a(2),E("placeholder",h(6,14,"SaleInvoice.Cash")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Cash),a(4),g(h(10,16,"BuyInvoice.Treasury")),a(2),m("items",i.TreasuryArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Cash==""||i.Invoice.Cash==0),w("ngModel",i.Invoice.TreasuryId)}}function Mi(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(4);a(),B("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Bi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Ei(o,d){if(o&1){let i=b();s(0,"div",33)(1,"div",34)(2,"p",125),u(3),I(4,"translate"),c(),s(5,"input",140),I(6,"translate"),f("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Visa,e)||(n.Invoice.Visa=e),p(e)}),c()(),s(7,"div",34)(8,"p",125),u(9),I(10,"translate"),c(),s(11,"ng-select",141,11),f("clear",function(){_(i);let e=r(3);return p(e.BankAccountArr=[])})("focus",function(){_(i);let e=C(12),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(12),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(12),n=r(3);return p(n.ChangeSearchApi("BankAccounts",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.BankAccountId,"BankAccount"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.BankAccountId,e)||(n.Invoice.BankAccountId=e),p(e)}),x(13,Mi,2,2,"ng-template",25)(14,Bi,1,1,"ng-template",26),c()()()}if(o&2){let i=r(3);a(3),g(h(4,11,"BuyInvoice.Visa")),a(2),E("placeholder",h(6,13,"SaleInvoice.Visa")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Visa),a(4),g(h(10,15,"BuyInvoice.Bank")),a(2),m("items",i.BankAccountArr)("dropdownPosition","top")("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Visa==""||i.Invoice.Visa==0),w("ngModel",i.Invoice.BankAccountId)}}function Ri(o,d){if(o&1&&(s(0,"small",99),u(1),c()),o&2){let i=r(4);a(),B("Loaded ",i.EmployeeArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function ki(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Ui(o,d){if(o&1){let i=b();s(0,"div",142)(1,"p",107),u(2),I(3,"translate"),c(),s(4,"ng-select",108,12),f("clear",function(){_(i);let e=r(3);return p(e.EmployeeArr=[])})("focus",function(){_(i);let e=C(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(5),n=r(3);return p(n.ChangeSearchApi("Employee",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.EmployeeId,"Employee"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.EmployeeId,e)||(n.Invoice.EmployeeId=e),p(e)}),x(6,Ri,2,2,"ng-template",25)(7,ki,1,1,"ng-template",26),c()()}if(o&2){let i=r(3);a(2),g(h(3,7,"BuyReport.Employee")),a(2),m("items",i.EmployeeArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.EmployeeId)}}function Oi(o,d){o&1&&(s(0,"p",125),u(1),I(2,"translate"),c()),o&2&&(a(),g(h(2,1,"BuyInvoice.Debt")))}function Fi(o,d){if(o&1&&T(0,"input",143),o&2){let i=r(3);E("value",i.Invoice.Debt),m("disabled",!0)}}function Gi(o,d){if(o&1){let i=b();s(0,"div",128)(1,"div",129)(2,"p",125),u(3),I(4,"translate"),c(),s(5,"select",130),f("change",function(){_(i);let e=r(2);return p(e.ChangePamentType(e.Invoice.PaymentType))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.PaymentType,e)||(n.Invoice.PaymentType=e),p(e)}),s(6,"option",131),u(7),I(8,"translate"),c(),s(9,"option",131),u(10),I(11,"translate"),c(),x(12,Ai,3,4,"option",132),c()(),x(13,Vi,15,18,"div",133)(14,Ei,15,17,"div",133)(15,Ui,8,9,"div",134),s(16,"div",135),x(17,Oi,3,3,"p",136)(18,Fi,1,2,"input",137),c()()}if(o&2){let i=r(2);a(3),g(h(4,12,"BuyInvoice.PamentType")),a(2),w("ngModel",i.Invoice.PaymentType),a(),m("value",1),a(),g(h(8,14,"SaleInvoice.Cash")),a(2),m("value",2),a(),g(h(11,16,"SaleInvoice.Debt")),a(2),m("ngIf",i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType==3),a(2),m("ngIf",i.Invoice.PaymentType==2),a(),m("ngIf",i.Invoice.PaymentType==2&&i.Invoice.Debt!=null)}}function ji(o,d){if(o&1&&(s(0,"div",46)(1,"span",144),u(2),I(3,"translate"),c(),s(4,"span",48),u(5),c()()),o&2){let i=r(2);a(2),g(h(3,2,"SaleInvoice.TotalDiscount")),a(3),g(i.Invoice.TotalDisc.toFixed(2))}}function Wi(o,d){if(o&1&&(s(0,"div",46)(1,"span",145),u(2),I(3,"translate"),c(),s(4,"span",48),u(5),c()()),o&2){let i=r(2);a(2),D("",h(3,2,"SaleInvoice.DiscountRate"),"%"),a(3),g(i.Invoice.TotalDiscRate.toFixed(2))}}function Hi(o,d){if(o&1&&(s(0,"span"),u(1),c()),o&2){let i=r(2);a(),D(" ",i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.Vat,"% ")}}function Li(o,d){if(o&1&&(s(0,"span"),u(1),c()),o&2){let i=r(2);a(),D(" ",i.Invoice.TotalVatRate.toFixed(2),"% ")}}function $i(o,d){if(o&1&&(s(0,"div",53)(1,"span",146),u(2),I(3,"translate"),c(),s(4,"span",48),u(5),c()()),o&2){let i=r(2);a(2),g(h(3,2,"BuyInvoice.ReturnAmount")),a(3),g(i._SharedObjectModelService.ReturnAmount.toFixed(2))}}function Qi(o,d){if(o&1){let i=b();s(0,"button",147),f("click",function(){_(i);let e=r(2);return p(e.Save())}),u(1),I(2,"translate"),s(3,"span",62),u(4,"Ctrl + Space"),c(),T(5,"i",148),c()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Save")," ")}}function Ji(o,d){if(o&1){let i=b();s(0,"button",150),f("click",function(){_(i);let e=r(3);return p(e.Save())}),u(1),I(2,"translate"),s(3,"span",62),u(4,"Ctrl + Space"),c()()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Update")," ")}}function zi(o,d){if(o&1&&(s(0,"span"),x(1,Ji,5,4,"button",149),c()),o&2){let i=r(2);a(),m("ngIf",i.Invoice.Id!=0)}}function Ki(o,d){if(o&1){let i=b();s(0,"button",151),f("click",function(){_(i);let e=r(2);return p(e.OpenGl())}),u(1),I(2,"translate"),c()}o&2&&(a(),D(" ",h(2,1,"Model.Gl")," "))}function qi(o,d){if(o&1){let i=b();s(0,"button",152),f("click",function(){_(i);let e=r(2);return p(e.HoldInvoice())}),u(1," \u062A\u0639\u0644\u064A\u0642 Hold "),s(2,"span",62),u(3,"Ctrl + X"),c()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function Zi(o,d){if(o&1){let i=b();s(0,"button",153),f("click",function(){_(i);let e=r(2);return p(e.ShowHoldInvoice())}),u(1," \u0639\u0631\u0636 Hold "),s(2,"span",62),u(3,"Ctrl + Z"),c()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function Xi(o,d){if(o&1){let i=b();T(0,"app-modal-header",16),s(1,"div",17)(2,"div",18)(3,"p-table",19),x(4,Xt,31,17,"ng-template",20)(5,li,56,47,"ng-template",21),c()()(),s(6,"div",22)(7,"div",23)(8,"ng-select",24,4),f("clear",function(){_(i);let e=r();return p(e.ItemsBarCode=[])})("focus",function(){_(i);let e=C(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=C(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=C(9),n=r();return p(n.HandleProductCode(e))})("close",function(){_(i);let e=r();return e._AppModeService.ResetCurrentPage(),p(e.ItemsBarCode=[])})("open",function(){_(i);let e=r();return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=C(9),n=r();return n.SelectProductScan(n.ProductBarCodeId),e.handleClearClick(),e.blur(),p(n.ItemsBarCode=[])}),N("ngModelChange",function(e){_(i);let n=r();return A(n.ProductBarCodeId,e)||(n.ProductBarCodeId=e),p(e)}),x(10,ci,2,2,"ng-template",25)(11,si,1,2,"ng-template",26),c()(),s(12,"div",27),x(13,_i,5,4,"div",28)(14,pi,5,4,"div",28),c()(),s(15,"div",29)(16,"div",30)(17,"label",31),u(18),I(19,"translate"),c(),T(20,"input",32),c(),s(21,"div",33)(22,"div",34)(23,"label",35),u(24),I(25,"translate"),c(),s(26,"input",36),N("ngModelChange",function(e){_(i);let n=r();return A(n.Invoice.Notes,e)||(n.Invoice.Notes=e),p(e)}),c()(),s(27,"div",34),x(28,di,3,3,"label",37)(29,mi,3,4,"span",38)(30,ui,1,5,"p-calendar",39),c()(),s(31,"div",33),x(32,hi,8,9,"div",40)(33,xi,8,10,"div",41)(34,bi,6,6,"div",41),c(),x(35,Di,15,12,"div",42)(36,wi,11,10,"div",43)(37,Gi,19,18,"div",44),c(),s(38,"div",45)(39,"div",46)(40,"span",47),u(41),I(42,"translate"),c(),s(43,"span",48),u(44),c()(),s(45,"div",46)(46,"span",47),u(47),I(48,"translate"),c(),s(49,"span",48),u(50),c()(),x(51,ji,6,4,"div",49)(52,Wi,6,4,"div",49),s(53,"div",50)(54,"span",51),u(55),I(56,"translate"),x(57,Hi,2,1,"span",52)(58,Li,2,1,"span",52),c(),s(59,"span",48),u(60),c()(),s(61,"div",53)(62,"span",54),u(63),I(64,"translate"),c(),s(65,"span",48),u(66),c()(),x(67,$i,6,4,"div",55),c(),s(68,"div",56),x(69,Qi,6,4,"button",57)(70,zi,2,1,"span",52)(71,Ki,3,3,"button",58)(72,qi,4,1,"button",59)(73,Zi,4,1,"button",60),s(74,"button",61),f("click",function(){let e=_(i).$implicit,n=r();return e.close("Close click"),p(n.ResetPage())}),u(75),I(76,"translate"),s(77,"span",62),u(78,"Esc"),c()()()}if(o&2){let i=r();m("PageTitle",i.PageTitle),a(3),m("value",i.Invoice.InvoiceDetails)("scrollable",!0),a(5),m("items",i.ItemsBarCode)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductBarCodeId),a(5),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(4),g(h(19,42,"Table.DocNo")),a(2),m("value",i.Invoice.DocNo)("disabled",!0),a(4),g(h(25,44,"Table.Notes")),a(2),w("ngModel",i.Invoice.Notes),a(2),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(2),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"&&i._DefaultSettingsService.DefaultSettings.HideSorage==!1),a(),m("ngIf",i.ScreenName=="BuyOffer"||i.ScreenName=="BuyInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(4),g(h(42,46,"ProductCount")),a(3),g(i.Invoice.InvoiceDetails.length),a(3),g(h(48,48,"SaleInvoice.TotalInvoice")),a(3),g(i.Invoice.TotalInvoice.toFixed(2)),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(3),D("",h(56,50,"SaleInvoice.TotalVat")," "),a(2),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i.Invoice.Id>0),a(2),g(i.Invoice.TotalInvoiceVatAmount.toFixed(2)),a(3),g(h(64,52,"SaleInvoice.TotalAfterVat")),a(3),g(i.Invoice.TotalInvoiceAfterVat.toFixed(2)),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i._Apiservice.environment.SystemUpdate&&(i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice")||i.ScreenName!="BuyInvoice"&&i.ScreenName!="SaleInvoice"),a(),m("ngIf",i.Invoice.Id>0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),D(" ",h(76,54,"Model.Close")," ")}}function Yi(o,d){if(o&1){let i=b();s(0,"app-table",154),f("ShowToEditeEvent",function(){let e=_(i).$implicit,n=r();return p(n.GetSaleHold(e))}),c(),s(1,"div",56)(2,"button",155),f("click",function(){let e=_(i).$implicit;return p(e.close("Close click"))}),u(3),I(4,"translate"),c()()}if(o&2){let i=r();m("PageTitle","SaleInvoice.AllHold")("TablePaging",i.OutTablePaging)("GetById","HoldInvoiceEP/GetById")("DeleteUrl","HoldInvoiceEP/Delete"),a(3),g(h(4,5,"Model.Close"))}}function en(o,d){if(o&1&&(s(0,"tr")(1,"td")(2,"span",159),u(3),c()(),s(4,"td")(5,"span",159),u(6),c()()()),o&2){let i=d.$implicit;a(3),g(i.Name+" - "+i.UnitFactor),a(3),g(i.Qty)}}function tn(o,d){if(o&1&&(s(0,"div",156)(1,"table",157)(2,"thead")(3,"tr")(4,"th"),u(5),I(6,"translate"),c(),s(7,"th"),u(8),I(9,"translate"),c()()(),s(10,"tbody"),x(11,en,7,2,"tr",158),c()()()),o&2){let i=r();a(5),g(h(6,3,"SaleInvoice.Name")),a(3),g(h(9,5,"Table.Balance")),a(3),m("ngForOf",i.ItemBalanceList)}}var Jn=(()=>{let d=class d{constructor(t,e,n,l,v,S){this._ScaleSettingsService=t,this._ActivatedRoute=e,this._SharedObjectModelService=n,this._DefaultSettingsService=l,this._AppModeService=v,this._Apiservice=S,this.SignalR=!1,this.GlResponse=!1,this.TablePaging={},this.OutTablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.SupplierArr=[],this.ClientArr=[],this.TreasuryArr=[],this.BankAccountArr=[],this.EmployeeArr=[],this.StoreArr=[],this.ItemBalanceList=[],this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this.ItemsBarCode=[],this.ProductBarCodeId=null,this.Weight=""}ngOnChanges(){let t=Number(this._ActivatedRoute.snapshot.queryParams.Id);t>0&&this.GetByIdRoute(t)}ngOnInit(){this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}StartConnection(){this.Hub_Connection=new et().withUrl(`${fe.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:Ye.WebSockets}).build(),this.Hub_Connection.start().then(()=>{}).catch(t=>{console.log("Error Hub Connection",t)})}ServerListener(){this.Hub_Connection?.on(`Add${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&e.Id!=t.UserId&&this.GetPageInfo()}),this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(alert(this._AppModeService._Translate.instant("Show.UpdateModelAnother")),this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(alert(this._AppModeService._Translate.instant("Show.DeleteModelAnother")),this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this._SharedObjectModelService.Paging.DataReturn=this._SharedObjectModelService.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}GetPageInfo(){this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:t=>{t.IsSuccess==!0&&t.Obj!=null?(this.Invoice.DocNo=t.Obj,this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(t.Message)},error:t=>{this._AppModeService.DisabledButton=!1}})}OpenModal(){this._AppModeService.DisabledButton=!0,this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ChangeSearchApi(t,e){let n="";n=`${e.searchTerm}`.trim(),(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let l={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Storages"&&(l.BranchFilter=!0),t=="Treasury"&&(l.BranchFilter=!0),t=="Items"&&(l.Columns=["Id","Name","Code"],l.SearchField="Code"),this._Apiservice.post("Global/GetAll",l,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?this.HandleResponse(v.Obj,t):this._AppModeService._Toastr.error(v.Message)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Suppliers"&&(this.SupplierArr=this._SharedObjectModelService.RemoveDuplicates(this.SupplierArr.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ClientArr=this._SharedObjectModelService.RemoveDuplicates(this.ClientArr.concat(t.DataReturn),"Id")),e=="Storages"&&(this.StoreArr=this._SharedObjectModelService.RemoveDuplicates(this.StoreArr.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id")),e=="Employee"&&(this.EmployeeArr=this._SharedObjectModelService.RemoveDuplicates(this.EmployeeArr.concat(t.DataReturn),"Id")),e=="Items"&&(this.ItemsBarCode=this._SharedObjectModelService.RemoveDuplicates(this.ItemsBarCode.concat(t.DataReturn),"Id").map(n=>k(R({},n),{NameAndCode:n.Code!=null?`${n.Name} - ${n.Code}`:`${n.Name}`})))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Supplier"&&(n=this.SupplierArr),e=="Client"&&(n=this.ClientArr),e=="Store"&&(n=this.StoreArr),e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr),e=="Employee"&&(n=this.EmployeeArr);let l=n.find(v=>v.Id==t);if(l==null){this._AppModeService.DontPlay();return}else this.Invoice[`${e}Id`]=t,this.Invoice[`${e}Name`]=l.Name,e=="Supplier"&&this.GetNetSupplier(t),e=="Client"&&this.GetNetClient(t)}else this.Invoice[`${e}Id`]=null,this.Invoice[`${e}Name`]="",(e=="Supplier"||e=="Client")&&(this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0})}HandleProductCode(t){let e="";if(e=`${t.searchTerm}`.trim(),e=="null"&&(t.searchTerm="",e="",t.searchTerm=e),e!=""){for(let n=0;n<this._ScaleSettingsService.ScaleSettingsArr.length;n++){let l=this._ScaleSettingsService.ScaleSettingsArr[n];if(e.length==l.BarCodeLength&&e.startsWith(l.ZaraNumber)){let v=e.substring(l.ZaraNumber.length,l.BarCodeLength).substring(0,l.ProductCodeLength);this.Weight=e.substring(l.ZaraNumber.length).substring(l.ProductCodeLength);let S=Number(this.Weight.substring(0,2)),y=Number(this.Weight.substring(2,this.Weight.length));this.Weight=`${S}.${y}`,t.searchTerm=v,this.ChangeSearchApi("Items",t);break}}return}else this.ChangeSearchApi("Items",t)}SelectProductScan(t){if(t!=null&&t>0){let e=this.ItemsBarCode.find(v=>v.Id==t),n=this.Invoice.InvoiceDetails.findIndex(v=>v.ProductId===null),l=this.Invoice.InvoiceDetails[n];if(l!=null)l.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],l.ProductId=t,this.AfterSelectem(t,n);else{this.AppendRow();let v=this.Invoice.InvoiceDetails.findIndex(y=>y.ProductId===null),S=this.Invoice.InvoiceDetails[v];S.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],S.ProductId=t,this.AfterSelectem(t,v)}this.ItemsBarCode=[],this.ProductBarCodeId=null}}ChangeSearchApiDetails(t,e,n){let l=`${e.searchTerm}`.trim();(l==""||l=="null")&&(e.searchTerm="",l="");let v="";this.ScreenName=="BuyInvoice"&&t=="Items"&&(v="ProductType != 2"),this.ScreenName=="SaleInvoice"&&this._DefaultSettingsService.DefaultSettings.HideSorage==!0&&t=="Items"&&(v="ProductType = 2"),this._AppModeService.CurrentPage+=1;let S={TableName:t,Columns:["Id","Name"],Conditions:v,PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:l,SearchField:"Name"};if(t=="Items"&&(S.Columns=["Id","Name","Code"],S.ItemWithItemUnit=!0),t=="ItemUnits"){let y=this.Invoice.InvoiceDetails[n].ProductId==null?0:this.Invoice.InvoiceDetails[n].ProductId;S.Conditions=`ItemId = ${y}`,S.Join=!0,S.JoinTables=["Units U"],S.NoPaging=!0,S.JoinConditions=["T.UnitId = U.Id"],S.Columns=["T.Id","U.Name","T.UnitFactor"],S.SearchField="U.Name"}this._Apiservice.post("Global/GetAll",S,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:y=>{y.IsSuccess==!0&&y.Obj!=null?this.HandleResponseDetails(y.Obj,t,n):this._AppModeService._Toastr.error(y.Message)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Items"&&(this.Invoice.InvoiceDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.Invoice.InvoiceDetails[n].Items.concat(t.DataReturn),"Id"),this.Invoice.InvoiceDetails[n].Items=this.Invoice.InvoiceDetails[n].Items.map(l=>k(R({},l),{NameAndCode:l.Code!=null?`${l.Name} - ${l.Code}`:`${l.Name}`}))),e=="ItemUnits"&&(this.Invoice.InvoiceDetails[n].ProductUnits=t.DataReturn.map(l=>k(R({},l),{NameAndUnitFactor:l.UnitFactor!=null?`${l.Name} - ${l.UnitFactor}`:`${l.Name}`})))}AppendRow(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};this.Invoice.InvoiceDetails.push(t),this._AppModeService.AppendTd()}RemoveRow(t){return this.Invoice.InvoiceDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorFirstRow")),!1):(this.Invoice.InvoiceDetails.splice(t,1),this.CalcInvoice(),!0)}SelectItem(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].Items.find(l=>l.Id==t);if(n!=null)this.Invoice.InvoiceDetails[e].ProductId=n.Id,this.Invoice.InvoiceDetails[e].ProductName=n.Name,this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.AfterSelectem(n.Id,e);else{this._Apiservice.DontPlay();return}}else this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}AfterSelectem(t,e){if(t>0){let n={TableName:"ItemUnits",Columns:["Id","Name"],NoPaging:!0,SearchText:"",SearchField:"Name"};n.Conditions=`ItemId = ${t}`,n.Join=!0,n.JoinTables=["Units U"],n.JoinConditions=["T.UnitId = U.Id"],n.Columns=["T.Id","U.Name","T.UnitFactor","T.DefaultUnit"],n.SearchField="U.Name",this._Apiservice.post("Global/GetAll",n,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{if(l.IsSuccess==!0&&l.Obj!=null){l.Obj.DataReturn=l.Obj.DataReturn.map(y=>k(R({},y),{NameAndUnitFactor:y.UnitFactor!=null?`${y.Name} - ${y.UnitFactor}`:`${y.Name}`}));let v=l.Obj.DataReturn,S=v.find(y=>y.DefaultUnit==!0);if(S&&this.Invoice.InvoiceDetails.find(P=>P.ProductId==t&&P.ProductUnitId==S.Id)==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:S.Id,NameAndUnitFactor:S.Name+" - "+S.UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=S.Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(S.Id,e):this.ChangeGlobalDis("");return}for(let y=0;y<v.length;y++){let P=this.Invoice.InvoiceDetails.find(U=>U.ProductId==t&&U.ProductUnitId==v[y].Id);if(P==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:v[y].Id,NameAndUnitFactor:v[y].Name+" - "+v[y].UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=v[y].Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(v[y].Id,e):this.ChangeGlobalDis("");break}P!=null&&y==v.length-1&&this.Invoice.InvoiceDetails.splice(e,1)}this.CalcInvoice()}else this._AppModeService._Toastr.error(l.Message)}})}}SelectUnit(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].ProductUnits.find(l=>l.Id==t);if(n!=null){if(this.Invoice.InvoiceDetails[e].ProductUnitId=n.Id,this.Invoice.InvoiceDetails[e].ProductUnitName=n.Name,this.ScreenName=="SaleInvoice"){this._AppModeService.DisabledButton=!0;let l={ProductId:this.Invoice.InvoiceDetails[e].ProductId,ProductUnitId:n.Id};this._Apiservice.post("ItemEP/ProductPice",l,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this.Invoice.InvoiceDetails[e].Price=v.Obj,this.ChangeGlobalDis(""),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(v.Message))},error:v=>{this._AppModeService.DisabledButton=!1},complete:()=>{this._AppModeService.DisabledButton=!1}})}}else{this._Apiservice.DontPlay();return}}else this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}ProductBalance(t,e){this._AppModeService.DisabledButton=!0;let n={ProductId:this.Invoice.InvoiceDetails[t].ProductId==null?0:this.Invoice.InvoiceDetails[t].ProductId,StoreId:this.Invoice.StoreId==null?0:this.Invoice.StoreId};this._Apiservice.post("ItemEP/ProductBalance",n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this._AppModeService.DisabledButton=!1,this.ItemBalanceList=l.Obj.StorageBalance,this._AppModeService._NgbModal.open(e,{size:"xl",centered:!0})):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(l.Message))},error:l=>{this._AppModeService.DisabledButton=!1}})}ChangeClientType(t){this.Invoice.ClientId=null,this.Invoice.ClientName=" ",t==1&&(this.Invoice.ClientType=1,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),t==2&&(this.Invoice.ClientType=2),this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0}}Discount(t,e){let n=this.Invoice.InvoiceDetails[e];t=="DiscountRate"&&Number(n.DiscountRate)>0&&(n.Discount=""),t=="Discount"&&Number(n.Discount)>0&&(n.DiscountRate=""),(Number(n.DiscountRate)>100||Number(n.DiscountRate)<0)&&(n.DiscountRate=""),Number(n.Discount)<0&&(n.Discount=""),Number(n.Price)<0&&(n.Price=""),Number(n.Quantity)<0&&(n.Quantity=""),this.CalcInvoice()}ChangeGlobalDis(t){let e="",n="";if(t=="GlobalDiscountRate"&&(n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),this.GlobalDiscount="",e=""),t=="GlobalDiscount"&&(e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate="",n=""),t==""){n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate=n,this.GlobalDiscount=e,Number(e)==0&&Number(n)==0&&this.CalcInvoice();return}for(let l=0;l<this.Invoice.InvoiceDetails.length;l++)Number(this.Invoice.InvoiceDetails[l].ProductId)>0&&(this.Invoice.InvoiceDetails[l].Discount=e,this.Invoice.InvoiceDetails[l].DiscountRate=n);this.CalcInvoice()}Button(t,e,n){e=="+"&&this.Invoice.InvoiceDetails[n][`${t}`]++,e=="-"&&(this.Invoice.InvoiceDetails[n][`${t}`]=this.Invoice.InvoiceDetails[n][`${t}`]<=0?0:this.Invoice.InvoiceDetails[n][`${t}`]-1),this.CalcInvoice()}GetNetSupplier(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("SupplierEP/SupplierNetAmount",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)}})}GetNetClient(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("ClientEP/ClientNetAmount",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)}})}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModelService.PageModel=e.Obj.model,this._SharedObjectModelService.Gl=e.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(e.Message)}})}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){this.Invoice={Id:t.Id,PaymentType:t.PaymentType,Name:t.Name,Notes:t.Notes,Code:t.Code,InvoiceCollection:t.InvoiceCollection,InvoiceCollected:t.InvoiceCollected,ClientType:t.ClientType,DocNo:t.DocNo,DocDate:new Date(t.DocDate),TotalInvoice:t.TotalInvoice,TotalDiscRate:t.TotalDiscRate,TotalDisc:t.TotalDisc,TotalInvoiceAfterDisc:t.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:t.TotalInvoiceAfterVat,TotalInvoiceVatAmount:t.TotalInvoiceVatAmount,TotalVatRate:t.TotalVatRate,Cash:t.Cash,Visa:t.Visa,Debt:t.Debt,SupplierId:t.SupplierId,SupplierName:t.SupplierName,ClientId:t.ClientId,ClientName:t.ClientName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,EmployeeId:t.EmployeeId,EmployeeName:t.EmployeeName,StoreId:t.StoreId,StoreName:t.StoreName,InvoiceDetails:t[`${this.ScreenName}Details`]},t.SupplierId>0&&(this.SupplierArr=[{Id:t.SupplierId,Name:t.SupplierName}]),t.ClientId>0&&(this.ClientArr=[{Id:t.ClientId,Name:t.ClientName}]),t.TreasuryId>0&&(this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName}]),t.BankAccountId>0&&(this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]),t.EmployeeId>0&&(this.EmployeeArr=[{Id:t.EmployeeId,Name:t.EmployeeName}]),t.StoreId>0&&(this.StoreArr=[{Id:t.StoreId,Name:t.StoreName}]);for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=this.Invoice.InvoiceDetails[e];n.Discount=n.Discount==0?"":n.Discount,n.DiscountRate=n.DiscountRate==0?"":n.DiscountRate,this.Invoice.InvoiceDetails[e].Items=[{Id:n.ProductId,Name:n.ProductName,NameAndCode:n.ProductName}],this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:n.ProductUnitId,Name:n.ProductUnitName,NameAndUnitFactor:n.ProductUnitName}]}this._AppModeService.DisabledButton=!1}TotalInvoiceVatAmount(){let t=0;for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=Number(this.Invoice.InvoiceDetails[e].Price),l=Number(this.Invoice.InvoiceDetails[e].Quantity),v=n*l,S=Number(this.Invoice.InvoiceDetails[e].Vat),y=Number(this.Invoice.InvoiceDetails[e].Discount),P=Number(this.Invoice.InvoiceDetails[e].DiscountRate);if(y>0&&(t+=(v-y)*(S/100)),P>0){let U=P/100*v;t+=(v-U)*(S/100)}y==0&&P==0&&(t+=v*(S/100))}return Number(t)}CalcInvoice(){this.Invoice.TotalDiscRate=0,this.Invoice.TotalInvoiceAfterDisc=0,this.Invoice.TotalInvoiceAfterVat=0,this.Invoice.TotalVatRate=0,this.Invoice.TotalDisc=0,this.Invoice.TotalInvoice=0,this.Invoice.TotalInvoiceVatAmount=0;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=Number(this.Invoice.InvoiceDetails[t].Price),n=Number(this.Invoice.InvoiceDetails[t].Quantity),l=Number(this.Invoice.InvoiceDetails[t].Discount),v=Number(this.Invoice.InvoiceDetails[t].DiscountRate),S=Number(this.Invoice.InvoiceDetails[t].Vat),y=e*n;this.Invoice.InvoiceDetails[t].TotalPrice=Number(y),this.Invoice.TotalInvoice+=Number(y),this.Invoice.InvoiceDetails[t].Discount=l==0?"":l;let P=0;v>0&&(P=v/100*y),l>0&&(P=l),this.Invoice.TotalDisc+=P,this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount=y-P,this.Invoice.InvoiceDetails[t].TotalPriceAfterVat=Number((e*n-P)*(S/100)+(e*n-P))}this.Invoice.TotalDiscRate=this.Invoice.TotalInvoice==0?0:Number(this.Invoice.TotalDisc/this.Invoice.TotalInvoice*100),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoice-this.Invoice.TotalDisc),this.Invoice.TotalInvoiceVatAmount=this.TotalInvoiceVatAmount(),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterDisc+this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=this.Invoice.TotalInvoiceAfterDisc==0?0:Number(this.Invoice.TotalInvoiceVatAmount/this.Invoice.TotalInvoiceAfterDisc*100),this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDiscRate),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalInvoiceVatAmount=Number(this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalVatRate),this.Invoice.TotalInvoice=Number(this.Invoice.TotalInvoice),this.Invoice.TotalDisc=Number(this.Invoice.TotalDisc),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterVat),this.ChangeCash()}Validate(){if((this.ScreenName=="BuyOffer"||this.ScreenName=="BuyInvoice")&&(this.Invoice.SupplierId==0||this.Invoice.SupplierId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterSupplier")),!1;if(this.ScreenName=="BuyInvoice"&&(this.Invoice.StoreId==0||this.Invoice.StoreId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterStore")),!1;if(this.ScreenName=="SaleOffer"&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.Invoice.DocDate==""||this.Invoice.DocDate==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterDate")),!1;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=t,n=Number(this.Invoice.InvoiceDetails[t].ProductId),l=Number(this.Invoice.InvoiceDetails[t].Price),v=Number(this.Invoice.InvoiceDetails[t].Quantity),S=Number(this.Invoice.InvoiceDetails[t].Discount),y=Number(this.Invoice.InvoiceDetails[t].DiscountRate),P=Number(this.Invoice.InvoiceDetails[t].Vat),U=Number(this.Invoice.InvoiceDetails[t].ProductUnitId),at=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount),lt=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterVat);if(isNaN(n)||n<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterProduct")+" "+(e+1)),!1;if(U<=0||isNaN(U))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit")+" "+(e+1)),!1;if(this.Invoice.InvoiceDetails.filter(pe=>pe.ProductId==n&&pe.ProductUnitId==U).length>=2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(e+1)),!1;if(isNaN(l)||l<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterPrice")+" "+(e+1)),!1;if(isNaN(v)||v<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterQuantity")+" "+(e+1)),!1;if(isNaN(S)||S<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorDiscount")+" "+(e+1)),!1;if(isNaN(y)||y<0||y>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorDiscountRate")+" "+(e+1)),!1;if(isNaN(P)||P<0||P>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorVat")+" "+(e+1)),!1;if(lt<0||at<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorNetRow")+" "+(e+1)),!1}if(this.Invoice.TotalInvoice<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.TotalInvoiceAfterVat<0||this.Invoice.TotalInvoiceAfterVat<0&&this.Invoice.TotalInvoiceAfterDisc<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorTotal")),!1;if(this.ScreenName=="SaleInvoice"||this.ScreenName=="BuyInvoice"){if(Number(this.Invoice.Visa)<0||isNaN(Number(this.Invoice.Visa)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Cash)<0||isNaN(Number(this.Invoice.Cash)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Debt)<0||isNaN(Number(this.Invoice.Debt)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(Number(this.Invoice.Visa)>0&&(this.Invoice.BankAccountId<=0||this.Invoice.BankAccountId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterBank")),!1;if(Number(this.Invoice.Cash)>0&&(this.Invoice.TreasuryId<=0||this.Invoice.TreasuryId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterTreasury")),!1;if(this.Invoice.PaymentType==1&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)+Number(this.Invoice.Debt)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Debt)<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==3&&this.Invoice.EmployeeId==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SalesReport.ChooseEmployee")),!1}return!0}ChangePamentType(t){this.Invoice.BankAccountId=null,this.Invoice.BankAccountName="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.EmployeeId=null,this.Invoice.EmployeeName="",t==1&&(this.Invoice.PaymentType=1,this.Invoice.Visa="",this.Invoice.Debt="",this.Invoice.Cash=this.Invoice.TotalInvoiceAfterVat),t==2&&(this.Invoice.PaymentType=2,this.Invoice.Cash="",this.Invoice.Visa="",this.Invoice.Debt=this.Invoice.TotalInvoiceAfterVat),t==3&&(this.Invoice.Visa="",this.Invoice.Cash="",this.Invoice.Debt="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.BankAccountId=null,this.Invoice.BankAccountName=""),this.ChangeCash()}ChangeCash(){this.Invoice.PaymentType==2&&(this.Invoice.Debt=Number(this.Invoice.TotalInvoiceAfterVat-(Number(this.Invoice.Cash)+Number(this.Invoice.Visa)))),this.Invoice.PaymentType==1&&(this.Invoice.Cash=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Visa)),this.Invoice.Visa=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Cash))),this.Invoice.TreasuryId=Number(this.Invoice.Cash)==0?null:this.Invoice.TreasuryId,this.Invoice.BankAccountId=Number(this.Invoice.Visa)==0?null:this.Invoice.BankAccountId,this.Invoice.TreasuryName=Number(this.Invoice.Cash)==0?"":this.Invoice.TreasuryName,this.Invoice.BankAccountName=Number(this.Invoice.Visa)==0?"":this.Invoice.BankAccountName,this.Invoice.Cash=Number(this.Invoice.Cash)==0?"":this.Invoice.Cash,this.Invoice.Visa=Number(this.Invoice.Visa)==0?"":this.Invoice.Visa,this.Invoice.Debt=Number(this.Invoice.Debt)==0?"":this.Invoice.Debt,this.DefaultBankTreasury()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.PaymentType=t.SaleInvoicePaymentType>0?t.SaleInvoicePaymentType:1,t.SaleInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.SaleInvoiceStoreId,this.StoreArr.push({Id:t.SaleInvoiceStoreId,Name:t.SaleInvoiceStoreName})),t.SaleInvoiceClientType>0&&(this.Invoice.ClientType=t.SaleInvoiceClientType,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A")),this.ScreenName=="BuyInvoice"&&(this.Invoice.PaymentType=t.BuyInvoicePaymentType>0?t.BuyInvoicePaymentType:1,t.BuyInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.BuyInvoiceStoreId,this.StoreArr.push({Id:t.BuyInvoiceStoreId,Name:t.BuyInvoiceStoreName})))}DefaultBankTreasury(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.Cash>0&&t.SaleInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.SaleInvoiceTreasuryId,this.TreasuryArr.push({Id:t.SaleInvoiceTreasuryId,Name:t.SaleInvoiceTreasuryName})),this.Invoice.Visa>0&&t.SaleInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.SaleInvoiceBankAccountId,this.BankAccountArr.push({Id:t.SaleInvoiceBankAccountId,Name:t.SaleInvoiceBankAccountName}))),this.ScreenName=="BuyInvoice"&&(this.Invoice.Cash>0&&t.BuyInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.BuyInvoiceTreasuryId,this.TreasuryArr.push({Id:t.BuyInvoiceTreasuryId,Name:t.BuyInvoiceTreasuryName})),this.Invoice.Visa>0&&t.BuyInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.BuyInvoiceBankAccountId,this.BankAccountArr.push({Id:t.BuyInvoiceBankAccountId,Name:t.BuyInvoiceBankAccountName})))}Save(){if(this.CalcInvoice(),this.Validate()==!1)return;this.Invoice.Cash=this.Invoice.Cash==""?0:this.Invoice.Cash,this.Invoice.Visa=this.Invoice.Visa==""?0:this.Invoice.Visa,this.Invoice.Debt=this.Invoice.Debt==""?0:this.Invoice.Debt,this.Invoice[`${this.ScreenName}Details`]=this.Invoice.InvoiceDetails.map(e=>k(R({},e),{Discount:e.Discount==""?0:e.Discount,DiscountRate:e.DiscountRate==""?0:e.DiscountRate}));let t={Id:this.Invoice.Id,PaymentType:Number(this.Invoice.PaymentType),Name:this.Invoice.Name,Notes:this.Invoice.Notes,Code:this.Invoice.Code,InvoiceCollection:this.Invoice.InvoiceCollection,InvoiceCollected:this.Invoice.InvoiceCollected,ClientType:this.Invoice.ClientType,DocNo:this.Invoice.DocNo,DocDate:this._Apiservice.ConvertISODate(this.Invoice.DocDate),TotalInvoice:this.Invoice.TotalInvoice,TotalDiscRate:this.Invoice.TotalDiscRate,TotalDisc:this.Invoice.TotalDisc,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate,Cash:Number(this.Invoice.Cash),Visa:Number(this.Invoice.Visa),Debt:Number(this.Invoice.Debt),TreasuryId:this.Invoice.TreasuryId,TreasuryName:this.Invoice.TreasuryName,BankAccountId:this.Invoice.BankAccountId,BankAccountName:this.Invoice.BankAccountName,EmployeeId:this.Invoice.EmployeeId,EmployeeName:this.Invoice.EmployeeName,StoreId:this.Invoice.StoreId,StoreName:this.Invoice.StoreName,ClientId:this.Invoice.ClientId==null?0:this.Invoice.ClientId,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName};t[`${this.ScreenName}Details`]=this.Invoice[`${this.ScreenName}Details`],t.Id==0&&this._Apiservice.post(this.AddUrl,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._AppModeService._Toastr.success(e.Message),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(e.Obj)):this._AppModeService._Toastr.error(e.Message)}}),t.Id>0&&this._Apiservice.put(this.UpdateUrl,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{if(e.IsSuccess==!0&&e.Obj!=null){this._AppModeService._Toastr.success(e.Message);let n=e.Obj,l=this._SharedObjectModelService.Paging.DataReturn.find(v=>v.Id==n.Id);l!=null&&Object.assign(l,n),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(e.Message)}})}HoldInvoice(){let t=this.Invoice.InvoiceDetails.filter(l=>l.ProductId>0).map(l=>k(R({},l),{Discount:l.Discount==""?0:l.Discount,DiscountRate:l.DiscountRate==""?0:l.DiscountRate,Price:l.Price==""?0:l.Price}));if(t.length==0)return;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient"));return}let e=0;this.ScreenName=="SaleInvoice"&&(e=1),this.ScreenName=="BuyInvoice"&&(e=2);let n={ClientId:this.Invoice.ClientId,ClientType:this.Invoice.ClientType,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName,HoldType:e,HoldInvoiceDetails:t,Id:0,TotalInvoice:this.Invoice.TotalInvoice,TotalDisc:this.Invoice.TotalDisc,TotalDiscRate:this.Invoice.TotalDiscRate,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate};this._Apiservice.post("HoldInvoiceEP/Add",n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo()):this._AppModeService._Toastr.error(l.Message)}})}ShowHoldInvoice(){let t="",e=[],n=[],l="Name",v={};this.ScreenName=="SaleInvoice"&&(t="HoldType = 1",e=["Clients Client"],n=["T.ClientId = Client.Id"],l="Client.Name AS ClientName",v={SortName:"ClientName",CellName:"SaleInvoice.Client",ExistSearchField:"Client.Name"}),this.ScreenName=="BuyInvoice"&&(t="HoldType = 2",e=["Suppliers Supplier"],n=["T.SupplierId = Supplier.Id"],l="Supplier.Name AS SupplierName",v={SortName:"SupplierName",CellName:"BuyInvoice.Supplier",ExistSearchField:"Supplier.Name"}),this.OutTablePaging={InputType:"Table",Type:"TablePaging",GlobalData:{BranchFilter:!0,Url:"Global/GetAll",TableName:"HoldInvoice",Conditions:t,Join:!0,JoinTables:e,JoinConditions:n,Columns:["T.Id",l,"T.TotalInvoice","T.TotalDisc","T.TotalInvoiceVatAmount","T.TotalInvoiceAfterVat","T.Notes"]},Required:!1,TableCell:[v,{SortName:"TotalInvoice",CellName:"Table.Total"},{SortName:"TotalDisc",CellName:"Table.Discount"},{SortName:"TotalInvoiceVatAmount",CellName:"Table.Vat"},{SortName:"TotalInvoiceAfterVat",CellName:"Table.NetTotal"},{SortName:"Notes",CellName:"Table.Notes"}]},this._AppModeService._NgbModal.open(this.AllHoldModel,{size:"xl"})}GetSaleHold(t){let e=this._SharedObjectModelService.SecoundPageModel;this.Invoice.ClientId=e.ClientId,this.Invoice.ClientName=e.ClientName,this.Invoice.SupplierId=e.SupplierId,this.Invoice.SupplierName=e.SupplierName,e.SupplierId>0&&(this.SupplierArr=[{Id:e.SupplierId,Name:e.SupplierName}]),e.ClientId>0&&(this.ClientArr=[{Id:e.ClientId,Name:e.ClientName}]),this.Invoice.InvoiceDetails=[];for(let n=0;n<e.HoldInvoiceDetails.length;n++){let l=e.HoldInvoiceDetails[n];l.Items=[{Id:l.ProductId,Name:l.ProductName,NameAndCode:l.ProductName}],l.ProductUnits=[{Id:l.ProductUnitId,Name:l.ProductUnitName,NameAndUnitFactor:l.ProductUnitName}],this.Invoice.InvoiceDetails.push(l)}t.close("Close click"),this.CalcInvoice(),this.ChangeCash()}ResetPage(){this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this._DefaultSettingsService.ResetDate(this.Invoice),this.HandleMyDefaultSettings(),this._SharedObjectModelService.ReturnAmount=0}ResetDetails(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};if(this.Invoice.InvoiceDetails.length>0&&(this.Invoice.InvoiceDetails=this.Invoice.InvoiceDetails.filter(e=>e.ProductId!=0&&e.ProductId!=null&&e.ProductType!=2),this.Invoice.InvoiceDetails.length==0)){this.Invoice.InvoiceDetails.push(t),this.CalcInvoice();return}}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}handleKeyboardEvent(t){if(t.ctrlKey&&t.key==="Shift"&&(t.preventDefault(),this.AppendRow()),t.ctrlKey&&(t.key==="\u064A"||t.key==="d"||t.key==="D")&&(t.preventDefault(),this.Invoice.InvoiceDetails.length>1)){for(let e=this.Invoice.InvoiceDetails.length-1;e>0;e--)if(this.Invoice.InvoiceDetails[e].ProductId==null){this.RemoveRow(e);break}}t.ctrlKey&&(t.key===" "||t.key==="Space")&&(t.preventDefault(),this.Save()),t.ctrlKey&&(t.key==="\u0621"||t.key==="x"||t.key==="X")&&(t.preventDefault(),this.HoldInvoice()),t.ctrlKey&&(t.key==="\u0626"||t.key==="z"||t.key==="Z")&&(t.preventDefault(),this.ShowHoldInvoice())}};d.\u0275fac=function(e){return new(e||d)(j(rt),j(ge),j(ce),j(it),j(H),j(W))},d.\u0275cmp=Q({type:d,selectors:[["app-dynamic-invoice"]],viewQuery:function(e,n){if(e&1&&(O(Qt,5),O(Jt,5),O(zt,5),O(Kt,5)),e&2){let l;F(l=G())&&(n.GLComponent=l.first),F(l=G())&&(n.ContentModel=l.first),F(l=G())&&(n.AllHoldModel=l.first),F(l=G())&&(n.tableContainer=l.first)}},hostBindings:function(e,n){e&1&&f("keydown",function(v){return n.handleKeyboardEvent(v)},!1,ve)},inputs:{SignalR:"SignalR",GlResponse:"GlResponse",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[me,K],decls:9,vars:8,consts:[["content",""],["AllHold",""],["ItemBalance",""],["GLComponent",""],["Select",""],["SelectItem22",""],["SelectUnits",""],["SelectStore",""],["SelectSupplier",""],["SelectClient",""],["SelectTreasury",""],["SelectBank",""],["SelectEmployee",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","PrintUrl","DeleteUrl","OutModal"],[1,"modalConent"],[1,"col-8"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0","Invoicemodalbody"],["id","ProductTable",1,"col-12","card","p-0","ProductTable"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"bg-white","mt-3","mt-md-0","col-12","d-flex","flex-wrap","justify-content-between","align-items-center","bg-light","InvoiceContent"],["id","myContainer",1,"col-12","col-md-4"],["id","ngSelectComponent","placeholder","BarCode","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-6","col-xl-4","mx-auto","d-flex","flex-wrap","align-items-center","InvoiceDisInput"],["class","d-flex col-12 p-1 col-md-6 py-2",4,"ngIf"],[1,"bg-white","d-flex","flex-wrap","align-items-end","col-12","InvoiceContent"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","col-xl-1","p-1"],["for","DocNo"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-md-8","col-lg-4","col-xl-3","px-0","d-flex","flex-wrap","align-items-center"],[1,"col-12","col-md-6","px-md-1","my-1","my-lg-0"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],["for","DocNo",4,"ngIf"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class","  text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],["class","col-12 col-md-6 px-md-1 my-1 my-lg-0",4,"ngIf"],["class","col-12 col-md-6 px-md-1 my-1 my-lg-0",3,"ngClass",4,"ngIf"],["class","col-12  col-md-4 col-lg-2 px-1 d-flex text-center justify-content-center ",4,"ngIf"],["class","col-12 col-sm-6 col-md-4 col-lg-4 col-xl-3 p-1 d-flex flex-wrap",4,"ngIf"],["class","col-12 my-2 p-2 d-flex flex-wrap",4,"ngIf"],[1,"TotalContainer","d-flex","flex-wrap","justify-content-between"],[1,"col-3","col-lg-1","mx-auto","p-1","text-center"],["for","TotalInvoice",1,"text-white","m-0","p-0","text-center"],[1,"d-block","m-0","p-0","text-center"],["class","col-3 col-lg-1 mx-auto p-1 text-center",4,"ngIf"],[1,"col-4","col-lg-1","mx-auto","py-1","text-center"],["for","TotalVat",1,"text-white","m-0","p-0","text-center"],[4,"ngIf"],[1,"col-4","col-lg-1","mx-auto","p-1","text-center"],["for","TotalAfterVat",1,"text-white","m-0","p-0","text-center"],["class","col-4 col-lg-1 mx-auto p-1 text-center",4,"ngIf"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],["class","btn btn-success py-3 px-5",3,"disabled","click",4,"ngIf"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["class","btn btn-dark my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["class","btn btn-warning my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-light","border","border-1","border-dark","px-5","py-3",3,"click"],[1,"fs-5","mx-1"],[1,"col-"],[1,"d-none","d-lg-inline","text-danger","mx-2"],[1,"d-inline"],[1,"d-none","d-lg-inline","text-success","mx-2"],[1,"d-block","text-center"],[1,"col-3"],[1,"col-2"],["class","col-2",4,"ngIf"],[1,""],[1,"d-flex","justify-content-center","align-items-center","col-12"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-success",3,"click"],[1,"mx-1","fs-5","fw-bold","pi","pi-plus"],[1,"px-3","mx-1","text-center","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold","fs-5"],[1,"p-1"],[1,"text-dark","d-block","d-xl-none","text-center","col-12"],[1,"d-flex","col-12"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11","col-md-11","col-lg-10",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","placeholder","virtualScroll","searchable","ngModel"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-primary",3,"click","disabled"],[1,"pi","pi-eye","d-block","mx-auto","fw-bold","fs-2"],[1,"ngSelect","p-1"],[1,"text-dark","d-block","d-xl-none","text-center"],["bindLabel","NameAndUnitFactor","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","placeholder","disabled","virtualScroll","searchable","ngModel"],[1,"d-flex","justify-content-around","align-items-center","col-12"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-success",3,"click","disabled"],[1,"col-8","px-1"],["min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],[1,"px-1","mx-1","text-center","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"mx-1","px-1","pi","fw-bold","fs-2"],[1,"col-12"],["class","text-dark d-block text-center",4,"ngIf"],["min","0","type","number","appNumericInput","","class","form-control text-center px-0",3,"id","name","disabled","ngModel","change","keyup","ngModelChange",4,"ngIf"],["class","p-1",4,"ngIf"],[1,"text-center","col-12"],[1,"text-dark","d-block","d-md-none","text-center"],[1,"text-dark","d-block","text-center"],[1,"form-text","text-muted"],["min","0","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],["min","0","placeholder","%","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],[1,"d-flex","col-12","p-1","col-md-6","py-2"],[1,"d-block","col-5","col-md-5","px-1"],["type","number","appNumericInput","","placeholder","%","name","GlobalDiscountRate","id","GlobalDiscountRate",1,"form-control","text-center",3,"change","keyup","ngModelChange","ngModel"],["type","number","appNumericInput","","name","GlobalDiscount","id","GlobalDiscount",1,"form-control","text-center",3,"change","keyup","ngModelChange","ngModel"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"m-0"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],[1,"col-12","col-md-6","px-md-1","my-1","my-lg-0",3,"ngClass"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","change","close","open","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],["placeholder","Name","type","text","class","form-control text-center","name","","id","Client_Name",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["placeholder","Search","class","p-0 text-center","bindLabel","Name","bindValue","Id",3,"items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel","clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange",4,"ngIf"],["placeholder","Name","type","text","name","","id","Client_Name",1,"form-control","text-center",3,"ngModelChange","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],[1,"col-12","col-md-4","col-lg-2","px-1","d-flex","text-center","justify-content-center"],[1,"form-check","p-0","col-6","text-center"],[1,"d-flex","align-items-center"],["for","ClientType1",1,"p-0","col-6","text-center"],[1,"col-6","text-end"],["type","radio","name","ClientType","id","ClientType1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","ClientType2",1,"p-0","col-6","text-center"],["type","radio","name","ClientType","id","ClientType2",1,"form-check-input","mx-2",3,"change","ngModelChange","value","checked","ngModel"],[1,"col-12","col-sm-6","col-md-4","col-lg-4","col-xl-3","p-1","d-flex","flex-wrap"],[1,"col-6","px-2","text-center"],[1,"my-1"],["type","number","appNumericInput","","name","NetThamBranch","id","NetThamBranch",1,"form-control","text-center",3,"disabled","value"],["type","number","appNumericInput","","name","NetOtherBranch","id","NetOtherBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-12","my-2","p-2","d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-2","col-xl-1","px-1","my-1","my-lg-0"],["name","","id","",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],["class","col-12 col-md-8 col-lg-4 col-xl-3 px-0 d-flex flex-wrap align-items-center",4,"ngIf"],["class","col-12 col-md-4 col-lg-2 my-1 px-2",4,"ngIf"],[1,"col-12","col-md-4","col-lg-2","px-3","my-1","my-lg-0"],["class","my-1",4,"ngIf"],["id","Debt","min","0","type","number","appNumericInput","","class","form-control text-center",3,"disabled","value",4,"ngIf"],["min","0","type","number","appNumericInput","","id","Cash",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","disabled","ngModel"],["min","0","type","number","appNumericInput","","id","Visa",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","virtualScroll","searchable","disabled","ngModel"],[1,"col-12","col-md-4","col-lg-2","my-1","px-2"],["id","Debt","min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"disabled","value"],["for","TotalDiscount",1,"text-white","m-0","p-0","text-center"],["for","TotalDiscRate",1,"text-white","m-0","p-0","text-center"],["for","TotalAfterVat",1,"text-danger","m-0","p-0","text-center"],[1,"btn","btn-success","py-3","px-5",3,"click","disabled"],[1,"mx-1","pi","pi-save"],["class","btn btn-primary py-3 px-5",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary","py-3","px-5",3,"click","disabled"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"],[1,"btn","btn-dark","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[1,"btn","btn-warning","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[3,"ShowToEditeEvent","PageTitle","TablePaging","GetById","DeleteUrl"],["type","button",1,"btn","btn-light","border","border-1","border-dark","px-3","py-3",3,"click"],[1,"modal-body"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"text-dark"]],template:function(e,n){if(e&1){let l=b();s(0,"app-dynamic-component",13),f("OpenModalEvent",function(){return _(l),p(n.OpenModal())})("ShowToEditeEvent",function(){return _(l),p(n.ShowToEdite())}),c(),x(1,Xi,79,56,"ng-template",14,0,Z)(3,Yi,5,7,"ng-template",15,1,Z)(5,tn,12,7,"ng-template",15,2,Z),T(7,"app-glsheard",null,3)}if(e&2){let l=C(2);m("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!0)("GlResponse",n.GlResponse)("GetById",n.GetById)("PrintUrl",n.PrintUrl)("DeleteUrl",n.DeleteUrl)("OutModal",l)}},dependencies:[le,ae,re,ee,Re,Ee,we,Te,be,xe,Se,Ce,ye,te,De,ie,Ve,Pe,Ae,Ne,X,Y,he,He,oe,ne,Xe,tt,ot,Qe,$e],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important}label[_ngcontent-%COMP%]{margin-bottom:6px;cursor:pointer}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#172d50!important;color:#fff!important;box-shadow:none!important}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{box-shadow:3px 5px 3px 1px #eee;border:1px solid #eee}table[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-wrap:break-word!important;word-spacing:wrap!important;overflow-wrap:break-word!important}#editing-view-port[_ngcontent-%COMP%]{overflow-wrap:break-word!important}svg[_ngcontent-%COMP%]{cursor:pointer}td.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}"]});let o=d;return o})();export{Jn as a};
