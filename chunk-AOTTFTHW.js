import{a as ze,b as Je}from"./chunk-6T4APQIW.js";import{a as $e}from"./chunk-N7IVJGNV.js";import{a as qe}from"./chunk-BSPLJHNP.js";import{a as Fe,d as je,f as We,g as Le,h as He,i as Ge,j as Qe}from"./chunk-GCFZKOIQ.js";import{g as De,h as Ae,j as Pe,k as Ve,l as Me,m as Be,o as Ee,p as ke,q as Re,r as Oe,s as Ue}from"./chunk-VTL7OYUD.js";import{a as we,b as Ne}from"./chunk-73GIXY73.js";import{a as ne}from"./chunk-64BGN5RD.js";import{k as be}from"./chunk-HYE6JRVA.js";import{a as xe,b as ye,c as Ce,d as Te}from"./chunk-YTUM3KNK.js";import{b as ie}from"./chunk-BEBWNCBB.js";import{b as de,c as Y,f as me,h as X,k as Z,m as ue,n as ve,o as Ie,p as he,q as ge,s as fe,u as Se}from"./chunk-SLSEXWRZ.js";import{c as ee,d as te}from"./chunk-4L6P5Z5M.js";import{A as pe,c as _e,d as $,e as q,j as K}from"./chunk-JM67XKKX.js";import{$b as b,Bb as c,Cb as l,Db as A,Eb as H,Fb as G,Ga as oe,Hb as C,Lb as x,Mb as r,Pb as B,Qb as M,Sb as E,Tb as k,Ub as R,Vb as y,Wb as u,Xb as g,Yb as w,Zb as P,_b as T,ac as D,cb as a,cc as Q,db as F,dc as z,fc as se,ia as W,mc as I,na as L,nc as h,oc as j,pc as J,ub as S,wa as ae,wb as m,xa as _,ya as p,za as le,zb as ce}from"./chunk-VIO7ZK3G.js";import{a as O,b as U}from"./chunk-3EYC4JTX.js";var tt=["DeleteModalComponent"],it=["ModalUserInfoModal"],nt=()=>({"min-width":"75rem"}),ot=()=>["Name"],rt=()=>({"min-width":"100%"});function at(o,d){if(o&1){let i=C();c(0,"div",18)(1,"div",19)(2,"span",20),u(3),I(4,"translate"),l()(),c(5,"div",21)(6,"p-multiSelect",22),I(7,"translate"),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.selectedColumns,e)||(n.selectedColumns=e),p(e)}),l()(),c(8,"div",23)(9,"button",24),x("click",function(){_(i),r();let e=y(5),n=r();return n.LoadDataPaging(n.TablePaging.GlobalData,"","",!0),p(n.ClearColumnFilter(e))}),le(),c(10,"svg",25),A(11,"path",26)(12,"path",27),l()()()()}if(o&2){let i=r(2);a(3),g(h(4,7,i.PageTitle)),a(3),ce(z(11,rt)),M("selectedItemsLabel","{0} ",h(7,9,"ColumnsSelected"),""),m("options",i.TablePaging.TableCell),T("ngModel",i.selectedColumns)}}function lt(o,d){if(o&1&&(c(0,"th",31)(1,"span",32),u(2),I(3,"translate"),l(),A(4,"p-sortIcon",33),l()),o&2){let i=d.$implicit;B("pSortableColumn",i.SortName),a(2),w(" ",h(3,4,i.CellName)," "),a(2),B("pSortableColumn",i.SortName),B("field",i.SortName)}}function ct(o,d){if(o&1){let i=C();c(0,"th",28)(1,"p-columnFilter",34,3),I(3,"translate"),x("keyup",function(){let e=_(i).$implicit,n=y(2),s=r(3);return s.LoadDataPaging(s.TablePaging.GlobalData,n.dt.filters[e.SortName],e.ExistSearchField!=null?e.ExistSearchField:e.SortName,!1),p(s.ClearColumns(e,n.dt.filters))}),l()()}if(o&2){let i=d.$implicit;a(),B("field",i.SortName),B("placeholder",h(3,3,"navBar.Search")),m("showMenu",!1)}}function st(o,d){if(o&1&&(c(0,"tr"),A(1,"th",28),S(2,lt,5,6,"th",29),A(3,"th",28),l(),c(4,"tr"),A(5,"th",28),S(6,ct,4,5,"th",30),A(7,"th",28),l()),o&2){let i=r(2);a(2),m("ngForOf",i.selectedColumns),a(4),m("ngForOf",i.selectedColumns)}}function _t(o,d){if(o&1&&(H(0),c(1,"span"),u(2),l(),G()),o&2){let i=r().$implicit,t=r().$implicit;a(2),w(" ",t[i.SortName]," ")}}function pt(o,d){o&1&&A(0,"span")}function dt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),l()),o&2){let i=r().$implicit,t=r().$implicit;a(),w("",j(2,1,t[i.SortName],"yyy-M-d")," ")}}function mt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),l()),o&2){let i=r().$implicit,t=r().$implicit;a(),w("",j(2,1,t[i.SortName],"yyy-M-d h:mm:ss a")," ")}}function ut(o,d){o&1&&(c(0,"span"),A(1,"i",44),l())}function vt(o,d){o&1&&(c(0,"span"),A(1,"i",45),l())}function It(o,d){if(o&1&&(H(0),S(1,ut,2,0,"span",9)(2,vt,2,0,"span",9),G()),o&2){let i=r().$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0),a(),m("ngIf",t[i.SortName]==!1)}}function ht(o,d){o&1&&(c(0,"span"),A(1,"i",44),l())}function gt(o,d){if(o&1&&(c(0,"span"),S(1,ht,2,0,"span",9),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function ft(o,d){o&1&&(c(0,"span"),A(1,"i",45),l())}function St(o,d){if(o&1&&(c(0,"span"),S(1,ft,2,0,"span",9),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function xt(o,d){o&1&&(c(0,"span"),A(1,"i",44),l())}function yt(o,d){if(o&1&&(c(0,"span"),S(1,xt,2,0,"span",9),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function Ct(o,d){o&1&&(c(0,"span"),A(1,"i",45),l())}function Tt(o,d){if(o&1&&(c(0,"span"),S(1,Ct,2,0,"span",9),l()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function bt(o,d){if(o&1&&(H(0),S(1,gt,2,1,"span",9)(2,St,2,1,"span",9)(3,yt,2,1,"span",9)(4,Tt,2,1,"span",9),G()),o&2){let i=r().$implicit;a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean==null)}}function Dt(o,d){if(o&1&&(c(0,"td",36),S(1,_t,3,1,"ng-container",9)(2,pt,1,0,"span",9)(3,dt,3,4,"span",9)(4,mt,3,4,"span",9)(5,It,3,2,"ng-container",9)(6,bt,5,4,"ng-container",9),l()),o&2){let i=d.$implicit,t=r().$implicit,e=r(2);a(),m("ngIf",(i.CellDate==null||i.CellDate==!1)&&(i.CellDateTime==null||i.CellDateTime==!1)&&e.typeOf(t[i.SortName])!="object"&&(i.DataBoolean==null||i.DataBoolean==!1)),a(),m("ngIf",e.typeOf(t[i.SortName])=="object"),a(),m("ngIf",i.CellDate==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.CellDateTime==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null&&i.CrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&(i.DrBoolean!=null||i.CrBoolean!=null))}}function At(o,d){if(o&1){let i=C();c(0,"button",46),x("click",function(){_(i);let e=r().$implicit,n=r(2);return p(n.ConfirmDelete(e.Id))}),u(1),I(2,"translate"),l()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton),a(),g(h(2,2,"Model.Delete"))}}function wt(o,d){if(o&1){let i=C();c(0,"tr",35)(1,"td",36)(2,"span"),u(3),l(),A(4,"span",37),l(),S(5,Dt,7,6,"td",38),c(6,"td",39)(7,"div",40)(8,"button",41),x("click",function(){let e=_(i).$implicit,n=r(2);return p(n.ShowToEdite(e))}),u(9),I(10,"translate"),l(),c(11,"button",42),x("click",function(){let e=_(i).$implicit,n=r(2);return p(n.OpenUserModal(e,n.TablePaging.GlobalData.TableName))}),u(12),I(13,"translate"),l(),S(14,At,3,4,"button",43),l()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);m("pContextMenuRow",i)("pReorderableRow",t),a(3),g(t+1),a(2),m("ngForOf",e.selectedColumns),a(3),m("disabled",e._AppModeService.DisabledButton),a(),g(h(10,9,"Table.Show")),a(2),m("disabled",e._AppModeService.DisabledButton),a(),g(h(13,11,"Table.Details")),a(2),m("ngIf",e.DeleteUrl!="")}}function Nt(o,d){if(o&1){let i=C();c(0,"p-paginator",47),x("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),l()}if(o&2){let i=r(2);m("first",i.Paging.CurrentPage)("rows",i.Paging.PageSize)("totalRecords",i.Paging.TotalItems)("rowsPerPageOptions",i._AppModeService.RowCount)}}function Pt(o,d){if(o&1){let i=C();c(0,"p-paginator",48),x("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),l()}if(o&2){let i=r(2);m("first",i.Paging.CurrentPage)("rows",i.Paging.PageSize)("totalRecords",i.Paging.TotalItems)}}function Vt(o,d){if(o&1){let i=C();c(0,"div")(1,"div",10),A(2,"p-contextMenu",11,1),c(4,"p-table",12,2),D("contextMenuSelectionChange",function(e){_(i);let n=r();return b(n.contextSelected,e)||(n.contextSelected=e),p(e)}),x("onSort",function(e){_(i);let n=r();return p(n.SortFunction(e))}),S(6,at,13,12,"ng-template",13)(7,st,8,2,"ng-template",14)(8,wt,15,13,"ng-template",15),l()(),S(9,Nt,1,4,"p-paginator",16)(10,Pt,1,3,"p-paginator",17),l()}if(o&2){let i=y(3),t=r();a(2),m("model",t.contextitems),a(2),m("value",t.Paging.DataReturn)("lazy",!0)("scrollable",!0)("columns",t.selectedColumns)("paginator",!1)("resizableColumns",!0)("reorderableColumns",!0)("rows",t.Paging.PageSize)("tableStyle",z(15,nt)),T("contextMenuSelection",t.contextSelected),m("contextMenu",i)("globalFilterFields",z(16,ot)),a(5),m("ngIf",t.Paging.TotalItems>=10),a(),m("ngIf",t.Paging.TotalItems<10)}}var Ke=(()=>{let d=class d{constructor(){this._selectedColumns=[],this.contextitems=[],this.contextSelected={},this.Paging={PageSize:10,CurrentPage:1,TotalPages:0,TotalItems:0,DataReturn:[]},this.SubscriptionArr=[],this.DataInfo={CreatedDate:"",CreatedByName:"",LastModifiedDate:"",ModifyByName:"",ModifyCount:0},this.OpenModalEvent=new oe,this.ShowToEditeEvent=new oe,this.PageTitle="",this.OutModal=null,this.FullScreen=!1,this.TablePaging={},this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.SearchText="",this.SearchField="",this.Field="Id",this.Order=1,this._SharedObjectModel=W(ne),this._AppModeService=W(ie),this._Apiservice=W(Y)}ConfirmDelete(t){this.DeleteModalComponent.ConfirmDelete(t,this.DeleteUrl)}OpenUserModal(t,e){this.ModalUserInfoComponent.ShowDetails(t,e)}ngOnInit(){this.Paging.DataReturn=[],this.Paging.TotalItems=0,this.LoadDataPaging(this.TablePaging.GlobalData,"","",!1),this.HandleCol(),this.contextitems=[{label:"Delete",icon:"pi pi-fw pi-times",command:()=>this.ConfirmDelete(this.contextSelected.Id)}]}get selectedColumns(){return this._selectedColumns}set selectedColumns(t){this._selectedColumns=this.TablePaging.TableCell.filter(e=>t.includes(e))}HandleCol(){this.TablePaging.TableCell=this.TablePaging.TableCell.map(t=>U(O({},t),{ConvertCellName:this._AppModeService._Translate.instant(t.CellName)})),this._selectedColumns=this.TablePaging.TableCell}ClearColumnFilter(t){let e=Object.values(t.filters);for(let n=0;n<e.length;n++)e[n].value=null;this.SearchText="",this.SearchField="",this.Paging.CurrentPage=1}ClearColumns(t,e){let n=Object.keys(e),s=Object.values(e);for(let v=0;v<n.length;v++)n[v]!=t.SortName&&(s[v].value=null)}LoadDataPaging(t,e,n,s=!0){e=`${e==""?"":e.value}`.trim(),this.SearchText=e,this.SearchField=n;let v={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this.Paging.PageSize,BranchFilter:t.BranchFilter,CurrentPage:1,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions},f=this._Apiservice.post(`${t.Url}`,v,s).subscribe({next:N=>{N.IsSuccess==!0&&N.Obj!=null?(this.Paging.DataReturn=N.Obj.DataReturn,this.Paging.CurrentPage=N.Obj.CurrentPage,this.Paging.TotalItems=N.Obj.TotalItems):this._AppModeService._Toastr.error(N.Message)}});this.SubscriptionArr.push(f)}SortFunction(t){let e=t.multisortmeta[0];if(e!=null){this.Field=e.field,this.Order=e.order;let n=this.TablePaging.GlobalData,s={TableName:n.TableName,Columns:n.Columns,Conditions:n.Conditions==null?"":n.Conditions,PageSize:this.Paging.PageSize,BranchFilter:n.BranchFilter,CurrentPage:this.Paging.CurrentPage,Join:n.Join,JoinTables:n.JoinTables,JoinConditions:n.JoinConditions,OrderByField:this.Field,Order:this.Order},v=this._Apiservice.post(`${n.Url}`,s,!0).subscribe({next:f=>{f.IsSuccess==!0&&f.Obj!=null?(this.Paging.DataReturn=f.Obj.DataReturn,this.Paging.CurrentPage=f.Obj.CurrentPage,this.Paging.TotalItems=f.Obj.TotalItems):this._AppModeService._Toastr.error(f.Message)}});this.SubscriptionArr.push(v)}}onPageChange(t,e){e.page++,e.first,e.rows,this.Paging.CurrentPage=e.first,this.Paging.PageSize=e.rows;let n={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this.Paging.PageSize,BranchFilter:t.BranchFilter,CurrentPage:e.page,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order},s=this._Apiservice.post(`${t.Url}`,n,!0).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this.Paging.DataReturn=v.Obj.DataReturn,this.Paging.TotalItems=v.Obj.TotalItems):this._AppModeService._Toastr.error(v.Message)}});this.SubscriptionArr.push(s)}ShowToEdite(t){this._AppModeService.DisabledButton=!0;let e=this._Apiservice.getById(this.GetById,t.Id).subscribe({next:n=>{this._AppModeService.DisabledButton=!1,n.IsSuccess==!0&&n.Obj!=null?(this._SharedObjectModel.SecoundPageModel=n.Obj,this.ShowToEditeEvent.emit("ShowToEdite Fire"),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(n.Message))},error:n=>{this._AppModeService.DisabledButton=!1}});this.SubscriptionArr.push(e)}ngOnDestroy(){for(let t=0;t<this.SubscriptionArr.length;t++)this.SubscriptionArr[t].unsubscribe()}typeOf(t){return typeof t}};d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=L({type:d,selectors:[["app-table"]],viewQuery:function(e,n){if(e&1&&(E(tt,5),E(it,5)),e&2){let s;k(s=R())&&(n.DeleteModalComponent=s.first),k(s=R())&&(n.ModalUserInfoComponent=s.first)}},inputs:{PageTitle:"PageTitle",OutModal:"OutModal",FullScreen:"FullScreen",DataView:"DataView",TablePaging:"TablePaging",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl",selectedColumns:"selectedColumns"},outputs:{OpenModalEvent:"OpenModalEvent",ShowToEditeEvent:"ShowToEditeEvent"},standalone:!0,features:[Q],decls:8,vars:1,consts:[["ModalUserInfoModal",""],["cm",""],["dt1",""],["columnFilter",""],["clas",""],["id","container-page",1,"container-page","p-0"],[1,"page-wrapper"],[1,"main-content"],[1,"inner-box","DivPaging"],[4,"ngIf"],[1,"TablePaging","noclear","table","mb-0","p-0","border-top-right-radius-0","border-top-left-radius-0"],[3,"model"],["scrollHeight","100vh","styleClass","p-datatable-striped","dataKey","Id","sortMode","multiple",3,"contextMenuSelectionChange","onSort","value","lazy","scrollable","columns","paginator","resizableColumns","reorderableColumns","rows","tableStyle","contextMenuSelection","contextMenu","globalFilterFields"],["pTemplate","caption",1,"d-flex","p-0","GridTable"],["pTemplate","header"],["pTemplate","body"],["appendTo","table",3,"first","rows","totalRecords","rowsPerPageOptions","onPageChange",4,"ngIf"],["appendTo","table",3,"first","rows","totalRecords","onPageChange",4,"ngIf"],[1,"d-flex","align-items-center","bg-white"],[1,"col-3","my-2","px-2"],[1,"PageTitle","fs-4"],[1,"col-6","my-2","px-2"],["optionLabel","ConvertCellName","placeholder","Choose Columns",1,"w-100",3,"ngModelChange","options","ngModel","selectedItemsLabel"],[1,"col-3","my-2","divend"],["type","button","icon","pi pi-file-excel",1,"mx-2","px-3","py-1","btn","btn-primary",3,"click"],["width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-counterclockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"],["pResizableColumn",""],["pResizableColumn","","class","col-2 ",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",4,"ngFor","ngForOf"],["pResizableColumn","",1,"col-2",3,"pSortableColumn"],[1,"mx-2"],[3,"pSortableColumn","field"],["type","text",3,"keyup","showMenu","field","placeholder"],[3,"pContextMenuRow","pReorderableRow"],[1,"bg-white"],["pReorderableRowHandle","",1,"pi","pi-bars"],["class","bg-white",4,"ngFor","ngForOf"],[1,"p-0","bg-white"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"btn","btn-secondary","text-white","shadow-none","mx-2",3,"click","disabled"],["class","btn btn-danger text-white shadow-none mx-2 py-2 px-3",3,"disabled","click",4,"ngIf"],[1,"pi","pi-check","text-success",2,"font-size","2rem !important"],[1,"pi","pi-times","text-danger",2,"font-size","2rem !important"],[1,"btn","btn-danger","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],["appendTo","table",3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["appendTo","table",3,"onPageChange","first","rows","totalRecords"]],template:function(e,n){e&1&&(c(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),S(5,Vt,11,17,"div",9),l()()()()(),A(6,"app-modal-user-info",null,0)),e&2&&(a(5),m("ngIf",n.TablePaging.Type=="TablePaging"))},dependencies:[Ae,De,be,X,Z,Ue,Pe,Ve,Be,Ee,Me,ke,Re,Oe,q,$,Ge,He,Le,We,te,ee,K,je]});let o=d;return o})();var Mt=["GLComponent"],Bt=["content"],Et=["AllHold"],kt=(o,d)=>({"btn-success":o,"btn-primary":d});function Rt(o,d){if(o&1){let i=C();c(0,"div",57)(1,"div",58)(2,"div",59)(3,"label",60),u(4),I(5,"translate"),l(),c(6,"input",61),x("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(1))}),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),l()()(),c(7,"div",58)(8,"div",59)(9,"label",62),u(10),I(11,"translate"),l(),c(12,"input",63),x("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(2))}),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),l()()()()}if(o&2){let i=r(2);a(4),w(" ",h(5,8,"SaleInvoice.Window")," "),a(2),T("ngModel",i.Invoice.ClientType),m("checked",i.Invoice.ClientType==1)("value",1),a(4),w(" ",h(11,10,"SaleInvoice.Always")," "),a(2),m("value",2)("checked",i.Invoice.ClientType==2),T("ngModel",i.Invoice.ClientType)}}function Ot(o,d){if(o&1&&(c(0,"span",64),u(1),I(2,"date"),l()),o&2){let i=r(2);a(),w(" ",j(2,1,i.Invoice.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function Ut(o,d){if(o&1){let i=C();c(0,"p-calendar",65),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.DocDate,e)||(n.Invoice.DocDate=e),p(e)}),l()}if(o&2){let i=r(2);m("showOtherMonths",!0)("showTime",!0)("showIcon",!0)("showOnFocus",!1),T("ngModel",i.Invoice.DocDate)}}function Ft(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(3);a(),P("Loaded ",i.StoreArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function jt(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Wt(o,d){if(o&1){let i=C();c(0,"div",24)(1,"p",66),u(2),I(3,"translate"),l(),c(4,"ng-select",67,4),x("clear",function(){_(i);let e=r(2);return p(e.StoreArr=[])})("focus",function(){_(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=y(5),n=r(2);return p(n.ChangeSearchApi("Storages",e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.StoreId,"Store"))}),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.StoreId,e)||(n.Invoice.StoreId=e),p(e)}),S(6,Ft,2,2,"ng-template",68)(7,jt,1,1,"ng-template",69),l()()}if(o&2){let i=r(2);a(2),g(h(3,6,"BuyInvoice.Storage")),a(2),m("items",i.StoreArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),T("ngModel",i.Invoice.StoreId)}}function Lt(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(3);a(),P("Loaded ",i.SupplierArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ht(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Gt(o,d){if(o&1){let i=C();c(0,"div",24)(1,"p",66),u(2),I(3,"translate"),l(),c(4,"ng-select",71,5),x("clear",function(){_(i);let e=r(2);return p(e.SupplierArr=[])})("focus",function(){_(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=y(5),n=r(2);return p(n.ChangeSearchApi("Suppliers",e))})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.SupplierId,"Supplier"))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())}),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.SupplierId,e)||(n.Invoice.SupplierId=e),p(e)}),S(6,Lt,2,2,"ng-template",68)(7,Ht,1,1,"ng-template",69),l()()}if(o&2){let i=r(2);a(2),g(h(3,6,"BuyOffer.Supplier")),a(2),m("items",i.SupplierArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),T("ngModel",i.Invoice.SupplierId)}}function Qt(o,d){if(o&1){let i=C();c(0,"input",74),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.ClientName,e)||(n.Invoice.ClientName=e),p(e)}),l()}if(o&2){let i=r(3);m("disabled",!0),T("ngModel",i.Invoice.ClientName)}}function zt(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(4);a(),P("Loaded ",i.ClientArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Jt(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function $t(o,d){if(o&1){let i=C();c(0,"ng-select",75,6),x("clear",function(){_(i);let e=r(3);return p(e.ClientArr=[])})("focus",function(){_(i);let e=y(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=y(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("scrollToEnd",function(){_(i);let e=y(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.ClientId,"Client"))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.ClientId,e)||(n.Invoice.ClientId=e),p(e)}),S(2,zt,2,2,"ng-template",68)(3,Jt,1,1,"ng-template",69),l()}if(o&2){let i=r(3);m("items",i.ClientArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),T("ngModel",i.Invoice.ClientId)}}function qt(o,d){if(o&1&&(c(0,"div",24)(1,"p",66),u(2),I(3,"translate"),l(),S(4,Qt,1,2,"input",72)(5,$t,4,5,"ng-select",73),l()),o&2){let i=r(2);a(2),g(h(3,3,"SaleOffer.Client")),a(2),m("ngIf",i.Invoice.ClientType==1),a(),m("ngIf",i.Invoice.ClientType==2)}}function Kt(o,d){o&1&&(c(0,"option",79),u(1),I(2,"translate"),l()),o&2&&(m("value",3),a(),g(h(2,2,"SaleInvoice.Delivery")))}function Yt(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(4);a(),P("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Xt(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function Zt(o,d){if(o&1){let i=C();c(0,"div",86)(1,"div",87)(2,"p",32),u(3),I(4,"translate"),l(),c(5,"input",88),I(6,"translate"),x("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.Cash,e)||(n.Invoice.Cash=e),p(e)}),l()(),c(7,"div",87)(8,"p",32),u(9),I(10,"translate"),l(),c(11,"ng-select",89,7),x("clear",function(){_(i);let e=r(3);return p(e.TreasuryArr=[])})("focus",function(){_(i);let e=y(12),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(12),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=y(12),n=r(3);return p(n.ChangeSearchApi("Treasury",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.TreasuryId,"Treasury"))}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.TreasuryId,e)||(n.Invoice.TreasuryId=e),p(e)}),S(13,Yt,2,2,"ng-template",68)(14,Xt,1,1,"ng-template",69),l()()()}if(o&2){let i=r(3);a(3),g(h(4,11,"BuyInvoice.Cash")),a(2),B("placeholder",h(6,13,"SaleInvoice.Cash")),m("disabled",i.Invoice.PaymentType==3),T("ngModel",i.Invoice.Cash),a(4),g(h(10,15,"BuyInvoice.Treasury")),a(2),m("items",i.TreasuryArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Cash==""||i.Invoice.Cash==0),T("ngModel",i.Invoice.TreasuryId)}}function ei(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(4);a(),P("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function ti(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function ii(o,d){if(o&1){let i=C();c(0,"div",86)(1,"div",87)(2,"p",32),u(3),I(4,"translate"),l(),c(5,"input",90),I(6,"translate"),x("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.Visa,e)||(n.Invoice.Visa=e),p(e)}),l()(),c(7,"div",87)(8,"p",32),u(9),I(10,"translate"),l(),c(11,"ng-select",91,8),x("clear",function(){_(i);let e=r(3);return p(e.BankAccountArr=[])})("focus",function(){_(i);let e=y(12),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(12),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=y(12),n=r(3);return p(n.ChangeSearchApi("BankAccounts",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.BankAccountId,"BankAccount"))}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.BankAccountId,e)||(n.Invoice.BankAccountId=e),p(e)}),S(13,ei,2,2,"ng-template",68)(14,ti,1,1,"ng-template",69),l()()()}if(o&2){let i=r(3);a(3),g(h(4,10,"BuyInvoice.Visa")),a(2),B("placeholder",h(6,12,"SaleInvoice.Visa")),m("disabled",i.Invoice.PaymentType==3),T("ngModel",i.Invoice.Visa),a(4),g(h(10,14,"BuyInvoice.Bank")),a(2),m("items",i.BankAccountArr)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Visa==""||i.Invoice.Visa==0),T("ngModel",i.Invoice.BankAccountId)}}function ni(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r(4);a(),P("Loaded ",i.EmployeeArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function oi(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function ri(o,d){if(o&1){let i=C();c(0,"div",92)(1,"p",66),u(2),I(3,"translate"),l(),c(4,"ng-select",67,9),x("clear",function(){_(i);let e=r(3);return p(e.EmployeeArr=[])})("focus",function(){_(i);let e=y(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=y(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=y(5),n=r(3);return p(n.ChangeSearchApi("Employee",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.EmployeeId,"Employee"))}),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.EmployeeId,e)||(n.Invoice.EmployeeId=e),p(e)}),S(6,ni,2,2,"ng-template",68)(7,oi,1,1,"ng-template",69),l()()}if(o&2){let i=r(3);a(2),g(h(3,6,"BuyReport.Employee")),a(2),m("items",i.EmployeeArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),T("ngModel",i.Invoice.EmployeeId)}}function ai(o,d){o&1&&(c(0,"p",32),u(1),I(2,"translate"),l()),o&2&&(a(),g(h(2,1,"BuyInvoice.Debt")))}function li(o,d){if(o&1){let i=C();c(0,"input",93),D("ngModelChange",function(e){_(i);let n=r(3);return b(n.Invoice.Debt,e)||(n.Invoice.Debt=e),p(e)}),l()}if(o&2){let i=r(3);m("disabled",!0),T("ngModel",i.Invoice.Debt)}}function ci(o,d){if(o&1){let i=C();c(0,"div",76)(1,"div",77)(2,"p",32),u(3),I(4,"translate"),l(),c(5,"select",78),x("change",function(){_(i);let e=r(2);return p(e.ChangePamentType(e.Invoice.PaymentType))}),D("ngModelChange",function(e){_(i);let n=r(2);return b(n.Invoice.PaymentType,e)||(n.Invoice.PaymentType=e),p(e)}),c(6,"option",79),u(7),I(8,"translate"),l(),c(9,"option",79),u(10),I(11,"translate"),l(),S(12,Kt,3,4,"option",80),l()(),S(13,Zt,15,17,"div",81)(14,ii,15,16,"div",81)(15,ri,8,8,"div",82),c(16,"div",83),S(17,ai,3,3,"p",84)(18,li,1,2,"input",85),l()()}if(o&2){let i=r(2);a(3),g(h(4,12,"BuyInvoice.PamentType")),a(2),T("ngModel",i.Invoice.PaymentType),a(),m("value",1),a(),g(h(8,14,"SaleInvoice.Cash")),a(2),m("value",2),a(),g(h(11,16,"SaleInvoice.Debt")),a(2),m("ngIf",i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType==3),a(2),m("ngIf",i.Invoice.PaymentType==2),a(),m("ngIf",i.Invoice.PaymentType==2)}}function si(o,d){o&1&&(c(0,"th",40),u(1),I(2,"translate"),l()),o&2&&(a(),g(h(2,1,"SaleInvoice.Discount")))}function _i(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r().$implicit,t=r(2);a(),P("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function pi(o,d){if(o&1&&u(0),o&2){let i=d.item;P(" ",i.Name," - ",i.Code," ")}}function di(o,d){if(o&1){let i=C();c(0,"button",108),x("click",function(){_(i);let e=r().index,n=r(2),s=y(6);return p(n.ProductBalance(e,s))}),A(1,"i",109),l()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton)}}function mi(o,d){if(o&1&&(c(0,"small",70),u(1),l()),o&2){let i=r().$implicit,t=r(2);a(),P("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ui(o,d){if(o&1&&u(0),o&2){let i=d.item;w(" ",i.Name," ")}}function vi(o,d){if(o&1&&(c(0,"span",107),u(1),l()),o&2){let i=r().$implicit;a(),g(i.Price)}}function Ii(o,d){if(o&1){let i=C();c(0,"input",110),x("change",function(){_(i);let e=r(3);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(3);return p(e.CalcInvoice())}),D("ngModelChange",function(e){_(i);let n=r().$implicit;return b(n.Price,e)||(n.Price=e),p(e)}),l()}if(o&2){let i=r(),t=i.$implicit,e=i.index;M("id","Price",e,""),M("name","Price",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),T("ngModel",t.Price)}}function hi(o,d){if(o&1){let i=C();c(0,"td")(1,"input",110),x("change",function(){_(i);let e=r(3);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(3);return p(e.CalcInvoice())}),D("ngModelChange",function(e){_(i);let n=r().$implicit;return b(n.Discount,e)||(n.Discount=e),p(e)}),l()()}if(o&2){let i=r(),t=i.$implicit,e=i.index;a(),M("id","Discount",e,""),M("name","Discount",e,""),m("disabled",t.ProductId<=0||t.ProductUnitId<=0),T("ngModel",t.Discount)}}function gi(o,d){if(o&1){let i=C();c(0,"tr")(1,"td",94)(2,"div",95)(3,"span",96),u(4),l(),c(5,"button",97),x("click",function(){let e=_(i).index,n=r(2);return p(n.AppendRow(e))}),u(6,"+"),l(),c(7,"button",98),x("click",function(){let e=_(i).index,n=r(2);return p(n.RemoveRow(e))}),u(8,"-"),l()()(),c(9,"td",99)(10,"ng-select",100,10),I(12,"translate"),x("clear",function(){let e=_(i).$implicit;return p(e.Items=[])})("focus",function(){let e=_(i).index,n=y(11),s=r(2);return s.ChangeSearchApiDetails("Items",n,e),p(s._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).index,n=y(11),s=r(2);return s.ChangeSearchApiDetails("Items",n,e),p(s._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).index,n=y(11),s=r(2);return p(s.ChangeSearchApiDetails("Items",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,s=e.index,v=r(2);return p(v.SelectItem(n.ProductId,s))}),D("ngModelChange",function(e){let n=_(i).$implicit;return b(n.ProductId,e)||(n.ProductId=e),p(e)}),S(13,_i,2,2,"ng-template",68)(14,pi,1,2,"ng-template",69),l(),S(15,di,2,1,"button",101),l(),c(16,"td",102)(17,"ng-select",103,11),I(19,"translate"),x("clear",function(){let e=_(i).$implicit;return p(e.ProductUnits=[])})("focus",function(){let e=_(i).index,n=y(18),s=r(2);return s.ChangeSearchApiDetails("ItemUnits",n,e),p(s._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).index,n=y(18),s=r(2);return s.ChangeSearchApiDetails("ItemUnits",n,e),p(s._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).index,n=y(18),s=r(2);return p(s.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,s=e.index,v=r(2);return p(v.SelectUnit(n.ProductUnitId,s))}),D("ngModelChange",function(e){let n=_(i).$implicit;return b(n.ProductUnitId,e)||(n.ProductUnitId=e),p(e)}),S(20,mi,2,2,"ng-template",68)(21,ui,1,1,"ng-template",69),l()(),c(22,"td")(23,"input",104),x("change",function(){_(i);let e=r(2);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(2);return p(e.CalcInvoice())}),D("ngModelChange",function(e){let n=_(i).$implicit;return b(n.Quantity,e)||(n.Quantity=e),p(e)}),l()(),c(24,"td"),S(25,vi,2,1,"span",105)(26,Ii,1,6,"input",106),l(),S(27,hi,2,6,"td",52),c(28,"td")(29,"span",107),u(30),l()()()}if(o&2){let i=d.$implicit,t=d.index,e=r(2);a(4),g(t+1),a(3),m("disabled",e.Invoice.InvoiceDetails.length==1),a(3),M("placeholder","  ",h(12,28,"SaleInvoice.ChooseProduct"),""),m("items",i.Items)("dropdownPosition","top")("virtualScroll",!0)("searchable",!0),T("ngModel",i.ProductId),a(5),m("ngIf",i.ProductId>0&&e.Invoice.StoreId>0),a(2),M("placeholder","  ",h(19,30,"Item.ItemUnit"),""),m("items",i.ProductUnits)("dropdownPosition","top")("disabled",i.ProductId==0||i.ProductId==null)("virtualScroll",!0)("searchable",!0),T("ngModel",i.ProductUnitId),a(6),M("id","Quantity",t,""),M("name","Quantity",t,""),m("disabled",i.ProductId<=0||i.ProductUnitId<=0),T("ngModel",i.Quantity),a(2),m("ngIf",e.ScreenName=="SaleInvoice"),a(),m("ngIf",e.ScreenName!="SaleInvoice"),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscount==!1),a(3),g((i.TotalPrice-e.ConvertNumber(i.Discount)).toFixed(2))}}function fi(o,d){if(o&1&&(c(0,"div",44)(1,"span",111),u(2),I(3,"translate"),l(),c(4,"span",46),u(5),l()()),o&2){let i=r(2);a(2),g(h(3,2,"SaleInvoice.TotalDiscount")),a(3),g(i.Invoice.TotalDisc.toFixed(2))}}function Si(o,d){if(o&1&&(c(0,"div",44)(1,"span",112),u(2),I(3,"translate"),l(),c(4,"span",46),u(5),l()()),o&2){let i=r(2);a(2),g(h(3,2,"BuyInvoice.ReturnAmount")),a(3),g(i._SharedObjectModelService.ReturnAmount)}}function xi(o,d){o&1&&(c(0,"span"),u(1),I(2,"translate"),l()),o&2&&(a(),w(" ",h(2,1,"Model.Save"),""))}function yi(o,d){o&1&&(c(0,"span"),u(1),I(2,"translate"),l()),o&2&&(a(),w(" ",h(2,1,"Model.Update"),""))}function Ci(o,d){if(o&1){let i=C();c(0,"button",113),x("click",function(){_(i);let e=r(2);return p(e.OpenGl())}),u(1),I(2,"translate"),l()}o&2&&(a(),w(" ",h(2,1,"Model.Gl")," "))}function Ti(o,d){if(o&1){let i=C();c(0,"button",114),x("click",function(){_(i);let e=r(2);return p(e.HoldInvoice())}),u(1," \u062A\u0639\u0644\u064A\u0642 Hold "),l()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function bi(o,d){if(o&1){let i=C();c(0,"button",115),x("click",function(){_(i);let e=r(2);return p(e.ShowHoldInvoice())}),u(1," \u0639\u0631\u0636 Hold "),l()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function Di(o,d){if(o&1){let i=C();c(0,"div",14)(1,"h4",15),u(2),I(3,"translate"),l(),c(4,"div",16)(5,"div",17),u(6),I(7,"translate"),l(),c(8,"div",17),u(9),I(10,"translate"),l(),c(11,"div",17),u(12),I(13,"translate"),l()(),S(14,Rt,13,12,"div",18),l(),c(15,"div",19)(16,"div",20)(17,"div",21)(18,"label",22),u(19),I(20,"translate"),l(),A(21,"input",23),l(),c(22,"div",24)(23,"label",25),u(24),I(25,"translate"),l(),c(26,"input",26),D("ngModelChange",function(e){_(i);let n=r();return b(n.Invoice.Notes,e)||(n.Invoice.Notes=e),p(e)}),l()(),c(27,"div",24)(28,"label",22),u(29),I(30,"translate"),l(),S(31,Ot,3,4,"span",27)(32,Ut,1,5,"p-calendar",28),l(),S(33,Wt,8,8,"div",29)(34,Gt,8,8,"div",29)(35,qt,6,5,"div",29),c(36,"div",30)(37,"div",31)(38,"p",32),u(39),I(40,"translate"),l(),A(41,"input",33),l(),c(42,"div",31)(43,"p",32),u(44),I(45,"translate"),l(),A(46,"input",34),l()(),S(47,ci,19,18,"div",35),l(),c(48,"div",36)(49,"div",37)(50,"table",38)(51,"thead")(52,"tr")(53,"th"),u(54,"#"),l(),c(55,"th",39),u(56),I(57,"translate"),l(),c(58,"th",40),u(59),I(60,"translate"),l(),c(61,"th",40),u(62),I(63,"translate"),l(),c(64,"th",40),u(65),I(66,"translate"),l(),S(67,si,3,3,"th",41),c(68,"th",40),u(69),I(70,"translate"),l()()(),c(71,"tbody"),S(72,gi,31,32,"tr",42),l()()()()(),c(73,"div",43)(74,"div",44)(75,"span",45),u(76),I(77,"translate"),l(),c(78,"span",46),u(79),l()(),c(80,"div",44)(81,"span",45),u(82),I(83,"translate"),l(),c(84,"span",46),u(85),l()(),S(86,fi,6,4,"div",47),c(87,"div",44)(88,"span",48),u(89),I(90,"translate"),c(91,"span"),u(92),l()(),c(93,"span",46),u(94),l()(),c(95,"div",44)(96,"span",49),u(97),I(98,"translate"),l(),c(99,"span",46),u(100),l()(),S(101,Si,6,4,"div",47),l(),c(102,"div",50)(103,"button",51),x("click",function(){_(i);let e=r();return p(e.Save())}),S(104,xi,3,3,"span",52)(105,yi,3,3,"span",52),l(),S(106,Ci,3,3,"button",53)(107,Ti,2,1,"button",54)(108,bi,2,1,"button",55),c(109,"button",56),x("click",function(){let e=_(i).$implicit,n=r();return e.close("Close click"),p(n.ResetPage())}),u(110),I(111,"translate"),l()()}if(o&2){let i=r();a(2),g(h(3,52,i.PageTitle)),a(4),P(" ",h(7,54,"BranchName")," : ",i._AppModeService.Info.BranchName," "),a(3),P(" ",h(10,56,"UserName")," : ",i._AppModeService.Info.UserName," "),a(3),P(" ",h(13,58,"RoleName")," : ",i._AppModeService.Info.RoleName," "),a(2),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(5),g(h(20,60,"Table.DocNo")),a(2),m("value",i.Invoice.DocNo)("disabled",!0),a(3),g(h(25,62,"Table.Notes")),a(2),T("ngModel",i.Invoice.Notes),a(3),g(h(30,64,"Table.DocDate")),a(2),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="BuyOffer"||i.ScreenName=="BuyInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(4),g(h(40,66,"NetThamBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetThamBranch),a(3),g(h(45,68,"NetOtherBranch")),a(2),m("disabled",!0)("value",i.NetAccountPerson.NetOtherBranch),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(9),g(h(57,70,"SaleInvoice.Name")),a(3),g(h(60,72,"SaleInvoice.Unit")),a(3),g(h(63,74,"SaleInvoice.Quantity")),a(3),g(h(66,76,"SaleInvoice.Price")),a(2),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(2),g(h(70,78,"SaleInvoice.NetTotal")),a(3),m("ngForOf",i.Invoice.InvoiceDetails)("ngForTrackBy",i.trackByMethod),a(4),g(h(77,80,"ProductCount")),a(3),g(i.Invoice.InvoiceDetails.length),a(3),g(h(83,82,"SaleInvoice.TotalInvoice")),a(3),g(i.Invoice.TotalInvoice.toFixed(2)),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(3),w("",h(90,84,"SaleInvoice.TotalVat")," "),a(3),w("",i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.Vat,"%"),a(2),g(i.Invoice.TotalInvoiceVatAmount.toFixed(2)),a(3),g(h(98,86,"SaleInvoice.TotalAfterVat")),a(3),g(i.Invoice.TotalInvoiceAfterVat.toFixed(2)),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),m("ngClass",se(90,kt,i.Invoice.Id==0,i.Invoice.Id!=0)),a(),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i.Invoice.Id!=0),a(),m("ngIf",i.Invoice.Id>0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),g(h(111,88,"Model.Close"))}}function Ai(o,d){if(o&1){let i=C();c(0,"app-table",116),x("ShowToEditeEvent",function(){let e=_(i).$implicit,n=r();return p(n.GetSaleHold(e))}),l(),c(1,"div",50)(2,"button",56),x("click",function(){let e=_(i).$implicit;return p(e.close("Close click"))}),u(3),I(4,"translate"),l()()}if(o&2){let i=r();m("PageTitle","SaleInvoice.AllHold")("TablePaging",i.OutTablePaging)("GetById","HoldInvoiceEP/GetById")("DeleteUrl","HoldInvoiceEP/Delete"),a(3),g(h(4,5,"Model.Close"))}}function wi(o,d){if(o&1&&(c(0,"tr")(1,"td"),u(2),l(),c(3,"td"),u(4),l()()),o&2){let i=d.$implicit;a(2),w(" ",i.Name," "),a(2),w(" ",i.Qty," ")}}function Ni(o,d){if(o&1&&(c(0,"div",117)(1,"table",118)(2,"thead")(3,"tr")(4,"th"),u(5),I(6,"translate"),l(),c(7,"th"),u(8),I(9,"translate"),l()()(),c(10,"tbody"),S(11,wi,5,2,"tr",119),l()()()),o&2){let i=r();a(5),g(h(6,3,"SaleInvoice.Name")),a(3),g(h(9,5,"Table.Balance")),a(3),m("ngForOf",i.ItemBalanceList)}}var gn=(()=>{let d=class d{constructor(t,e,n,s,v){this._ActivatedRoute=t,this._SharedObjectModelService=e,this._DefaultSettingsService=n,this._AppModeService=s,this._Apiservice=v,this.SubscriptionArr=[],this.SignalR=!1,this.TablePaging={},this.OutTablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,Discount:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.SupplierArr=[],this.ClientArr=[],this.TreasuryArr=[],this.BankAccountArr=[],this.EmployeeArr=[],this.StoreArr=[],this.ItemBalanceList=[],this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0}}ngOnChanges(){let t=Number(this._ActivatedRoute.snapshot.queryParams.Id);t>0&&this.GetByIdRoute(t)}GetByIdRoute(t){let e=this._Apiservice.getById(this.GetById,t,!0).subscribe({next:n=>{n.IsSuccess==!0&&n.Obj!=null?(this._SharedObjectModelService.PageModel=n.Obj.model,this._SharedObjectModelService.Gl=n.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}ngOnInit(){this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}GetPageInfo(){let t=this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this.Invoice.DocNo=e.Obj,this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(e.Message)},error:e=>{this._AppModeService.DisabledButton=!1}});this.SubscriptionArr.push(t)}StartConnection(){this.Hub_Connection=new Je().withUrl(`${de.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:ze.WebSockets}).build(),this.Hub_Connection.start().then(()=>{}).catch(t=>{console.log("Error Hub Connection",t)})}ServerListener(){this.Hub_Connection?.on(`Add${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&e.Id!=t.UserId&&this.GetPageInfo()}),this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(alert(this._AppModeService._Translate.instant("Show.UpdateModelAnother")),this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(alert(this._AppModeService._Translate.instant("Show.DeleteModelAnother")),this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this._SharedObjectModelService.Paging.DataReturn=this._SharedObjectModelService.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}OpenModal(){this._AppModeService.DisabledButton=!0,this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ChangeSearchApiDetails(t,e,n){let s=`${e.searchTerm}`.trim();(s==""||s=="null")&&(e.searchTerm="",s="");let v="";(this.ScreenName=="BuyInvoice"||this.ScreenName=="BuyOffer")&&t=="Items"&&(v="ProductType != 2"),this._AppModeService.CurrentPage+=1;let f={TableName:t,Columns:["Id","Name"],Conditions:v,PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:s,SearchField:"Name"};if(t=="Items"&&(f.Columns=["Id","Name","Code"],f.ItemWithItemUnit=!0),t=="ItemsCode"&&(f.TableName="Items",f.Columns=["Id","Name","Code"],f.SearchText=e),t=="ItemUnits"){let V=this.Invoice.InvoiceDetails[n].ProductId==null?0:this.Invoice.InvoiceDetails[n].ProductId;f.Conditions=`ItemId = ${V}`,f.Join=!0,f.JoinTables=["Units U"],f.JoinConditions=["T.UnitId = U.Id"],f.Columns=["T.Id","U.Name","T.Code"],f.SearchField="U.Name"}let N=this._Apiservice.post("Global/GetAll",f,!1).subscribe({next:V=>{V.IsSuccess==!0&&V.Obj!=null?this.HandleResponseDetails(V.Obj,t,n):this._AppModeService._Toastr.error(V.Message)}});this.SubscriptionArr.push(N)}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Items"&&(this.Invoice.InvoiceDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.Invoice.InvoiceDetails[n].Items.concat(t.DataReturn),"Id"),this.Invoice.InvoiceDetails[n].Items=this.Invoice.InvoiceDetails[n].Items.map(s=>U(O({},s),{NameAndCode:s.Code!=null?`${s.Name} - ${s.Code}`:`${s.Name}`}))),e=="ItemUnits"&&(this.Invoice.InvoiceDetails[n].ProductUnits=t.DataReturn)}ChangeSearchApi(t,e){let n=`${e.searchTerm}`.trim();(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let s={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Storages"&&(s.BranchFilter=!0),t=="Treasury"&&(s.BranchFilter=!0),t=="Items"&&(s.Columns=["Id","Name","Code"]),t=="ItemsCode"&&(s.TableName="Items",s.Columns=["Id","Name","Code"],s.SearchText=e);let v=this._Apiservice.post("Global/GetAll",s,!1).subscribe({next:f=>{f.IsSuccess==!0&&f.Obj!=null?this.HandleResponse(f.Obj,t):this._AppModeService._Toastr.error(f.Message)}});this.SubscriptionArr.push(v)}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Suppliers"&&(this.SupplierArr=this._SharedObjectModelService.RemoveDuplicates(this.SupplierArr.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ClientArr=this._SharedObjectModelService.RemoveDuplicates(this.ClientArr.concat(t.DataReturn),"Id")),e=="Storages"&&(this.StoreArr=this._SharedObjectModelService.RemoveDuplicates(this.StoreArr.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id")),e=="Employee"&&(this.EmployeeArr=this._SharedObjectModelService.RemoveDuplicates(this.EmployeeArr.concat(t.DataReturn),"Id"))}SelectItemScan(t){t!=null&&t>0}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Supplier"&&(n=this.SupplierArr),e=="Client"&&(n=this.ClientArr),e=="Store"&&(n=this.StoreArr),e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr),e=="Employee"&&(n=this.EmployeeArr);let s=n.find(v=>v.Id==t);if(s==null){this._AppModeService.DontPlay();return}else this.Invoice[`${e}Id`]=t,this.Invoice[`${e}Name`]=s.Name,e=="Supplier"&&this.GetNetSupplier(t),e=="Client"&&this.GetNetClient(t)}else this.Invoice[`${e}Id`]=null,this.Invoice[`${e}Name`]="",(e=="Supplier"||e=="Client")&&(this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0})}GetNetSupplier(t){let e={PersonId:t},n=this._Apiservice.post("SupplierEP/SupplierNetAmount",e,!1).subscribe({next:s=>{s.IsSuccess==!0&&s.Obj!=null?this.NetAccountPerson={NetThamBranch:s.Obj.NetThamBranch,NetOtherBranch:s.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(s.Message)}});this.SubscriptionArr.push(n)}GetNetClient(t){let e={PersonId:t},n=this._Apiservice.post("ClientEP/ClientNetAmount",e,!1).subscribe({next:s=>{s.IsSuccess==!0&&s.Obj!=null?this.NetAccountPerson={NetThamBranch:s.Obj.NetThamBranch,NetOtherBranch:s.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(s.Message)}});this.SubscriptionArr.push(n)}SelectItem(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].Items.find(s=>s.Id==t);if(n!=null)this.Invoice.InvoiceDetails[e].ProductId=n.Id,this.Invoice.InvoiceDetails[e].ProductName=n.Name,this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.AfterSelectem(n.Id,e);else{this._Apiservice.DontPlay();return}}else this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}AfterSelectem(t,e){if(t>0){let n={TableName:"ItemUnits",Columns:["Id","Name"],CurrentPage:1,PageSize:1,SearchText:"",SearchField:"Name"};n.Conditions=`ItemId = ${t}`,n.Join=!0,n.JoinTables=["Units U"],n.JoinConditions=["T.UnitId = U.Id"],n.Columns=["T.Id","U.Name","T.Code"],n.SearchField="U.Name";let s=this._Apiservice.post("Global/GetAll",n,!1).subscribe({next:v=>{if(v.IsSuccess==!0&&v.Obj!=null){let f=v.Obj.DataReturn[0];f!=null&&(this.Invoice.InvoiceDetails[e].ProductUnits=v.Obj.DataReturn,this.Invoice.InvoiceDetails[e].ProductUnitId=f.Id,this.Invoice.InvoiceDetails[e].Quantity=1,this.ScreenName=="SaleInvoice"&&this.SelectUnit(f.Id,e))}else this._AppModeService._Toastr.error(v.Message)}});this.SubscriptionArr.push(s)}}SelectUnit(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].ProductUnits.find(s=>s.Id==t);if(n!=null){if(this.Invoice.InvoiceDetails[e].ProductUnitId=n.Id,this.Invoice.InvoiceDetails[e].ProductUnitName=n.Name,this._AppModeService.DisabledButton=!0,this.ScreenName=="SaleInvoice"){let s={ProductId:this.Invoice.InvoiceDetails[e].ProductId,ProductUnitId:n.Id},v=this._Apiservice.post("ItemEP/ProductPice",s,!1).subscribe({next:f=>{f.IsSuccess==!0&&f.Obj!=null?(this.Invoice.InvoiceDetails[e].Price=f.Obj,this.CalcInvoice(),this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(f.Message)}});this.SubscriptionArr.push(v)}}else{this._Apiservice.DontPlay();return}}else this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}ProductBalance(t,e){this._AppModeService.DisabledButton=!0;let n={ProductId:this.Invoice.InvoiceDetails[t].ProductId==null?0:this.Invoice.InvoiceDetails[t].ProductId,StoreId:this.Invoice.StoreId==null?0:this.Invoice.StoreId},s=this._Apiservice.post("ItemEP/ProductBalance",n,!0).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this._AppModeService.DisabledButton=!1,this.ItemBalanceList=v.Obj.StorageBalance,this._AppModeService._NgbModal.open(e,{size:"xl",centered:!0})):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(v.Message))},error:v=>{this._AppModeService.DisabledButton=!1}});this.SubscriptionArr.push(s)}AppendRow(t){let e=this.Invoice.InvoiceDetails[t],n={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,Discount:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};this.Invoice.InvoiceDetails.push(n)}RemoveRow(t){return this.Invoice.InvoiceDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorFirstRow")),!1):(this.Invoice.InvoiceDetails.splice(t,1),this.CalcInvoice(),!0)}ConvertNumber(t){return Number(t)}ChangeClientType(t){this.Invoice.ClientId=null,this.Invoice.ClientName=" ",t==1&&(this.Invoice.ClientType=1,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),t==2&&(this.Invoice.ClientType=2)}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){this.Invoice={Id:t.Id,PaymentType:t.PaymentType,Name:t.Name,Notes:t.Notes,Code:t.Code,InvoiceCollection:t.InvoiceCollection,InvoiceCollected:t.InvoiceCollected,ClientType:t.ClientType,DocNo:t.DocNo,DocDate:new Date(t.DocDate),TotalInvoice:t.TotalInvoice,TotalDiscRate:t.TotalDiscRate,TotalDisc:t.TotalDisc,TotalInvoiceAfterDisc:t.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:t.TotalInvoiceAfterVat,TotalInvoiceVatAmount:t.TotalInvoiceVatAmount,TotalVatRate:t.TotalVatRate,Cash:t.Cash,Visa:t.Visa,Debt:t.Debt,SupplierId:t.SupplierId,SupplierName:t.SupplierName,ClientId:t.ClientId,ClientName:t.ClientName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,EmployeeId:t.EmployeeId,EmployeeName:t.EmployeeName,StoreId:t.StoreId,StoreName:t.StoreName,InvoiceDetails:t[`${this.ScreenName}Details`]},t.SupplierId>0&&(this.SupplierArr=[{Id:t.SupplierId,Name:t.SupplierName}]),t.ClientId>0&&(this.ClientArr=[{Id:t.ClientId,Name:t.ClientName}]),t.TreasuryId>0&&(this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName}]),t.BankAccountId>0&&(this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]),t.EmployeeId>0&&(this.EmployeeArr=[{Id:t.EmployeeId,Name:t.EmployeeName}]),t.StoreId>0&&(this.StoreArr=[{Id:t.StoreId,Name:t.StoreName}]);for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=this.Invoice.InvoiceDetails[e];this.Invoice.InvoiceDetails[e].Items=[{Id:n.ProductId,Name:n.ProductName,NameAndCode:n.ProductName}],this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:n.ProductUnitId,Name:n.ProductUnitName}]}this._AppModeService.DisabledButton=!1}TotalInvoiceVatAmount(){let t=0;for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=Number(this.Invoice.InvoiceDetails[e].Price),s=Number(this.Invoice.InvoiceDetails[e].Quantity),v=n*s,f=Number(this.Invoice.InvoiceDetails[e].Vat),N=Number(this.Invoice.InvoiceDetails[e].Discount);t+=(v-N)*(f/100)}return Number(t)}CalcInvoice(){this.Invoice.TotalDiscRate=0,this.Invoice.TotalInvoiceAfterDisc=0,this.Invoice.TotalInvoiceAfterVat=0,this.Invoice.TotalVatRate=0,this.Invoice.TotalDisc=0,this.Invoice.TotalInvoice=0,this.Invoice.TotalInvoiceVatAmount=0;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=Number(this.Invoice.InvoiceDetails[t].Price),n=Number(this.Invoice.InvoiceDetails[t].Quantity),s=Number(this.Invoice.InvoiceDetails[t].Discount),v=Number(this.Invoice.InvoiceDetails[t].Vat),f=e*n;this.Invoice.InvoiceDetails[t].TotalPrice=Number(f),this.Invoice.TotalInvoice+=Number(f),this.Invoice.InvoiceDetails[t].Discount=s==0?"":s,this.Invoice.TotalDisc+=s,this.Invoice.InvoiceDetails[t].TotalPriceAfterVat=Number((e*n-s)*(v/100)+(e*n-s))}this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDisc/100*this.Invoice.TotalInvoice),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoice-this.Invoice.TotalDisc),this.Invoice.TotalInvoiceVatAmount=this.TotalInvoiceVatAmount(),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterDisc+this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalInvoiceVatAmount/100*this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDiscRate),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalInvoiceVatAmount=Number(this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalVatRate),this.Invoice.TotalInvoice=Number(this.Invoice.TotalInvoice),this.Invoice.TotalDisc=Number(this.Invoice.TotalDisc),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterVat),this.ChangeCash()}Validate(){if((this.ScreenName=="BuyOffer"||this.ScreenName=="BuyInvoice")&&(this.Invoice.SupplierId==0||this.Invoice.SupplierId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterSupplier")),!1;if(this.ScreenName=="BuyInvoice"&&(this.Invoice.StoreId==0||this.Invoice.StoreId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterStore")),!1;if(this.ScreenName=="SaleOffer"&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.Invoice.DocDate==""||this.Invoice.DocDate==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterDate")),!1;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=t,n=Number(this.Invoice.InvoiceDetails[t].ProductId),s=Number(this.Invoice.InvoiceDetails[t].Price),v=Number(this.Invoice.InvoiceDetails[t].Quantity),f=Number(this.Invoice.InvoiceDetails[t].Discount),N=Number(this.Invoice.InvoiceDetails[t].Vat),V=Number(this.Invoice.InvoiceDetails[t].ProductUnitId),Ye=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterVat);if(n==null||n==null||n<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterProduct")+" "+(e+1)),!1;if(V==null||V==null||V<=0||isNaN(V))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit")+" "+(e+1)),!1;if(this.Invoice.InvoiceDetails.filter(re=>re.ProductId==n&&re.ProductUnitId==V).length>=2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(e+1)),!1;if(s==null||s==null||isNaN(s)||s<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterPrice")+" "+(e+1)),!1;if(v==null||v==null||isNaN(v)||v<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterQuantity")+" "+(e+1)),!1;if(f==null||f==null||isNaN(f)||f<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorDiscount")+" "+(e+1)),!1;if(N==null||N==null||isNaN(N)||N<0||N>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorVat")+" "+(e+1)),!1;if(Ye<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorNetRow")+" "+(e+1)),!1}if(this.Invoice.TotalInvoice<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.TotalInvoiceAfterVat<0||this.Invoice.TotalInvoiceAfterVat==0&&this.Invoice.TotalInvoiceAfterDisc==0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorTotal")),!1;if(this.ScreenName=="SaleInvoice"||this.ScreenName=="BuyInvoice"){if(Number(this.Invoice.Visa)<0||isNaN(Number(this.Invoice.Visa)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Cash)<0||isNaN(Number(this.Invoice.Cash)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Debt)<0||isNaN(Number(this.Invoice.Debt)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(Number(this.Invoice.Visa)>0&&(this.Invoice.BankAccountId<=0||this.Invoice.BankAccountId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterBank")),!1;if(Number(this.Invoice.Cash)>0&&(this.Invoice.TreasuryId<=0||this.Invoice.TreasuryId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterTreasury")),!1;if(this.Invoice.PaymentType==1&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)+Number(this.Invoice.Debt)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Debt)<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==3&&this.Invoice.EmployeeId==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SalesReport.ChooseEmployee")),!1}return!0}ChangePamentType(t){this.Invoice.BankAccountId=null,this.Invoice.BankAccountName="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.EmployeeId=null,this.Invoice.EmployeeName="",t==1&&(this.Invoice.PaymentType=1,this.Invoice.Visa="",this.Invoice.Debt="",this.Invoice.Cash=this.Invoice.TotalInvoiceAfterVat),t==2&&(this.Invoice.PaymentType=2,this.Invoice.Cash="",this.Invoice.Visa="",this.Invoice.Debt=this.Invoice.TotalInvoiceAfterVat),t==3&&(this.Invoice.Visa="",this.Invoice.Cash="",this.Invoice.Debt="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.BankAccountId=null,this.Invoice.BankAccountName=""),this.ChangeCash()}ChangeCash(){this.Invoice.PaymentType==2&&(this.Invoice.Debt=Number((this.Invoice.TotalInvoiceAfterVat-(Number(this.Invoice.Cash)+Number(this.Invoice.Visa))).toFixed(2))),this.Invoice.PaymentType==1&&(this.Invoice.Cash=Number((this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Visa)).toFixed(2)),this.Invoice.Visa=Number((this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Cash)).toFixed(2))),this.Invoice.TreasuryId=Number(this.Invoice.Cash)==0?null:this.Invoice.TreasuryId,this.Invoice.BankAccountId=Number(this.Invoice.Visa)==0?null:this.Invoice.BankAccountId,this.Invoice.TreasuryName=Number(this.Invoice.Cash)==0?"":this.Invoice.TreasuryName,this.Invoice.BankAccountName=Number(this.Invoice.Visa)==0?"":this.Invoice.BankAccountName,this.Invoice.Cash=Number(this.Invoice.Cash)==0?"":this.Invoice.Cash,this.Invoice.Visa=Number(this.Invoice.Visa)==0?"":this.Invoice.Visa,this.Invoice.Debt=Number(this.Invoice.Debt)==0?"":this.Invoice.Debt,this.DefaultBankTreasury()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.PaymentType=t.SaleInvoicePaymentType>0?t.SaleInvoicePaymentType:1,t.SaleInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.SaleInvoiceStoreId,this.StoreArr.push({Id:t.SaleInvoiceStoreId,Name:t.SaleInvoiceStoreName})),t.SaleInvoiceClientType>0&&(this.Invoice.ClientType=t.SaleInvoiceClientType,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A")),this.ScreenName=="BuyInvoice"&&(this.Invoice.PaymentType=t.BuyInvoicePaymentType>0?t.BuyInvoicePaymentType:1,t.BuyInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.BuyInvoiceStoreId,this.StoreArr.push({Id:t.BuyInvoiceStoreId,Name:t.BuyInvoiceStoreName})))}DefaultBankTreasury(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.Cash>0&&t.SaleInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.SaleInvoiceTreasuryId,this.TreasuryArr.push({Id:t.SaleInvoiceTreasuryId,Name:t.SaleInvoiceTreasuryName})),this.Invoice.Visa>0&&t.SaleInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.SaleInvoiceBankAccountId,this.BankAccountArr.push({Id:t.SaleInvoiceBankAccountId,Name:t.SaleInvoiceBankAccountName}))),this.ScreenName=="BuyInvoice"&&(this.Invoice.Cash>0&&t.BuyInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.BuyInvoiceTreasuryId,this.TreasuryArr.push({Id:t.BuyInvoiceTreasuryId,Name:t.BuyInvoiceTreasuryName})),this.Invoice.Visa>0&&t.BuyInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.BuyInvoiceBankAccountId,this.BankAccountArr.push({Id:t.BuyInvoiceBankAccountId,Name:t.BuyInvoiceBankAccountName})))}Save(){if(this.CalcInvoice(),this.Validate()==!1)return;this.Invoice.Cash=this.Invoice.Cash==""?0:this.Invoice.Cash,this.Invoice.Visa=this.Invoice.Visa==""?0:this.Invoice.Visa,this.Invoice.Debt=this.Invoice.Debt==""?0:this.Invoice.Debt,this.Invoice[`${this.ScreenName}Details`]=this.Invoice.InvoiceDetails.map(e=>U(O({},e),{Discount:e.Discount==""?0:e.Discount}));let t={Id:this.Invoice.Id,PaymentType:Number(this.Invoice.PaymentType),Name:this.Invoice.Name,Notes:this.Invoice.Notes,Code:this.Invoice.Code,InvoiceCollection:this.Invoice.InvoiceCollection,InvoiceCollected:this.Invoice.InvoiceCollected,ClientType:this.Invoice.ClientType,DocNo:this.Invoice.DocNo,DocDate:this._Apiservice.ConvertISODate(this.Invoice.DocDate),TotalInvoice:this.Invoice.TotalInvoice,TotalDiscRate:this.Invoice.TotalDiscRate,TotalDisc:this.Invoice.TotalDisc,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate,Cash:Number(this.Invoice.Cash),Visa:Number(this.Invoice.Visa),Debt:Number(this.Invoice.Debt),TreasuryId:this.Invoice.TreasuryId,TreasuryName:this.Invoice.TreasuryName,BankAccountId:this.Invoice.BankAccountId,BankAccountName:this.Invoice.BankAccountName,EmployeeId:this.Invoice.EmployeeId,EmployeeName:this.Invoice.EmployeeName,StoreId:this.Invoice.StoreId,StoreName:this.Invoice.StoreName,ClientId:this.Invoice.ClientId==null?0:this.Invoice.ClientId,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName};if(t[`${this.ScreenName}Details`]=this.Invoice[`${this.ScreenName}Details`],t.Id==0){let e=this._Apiservice.post(this.AddUrl,t,!0).subscribe({next:n=>{n.IsSuccess==!0&&n.Obj!=null?(this._AppModeService._Toastr.success(n.Message),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(n.Obj)):this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}if(t.Id>0){let e=this._Apiservice.put(this.UpdateUrl,t,!0).subscribe({next:n=>{if(n.IsSuccess==!0&&n.Obj!=null){this._AppModeService._Toastr.success(n.Message);let s=n.Obj,v=this._SharedObjectModelService.Paging.DataReturn.find(f=>f.Id==s.Id);v!=null&&Object.assign(v,s),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}}HoldInvoice(){let t=this.Invoice.InvoiceDetails.filter(v=>v.ProductId>0).map(v=>U(O({},v),{Discount:v.Discount==""?0:v.Discount,Price:v.Price==""?0:v.Price}));if(t.length==0)return;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient"));return}let e=0;this.ScreenName=="SaleInvoice"&&(e=1),this.ScreenName=="BuyInvoice"&&(e=2);let n={ClientId:this.Invoice.ClientId,ClientType:this.Invoice.ClientType,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName,HoldType:e,HoldInvoiceDetails:t,Id:0,TotalInvoice:this.Invoice.TotalInvoice,TotalDisc:this.Invoice.TotalDisc,TotalDiscRate:this.Invoice.TotalDiscRate,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate},s=this._Apiservice.post("HoldInvoiceEP/Add",n,!0).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo()):this._AppModeService._Toastr.error(v.Message)}});this.SubscriptionArr.push(s)}ShowHoldInvoice(){let t="";this.ScreenName=="SaleInvoice"&&(t="HoldType = 1"),this.ScreenName=="BuyInvoice"&&(t="HoldType = 2"),this.OutTablePaging={InputType:"Table",Type:"TablePaging",GlobalData:{BranchFilter:!0,Url:"Global/GetAll",TableName:"HoldInvoice",Conditions:t,Join:!0,JoinTables:["Clients Client"],JoinConditions:["T.ClientId = Client.Id"],Columns:["T.Id","Client.Name AS ClientName","T.TotalInvoice","T.TotalDisc","T.TotalInvoiceVatAmount","T.TotalInvoiceAfterVat","T.Notes"]},Required:!1,TableCell:[{SortName:"ClientName",CellName:"SaleInvoice.Client",ExistSearchField:"Client.Name"},{SortName:"TotalInvoice",CellName:"Table.Total"},{SortName:"TotalDisc",CellName:"Table.Discount"},{SortName:"TotalInvoiceVatAmount",CellName:"Table.Vat"},{SortName:"TotalInvoiceAfterVat",CellName:"Table.NetTotal"},{SortName:"Notes",CellName:"Table.Notes"}]},this._AppModeService._NgbModal.open(this.AllHoldModel,{size:"xl"})}GetSaleHold(t){let e=this._SharedObjectModelService.SecoundPageModel;console.log(e),this.Invoice.ClientId=e.ClientId,this.Invoice.ClientName=e.ClientName,this.Invoice.SupplierId=e.SupplierId,this.Invoice.SupplierName=e.SupplierName,e.SupplierId>0&&(this.SupplierArr=[{Id:e.SupplierId,Name:e.SupplierName}]),e.ClientId>0&&(this.ClientArr=[{Id:e.ClientId,Name:e.ClientName}]),this.Invoice.InvoiceDetails=[];for(let n=0;n<e.HoldInvoiceDetails.length;n++){let s=e.HoldInvoiceDetails[n];s.Items=[{Id:s.ProductId,Name:s.ProductName,NameAndCode:s.ProductName}],s.ProductUnits=[{Id:s.ProductUnitId,Name:s.ProductUnitName}],this.Invoice.InvoiceDetails.push(s)}t.close("Close click"),this.CalcInvoice(),this.ChangeCash()}DeleteSaleHold(t){}ResetPage(){this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,Discount:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this._DefaultSettingsService.ResetDate(this.Invoice),this.HandleMyDefaultSettings()}ResetDetails(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,Discount:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};if(this.Invoice.InvoiceDetails.length>0&&(this.Invoice.InvoiceDetails=this.Invoice.InvoiceDetails.filter(e=>e.ProductId!=0&&e.ProductId!=null&&e.ProductType!=2),this.Invoice.InvoiceDetails.length==0)){this.Invoice.InvoiceDetails.push(t),this.CalcInvoice();return}}trackByMethod(t,e){return e.Id}ngOnDestroy(){for(let t=0;t<this.SubscriptionArr.length;t++)this.SubscriptionArr[t].unsubscribe(),this.SubscriptionArr[t].remove(this.SubscriptionArr[t])}};d.\u0275fac=function(e){return new(e||d)(F(pe),F(ne),F(qe),F(ie),F(Y))},d.\u0275cmp=L({type:d,selectors:[["app-dynamic-invoice"]],viewQuery:function(e,n){if(e&1&&(E(Mt,5),E(Bt,5),E(Et,5)),e&2){let s;k(s=R())&&(n.GLComponent=s.first),k(s=R())&&(n.ContentModel=s.first),k(s=R())&&(n.AllHoldModel=s.first)}},inputs:{SignalR:"SignalR",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[ae,Q],decls:9,vars:8,consts:[["content",""],["AllHold",""],["ItemBalance",""],["GLComponent",""],["SelectStore",""],["SelectSupplier",""],["SelectClient",""],["SelectTreasury",""],["SelectBank",""],["SelectEmployee",""],["SelectItem22",""],["SelectUnits",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","PrintUrl","DeleteUrl","OutModal"],[1,"col-8"],[1,"modal-header","p-0","m-0","bg-white","d-flex","flex-wrap","justify-content-start"],[1,"modal-title","pb-4","p-0","m-0","col-12","col-md-2"],[1,"col-12","col-md-8","d-flex","flex-wrap","justify-content-center"],[1,"col-4","p-1"],["class","col-12  col-md-4 col-lg-2 px-1 d-flex",4,"ngIf"],[1,"modal-body","bg-white","p-0","m-0"],[1,"d-flex","flex-wrap","align-items-end","col-12"],[1,"col-12","col-sm-6","col-md-4","col-lg-1","px-1"],["for","DocNo"],["type","number",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","px-1"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class"," shadow-none text-center w-100",3,"showOtherMonths","showTime","showIcon","showOnFocus","ngModel","ngModelChange",4,"ngIf"],["class","col-12 col-sm-6 col-md-4 col-lg-2 px-1",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","px-1","d-flex","flex-wrap"],[1,"col-12","col-md-6","px-2","text-center"],[1,"my-1"],["type","number","name","NetThamBranch","id","NetThamBranch",1,"form-control","text-center",3,"disabled","value"],["type","number","name","NetOtherBranch","id","NetOtherBranch",1,"form-control","text-center",3,"disabled","value"],["class","col-12 my-2 px-2 d-flex flex-wrap",4,"ngIf"],["id","Table",1,"mt-2","mb-0","pb-0"],[1,"card","mb-0","table","p-0","border-top-right-radius-0","border-top-left-radius-0"],[1,"table","table-hover","table-striped","table-light","m-0","p-0"],[1,"col-3"],[1,"col-2"],["class","col-2",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"TotalContainer","position-relative"],[1,"col-6","col-md-3","col-lg-2","m-0","p-0","text-center"],["for","TotalInvoice",1,"text-white","m-0","p-0","text-center"],[1,"d-block","m-0","p-0","text-center"],["class","col-6 col-md-3 col-lg-2 m-0 p-0 text-center",4,"ngIf"],["for","TotalVat",1,"text-white","m-0","p-0","text-center"],["for","TotalAfterVat",1,"text-white","m-0","p-0","text-center"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],[1,"btn","py-3","px-5",3,"click","ngClass"],[4,"ngIf"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["class","btn btn-danger my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["class","btn btn-warning my-2 my-md-0 mx-1 py-3 px-4",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","py-3","px-5",3,"click"],[1,"col-12","col-md-4","col-lg-2","px-1","d-flex"],[1,"form-check","p-0","col-6","text-center"],[1,"d-flex","align-items-center"],["for","ClientType1",1,"p-0"],["type","radio","name","ClientType","id","ClientType1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","ClientType2",1,"p-0"],["type","radio","name","ClientType","id","ClientType2",1,"form-check-input","mx-2",3,"change","ngModelChange","value","checked","ngModel"],[1,"d-block","text-center"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","showOtherMonths","showTime","showIcon","showOnFocus","ngModel"],[1,"m-0"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"form-text","text-muted"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","change","close","open","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["placeholder","Name","type","text","class","form-control shadow-none text-center","name","","id","Client_Name",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["placeholder","Search","class","p-0 text-center","bindLabel","Name","bindValue","Id",3,"items","autofocus","virtualScroll","searchable","ngModel","clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange",4,"ngIf"],["placeholder","Name","type","text","name","","id","Client_Name",1,"form-control","shadow-none","text-center",3,"ngModelChange","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],[1,"col-12","my-2","px-2","d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-2","px-1","my-1","my-lg-0"],["name","","id","",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],["class","col-12 col-md-8 col-lg-4 px-0 d-flex flex-wrap align-items-center",4,"ngIf"],["class","col-12 col-md-6 my-2 px-2",4,"ngIf"],[1,"col-12","col-md-4","col-lg-2","px-3","my-1","my-lg-0"],["class","my-1",4,"ngIf"],["id","Debt","min","0","type","number","class","form-control shadow-none text-center",3,"disabled","ngModel","ngModelChange",4,"ngIf"],[1,"col-12","col-md-8","col-lg-4","px-0","d-flex","flex-wrap","align-items-center"],[1,"col-12","col-md-6","px-md-1","my-1","my-lg-0"],["min","0","type","number","id","Cash",1,"form-control","py-2","shadow-none","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","virtualScroll","searchable","disabled","ngModel"],["min","0","type","number","id","Visa",1,"form-control","py-2","shadow-none","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","virtualScroll","searchable","disabled","ngModel"],[1,"col-12","col-md-6","my-2","px-2"],["id","Debt","min","0","type","number",1,"form-control","shadow-none","text-center",3,"ngModelChange","disabled","ngModel"],[1,"Flex1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"mx-1","text-dark"],[1,"col-5","mx-1","btn","btn-success",3,"click"],[1,"col-5","mx-1","btn","btn-danger",3,"click","disabled"],[1,"ngSelect","d-flex"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","placeholder","dropdownPosition","virtualScroll","searchable","ngModel"],["class","col-1 d-block text-center btn btn-info py-0 px-2 mx-2",3,"disabled","click",4,"ngIf"],[1,"ngSelect"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","placeholder","dropdownPosition","disabled","virtualScroll","searchable","ngModel"],["min","0","type","number",1,"form-control","text-center",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],["class","text-dark",4,"ngIf"],["min","0","type","number","class","form-control text-center px-0",3,"id","name","disabled","ngModel","change","keyup","ngModelChange",4,"ngIf"],[1,"text-dark"],[1,"col-1","d-block","text-center","btn","btn-info","py-0","px-2","mx-2",3,"click","disabled"],[1,"fa-solid","fa-eye","d-block","mx-auto"],["min","0","type","number",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","id","name","disabled","ngModel"],["for","TotalDiscount",1,"text-white","m-0","p-0","text-center"],["for","TotalAfterVat",1,"text-danger","m-0","p-0","text-center"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"],[1,"btn","btn-danger","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[1,"btn","btn-warning","my-2","my-md-0","mx-1","py-3","px-4",3,"click","disabled"],[3,"ShowToEditeEvent","PageTitle","TablePaging","GetById","DeleteUrl"],[1,"modal-body"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,n){if(e&1){let s=C();c(0,"app-dynamic-component",12),x("OpenModalEvent",function(){return _(s),p(n.OpenModal())})("ShowToEditeEvent",function(){return _(s),p(n.ShowToEdite())}),l(),S(1,Di,112,93,"ng-template",null,0,J)(3,Ai,5,7,"ng-template",13,1,J)(5,Ni,12,7,"ng-template",13,2,J),A(7,"app-glsheard",null,3)}if(e&2){let s=y(2);m("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!0)("GlResponse",!0)("GetById",n.GetById)("PrintUrl",n.PrintUrl)("DeleteUrl",n.DeleteUrl)("OutModal",s)}},dependencies:[K,Ne,we,Se,he,ge,me,ue,Ie,ve,X,fe,Z,Te,Ce,xe,ye,$,q,_e,Fe,te,ee,Qe,$e,Ke],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important}label[_ngcontent-%COMP%]{margin-bottom:6px;cursor:pointer}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#172d50!important;color:#fff!important;box-shadow:none!important}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{box-shadow:3px 5px 3px 1px #eee;border:1px solid #eee}table[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-wrap:break-word!important;word-spacing:wrap!important;overflow-wrap:break-word!important}#editing-view-port[_ngcontent-%COMP%]{overflow-wrap:break-word!important}svg[_ngcontent-%COMP%]{cursor:pointer}"]});let o=d;return o})();export{gn as a};
