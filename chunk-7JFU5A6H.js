import{a as Ge}from"./chunk-L75Y42KL.js";import{c as Re,j as ye}from"./chunk-HX5JBV6V.js";import"./chunk-QI74C7BQ.js";import"./chunk-PWIKXZ6E.js";import"./chunk-S52O5BXQ.js";import{a as he,b as Te}from"./chunk-KOJPIKRQ.js";import"./chunk-WL6N6SLT.js";import{a as Se}from"./chunk-HOAF6CDP.js";import"./chunk-34JSETBR.js";import"./chunk-QFTVA365.js";import"./chunk-LNYZIAUP.js";import"./chunk-HYE6JRVA.js";import{a as de,b as me,c as ue,d as Ce}from"./chunk-DVVEKPVL.js";import{b as xe}from"./chunk-JCTIHYFX.js";import{c as ne,f as ie,h as re,k as le,m as oe,o as ae,p as ce,q as _e,s as se,u as pe}from"./chunk-M24M3PNC.js";import{c as Ie,d as ge}from"./chunk-4L6P5Z5M.js";import{c as X,d as ee,e as te}from"./chunk-JM67XKKX.js";import{$b as G,Bb as d,Cb as p,Db as M,Hb as A,Lb as h,Mb as r,Pb as b,Qb as D,Sb as z,Tb as J,Ub as q,Vb as I,Wb as u,Xb as v,Yb as S,Zb as V,_b as y,ac as f,cb as s,cc as Y,db as F,fc as Z,mc as g,na as H,nc as x,pc as K,ub as w,wb as C,xa as a,ya as c,za as j}from"./chunk-VIO7ZK3G.js";import{a as O,b as $}from"./chunk-3EYC4JTX.js";var ve=["GLComponent"],Ae=(o,m)=>({"btn-success":o,"btn-primary":m});function De(o,m){o&1&&(j(),d(0,"svg",40),M(1,"path",41),p())}function Ve(o,m){o&1&&(j(),d(0,"svg",42),M(1,"path",41),p())}function be(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Pe(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function Me(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,3),h("clear",function(){a(i);let e=r().$implicit;return c(e.AccTrees=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("AllAccTree",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("AllAccTree",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("AllAccTree",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.AccTreeId,"AccTree",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.AccTreeId,e)||(n.AccTreeId=e),c(e)}),w(3,be,2,2,"ng-template",56)(4,Pe,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.AccTreeId)}}function Ne(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Clients.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ee(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function Be(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,4),h("clear",function(){a(i);let e=r().$implicit;return c(e.Clients=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Clients",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Clients",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Clients",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.ClientId,"Client",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.ClientId,e)||(n.ClientId=e),c(e)}),w(3,Ne,2,2,"ng-template",56)(4,Ee,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Clients)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.ClientId)}}function Le(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.BankAccounts.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ke(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function We(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,5),h("clear",function(){a(i);let e=r().$implicit;return c(e.BankAccounts=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("BankAccounts",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("BankAccounts",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("BankAccounts",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.BankAccountId,"BankAccount",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.BankAccountId,e)||(n.BankAccountId=e),c(e)}),w(3,Le,2,2,"ng-template",56)(4,ke,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.BankAccounts)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.BankAccountId)}}function Ue(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Treasurys.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Oe(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function $e(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,6),h("clear",function(){a(i);let e=r().$implicit;return c(e.Treasurys=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Treasury",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Treasury",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Treasury",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.TreasuryId,"Treasury",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.TreasuryId,e)||(n.TreasuryId=e),c(e)}),w(3,Ue,2,2,"ng-template",56)(4,Oe,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Treasurys)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.TreasuryId)}}function Fe(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Suppliers.length," of ",t._SharedObjectModelService.TotalItems,"")}}function je(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function Qe(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,7),h("clear",function(){a(i);let e=r().$implicit;return c(e.Suppliers=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Suppliers",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Suppliers",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Suppliers",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.SupplierId,"Supplier",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.SupplierId,e)||(n.SupplierId=e),c(e)}),w(3,Fe,2,2,"ng-template",56)(4,je,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Suppliers)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.SupplierId)}}function He(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Branches.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ze(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function Je(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,8),h("clear",function(){a(i);let e=r().$implicit;return c(e.Branches=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Branch",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Branch",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Branch",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.BranchClientId,"BranchClient",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.BranchClientId,e)||(n.BranchClientId=e),c(e)}),w(3,He,2,2,"ng-template",56)(4,ze,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Branches)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.BranchClientId)}}function qe(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Employees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ye(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function Ze(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,9),h("clear",function(){a(i);let e=r().$implicit;return c(e.Employees=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Employee",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Employee",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Employee",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.EmployeeId,"Employee",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.EmployeeId,e)||(n.EmployeeId=e),c(e)}),w(3,qe,2,2,"ng-template",56)(4,Ye,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Employees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.EmployeeId)}}function Ke(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r(2).$implicit,t=r(2);s(),V("Loaded ",i.Partners.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Xe(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function et(o,m){if(o&1){let i=A();d(0,"td",54)(1,"ng-select",55,10),h("clear",function(){a(i);let e=r().$implicit;return c(e.Partners=[])})("focus",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Partners",e,n),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let e=I(2),n=r().index,l=r(2);return l.ChangeSearchApiDetails("Partners",e,n),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let e=I(2),n=r().index,l=r(2);return c(l.ChangeSearchApiDetails("Partners",e,n))})("close",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(3);return c(e._AppModeService.ResetCurrentPage())})("change",function(){a(i);let e=r(),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueDetails(n.PartnerId,"Partner",l))}),f("ngModelChange",function(e){a(i);let n=r().$implicit;return G(n.PartnerId,e)||(n.PartnerId=e),c(e)}),w(3,Ke,2,2,"ng-template",56)(4,Xe,1,1,"ng-template",57),p()()}if(o&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);s(),C("items",t.Partners)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),y("ngModel",t.PartnerId)}}function tt(o,m){o&1&&M(0,"td")}function nt(o,m){if(o&1){let i=A();d(0,"tr")(1,"td",43)(2,"div",44)(3,"span",45),u(4),p(),d(5,"button",46),h("click",function(){let e=a(i).index,n=r(2);return c(n.AppendRow(e))}),u(6,"+"),p(),d(7,"button",47),h("click",function(){let e=a(i).index,n=r(2);return c(n.RemoveRow(e))}),u(8,"-"),p()()(),d(9,"td")(10,"select",48),h("change",function(){let e=a(i).index,n=r(2);return c(n.ChangeType(e))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.InitGlType,e)||(n.InitGlType=e),c(e)}),d(11,"option",49),u(12),g(13,"translate"),p(),d(14,"option",50),u(15),g(16,"translate"),p(),d(17,"option",50),u(18),g(19,"translate"),p(),d(20,"option",50),u(21),g(22,"translate"),p(),d(23,"option",50),u(24),g(25,"translate"),p(),d(26,"option",50),u(27),g(28,"translate"),p(),d(29,"option",50),u(30),g(31,"translate"),p(),d(32,"option",50),u(33),g(34,"translate"),p(),d(35,"option",50),u(36),g(37,"translate"),p()()(),w(38,Me,5,6,"td",51)(39,Be,5,6,"td",51)(40,We,5,6,"td",51)(41,$e,5,6,"td",51)(42,Qe,5,6,"td",51)(43,Je,5,6,"td",51)(44,Ze,5,6,"td",51)(45,et,5,6,"td",51)(46,tt,1,0,"td",37),d(47,"td")(48,"input",52),h("keyup",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return _.TotalDebit(),c(_.Debit(n,l))})("change",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return _.TotalDebit(),c(_.Debit(n,l))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.Debit,e)||(n.Debit=e),c(e)}),p()(),d(49,"td")(50,"input",52),h("keyup",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return _.TotalCredit(),c(_.Credit(n,l))})("change",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return _.TotalCredit(),c(_.Credit(n,l))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.Credit,e)||(n.Credit=e),c(e)}),p()(),d(51,"td")(52,"input",53),g(53,"translate"),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.Notes,e)||(n.Notes=e),c(e)}),p()()()}if(o&2){let i=m.$implicit,t=m.index,e=r(2);s(4),v(t+1),s(3),C("disabled",e.CreateInitGlRecept.CreateInitGlReceptLine.length==1),s(3),y("ngModel",i.InitGlType),s(2),S(" ",x(13,45,"InitGlRecept.ChooseType")," "),s(2),b("value",e.InitGlType.AccTree),s(),S(" ",x(16,47,"InitGlRecept.AccTree")," "),s(2),b("value",e.InitGlType.Client),s(),S(" ",x(19,49,"InitGlRecept.Clients")," "),s(2),b("value",e.InitGlType.Bank),s(),S(" ",x(22,51,"InitGlRecept.Bank")," "),s(2),b("value",e.InitGlType.Treasury),s(),S(" ",x(25,53,"InitGlRecept.Treasury")," "),s(2),b("value",e.InitGlType.Supplier),s(),S(" ",x(28,55,"InitGlRecept.Suppliers")," "),s(2),b("value",e.InitGlType.Branch),s(),S(" ",x(31,57,"InitGlRecept.Branches")," "),s(2),b("value",e.InitGlType.EmployeeCustody),s(),S(" ",x(34,59,"InitGlRecept.EmployeeCustody")," "),s(2),b("value",e.InitGlType.PartnersDrawingAccounts),s(),S(" ",x(37,61,"InitGlRecept.PartnersDrawingAccounts")," "),s(2),C("ngIf",i.InitGlType==e.InitGlType.AccTree),s(),C("ngIf",i.InitGlType==e.InitGlType.Client),s(),C("ngIf",i.InitGlType==e.InitGlType.Bank),s(),C("ngIf",i.InitGlType==e.InitGlType.Treasury),s(),C("ngIf",i.InitGlType==e.InitGlType.Supplier),s(),C("ngIf",i.InitGlType==e.InitGlType.Branch),s(),C("ngIf",i.InitGlType==e.InitGlType.EmployeeCustody),s(),C("ngIf",i.InitGlType==e.InitGlType.PartnersDrawingAccounts),s(),C("ngIf",i.InitGlType==0),s(2),D("name","Amount",t,""),D("id","Amount",t,""),y("ngModel",i.Debit),s(2),D("name","Amount",t,""),D("id","Amount",t,""),y("ngModel",i.Credit),s(2),D("name","Notes",t,""),D("id","Notes",t,""),b("placeholder",x(53,63,"Table.Notes")),y("ngModel",i.Notes)}}function it(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r().$implicit,t=r(2);s(),V("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function rt(o,m){if(o&1&&u(0),o&2){let i=m.item;V(" ",i.Name," - ",i.Code," ")}}function lt(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r().$implicit,t=r(2);s(),V("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ot(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function at(o,m){if(o&1&&(d(0,"small",58),u(1),p()),o&2){let i=r().$implicit,t=r(2);s(),V("Loaded ",i.Storages.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ct(o,m){if(o&1&&u(0),o&2){let i=m.item;S(" ",i.Name," ")}}function _t(o,m){if(o&1){let i=A();d(0,"tr")(1,"td",43)(2,"div",44)(3,"span",45),u(4),p(),d(5,"button",46),h("click",function(){let e=a(i).index,n=r(2);return c(n.AppendRowInventory(e))}),u(6,"+"),p(),d(7,"button",47),h("click",function(){let e=a(i).index,n=r(2);return c(n.RemoveRowInventory(e))}),u(8,"-"),p()()(),d(9,"td",59)(10,"ng-select",60,11),g(12,"translate"),h("clear",function(){let e=a(i).$implicit;return c(e.Items=[])})("focus",function(){let e=a(i).index,n=I(11),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=a(i).index,n=I(11),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=a(i).index,n=I(11),l=r(2);return c(l.ChangeSearchApiDetails("Items",n,e))})("close",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("change",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueInventoryDetails(n.ProductId,"Product",l))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.ProductId,e)||(n.ProductId=e),c(e)}),w(13,it,2,2,"ng-template",56)(14,rt,1,2,"ng-template",57),p()(),d(15,"td",59)(16,"ng-select",61,12),g(18,"translate"),h("clear",function(){let e=a(i).$implicit;return c(e.ProductUnits=[])})("focus",function(){let e=a(i).index,n=I(17),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=a(i).index,n=I(17),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=a(i).index,n=I(17),l=r(2);return c(l.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("change",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueInventoryDetails(n.ProductUnitId,"ProductUnit",l))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.ProductUnitId,e)||(n.ProductUnitId=e),c(e)}),w(19,lt,2,2,"ng-template",56)(20,ot,1,1,"ng-template",57),p()(),d(21,"td")(22,"input",62),h("keyup",function(){let e=a(i).index,n=r(2);return c(n.TotalWARow(e))})("change",function(){let e=a(i).index,n=r(2);return c(n.TotalWARow(e))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.Quantity,e)||(n.Quantity=e),c(e)}),p()(),d(23,"td")(24,"input",62),h("keyup",function(){let e=a(i).index,n=r(2);return c(n.TotalWARow(e))})("change",function(){let e=a(i).index,n=r(2);return c(n.TotalWARow(e))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.WA,e)||(n.WA=e),c(e)}),p()(),d(25,"td")(26,"span",45),u(27),p()(),d(28,"td",59)(29,"ng-select",63,13),g(31,"translate"),h("clear",function(){let e=a(i).$implicit;return c(e.Storages=[])})("focus",function(){let e=a(i).index,n=I(30),l=r(2);return l.ChangeSearchApiDetails("Storages",n,e),c(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=a(i).index,n=I(30),l=r(2);return l.ChangeSearchApiDetails("Storages",n,e),c(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=a(i).index,n=I(30),l=r(2);return c(l.ChangeSearchApiDetails("Storages",n,e))})("close",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("open",function(){a(i);let e=r(2);return c(e._AppModeService.ResetCurrentPage())})("change",function(){let e=a(i),n=e.$implicit,l=e.index,_=r(2);return c(_.SelectValueInventoryDetails(n.StoreId,"Store",l))}),f("ngModelChange",function(e){let n=a(i).$implicit;return G(n.StoreId,e)||(n.StoreId=e),c(e)}),w(32,at,2,2,"ng-template",56)(33,ct,1,1,"ng-template",57),p()()()}if(o&2){let i=m.$implicit,t=m.index,e=r(2);s(4),v(t+1),s(3),C("disabled",e.InventoryDetails.length==1),s(3),D("placeholder","  ",x(12,35,"SaleInvoice.ChooseProduct"),""),C("items",i.Items)("dropdownPosition","top")("searchable",!0)("virtualScroll",!0),y("ngModel",i.ProductId),s(6),D("placeholder","  ",x(18,37,"Item.ItemUnit"),""),C("items",i.ProductUnits)("dropdownPosition","top")("disabled",i.ProductId==0||i.ProductId==null),y("ngModel",i.ProductUnitId),s(6),D("id","Quantity",t,""),D("name","Quantity",t,""),C("disabled",i.ProductId==null||i.ProductId==0),y("ngModel",i.Quantity),s(2),D("id","WA",t,""),D("name","WA",t,""),C("disabled",i.ProductId==null||i.ProductId==0),y("ngModel",i.WA),s(3),S(" ",i.Total," "),s(2),D("placeholder","  ",x(31,39,"SaleInvoice.ChooseStore"),""),C("items",i.Storages)("dropdownPosition","top")("searchable",!0)("virtualScroll",!0),y("ngModel",i.StoreId)}}function st(o,m){o&1&&(d(0,"span"),u(1),g(2,"translate"),p()),o&2&&(s(),S(" ",x(2,1,"Model.Save"),""))}function pt(o,m){o&1&&(d(0,"span"),u(1),g(2,"translate"),p()),o&2&&(s(),S(" ",x(2,1,"Model.Update"),""))}function dt(o,m){if(o&1){let i=A();d(0,"button",64),h("click",function(){a(i);let e=r(2);return c(e.OpenGl())}),u(1),g(2,"translate"),p()}o&2&&(s(),S(" ",x(2,1,"Model.Gl")," "))}function mt(o,m){if(o&1){let i=A();M(0,"app-modal-header",15),d(1,"div",16)(2,"div",17)(3,"div",18)(4,"label",19),u(5),g(6,"translate"),p(),M(7,"input",20),p(),d(8,"div",18)(9,"label",21),u(10),g(11,"translate"),p(),d(12,"input",22),f("ngModelChange",function(e){a(i);let n=r();return G(n.CreateInitGlRecept.Notes,e)||(n.CreateInitGlRecept.Notes=e),c(e)}),p()(),d(13,"div",18)(14,"div",23,2)(16,"p-calendar",24),f("ngModelChange",function(e){a(i);let n=r();return G(n.CreateInitGlRecept.DocDate,e)||(n.CreateInitGlRecept.DocDate=e),c(e)}),p()()(),d(17,"div",18)(18,"label",25),u(19),g(20,"translate"),p(),M(21,"input",26),p(),d(22,"div",18)(23,"label",27),u(24),g(25,"translate"),p(),M(26,"input",28),p(),d(27,"div",18),w(28,De,2,0,"svg",29)(29,Ve,2,0,"svg",30),p()(),d(30,"table",31)(31,"thead")(32,"tr")(33,"th",32),u(34,"#"),p(),d(35,"th",32),u(36),g(37,"translate"),p(),d(38,"th",32),u(39,"-"),p(),d(40,"th",32),u(41),g(42,"translate"),p(),d(43,"th",32),u(44),g(45,"translate"),p(),d(46,"th",32),u(47,"-"),p()()(),d(48,"tbody"),w(49,nt,54,65,"tr",33),p()(),d(50,"table",31)(51,"thead")(52,"tr")(53,"th",34),u(54,"#"),p(),d(55,"th",32),u(56),g(57,"translate"),p(),d(58,"th",32),u(59),g(60,"translate"),p(),d(61,"th",32),u(62),g(63,"translate"),p(),d(64,"th",34),u(65),g(66,"translate"),p(),d(67,"th",32),u(68),g(69,"translate"),p(),d(70,"th",32),u(71),g(72,"translate"),p()()(),d(73,"tbody"),w(74,_t,34,41,"tr",33),p()()(),d(75,"div",35)(76,"button",36),h("click",function(){a(i);let e=r();return c(e.Save())}),w(77,st,3,3,"span",37)(78,pt,3,3,"span",37),p(),w(79,dt,3,3,"button",38),d(80,"button",39),h("click",function(){let e=a(i).$implicit,n=r();return e.close("Close click"),c(n.ResetPage())}),u(81),g(82,"translate"),p()()}if(o&2){let i=I(15),t=r();C("PageTitle","CreateInitGlRecept.CreateInitGlRecept"),s(5),v(x(6,35,"Table.DocNo")),s(2),C("value",t.CreateInitGlRecept.DocNo)("disabled",!0),s(3),v(x(11,37,"Table.Notes")),s(2),y("ngModel",t.CreateInitGlRecept.Notes),s(4),C("showClear",t.CreateInitGlRecept.DocDate!=null&&t.CreateInitGlRecept.DocDate!="")("appendTo",i)("showOtherMonths",!0),y("ngModel",t.CreateInitGlRecept.DocDate),C("showTime",!0),s(3),v(x(20,39,"Table.TotalDebit")),s(2),C("disabled",!0)("value",t.TotalDebit()),s(3),v(x(25,41,"Table.TotalCredit")),s(2),C("disabled",!0)("value",t.TotalCredit()),s(2),C("ngIf",t.TotalCredit()==t.TotalDebit()),s(),C("ngIf",t.TotalCredit()!=t.TotalDebit()),s(7),v(x(37,43,"Table.Type")),s(5),v(x(42,45,"Table.DocDebit")),s(3),v(x(45,47,"Table.DocCredit")),s(5),C("ngForOf",t.CreateInitGlRecept.CreateInitGlReceptLine),s(7),v(x(57,49,"SaleInvoice.Name")),s(3),v(x(60,51,"SaleInvoice.Units")),s(3),v(x(63,53,"Table.Quantity")),s(3),v(x(66,55,"CreateInitGlRecept.WA")),s(3),v(x(69,57,"Table.Total")),s(3),v(x(72,59,"SaleInvoice.Storage")),s(3),C("ngForOf",t.InventoryDetails),s(2),C("ngClass",Z(63,Ae,t.CreateInitGlRecept.Id==0,t.CreateInitGlRecept.Id!=0)),s(),C("ngIf",t.CreateInitGlRecept.Id==0),s(),C("ngIf",t.CreateInitGlRecept.Id!=0),s(),C("ngIf",t.CreateInitGlRecept.Id>0),s(2),v(x(82,61,"Model.Close"))}}var bt=(()=>{let m=class m{constructor(t,e,n){this._SharedObjectModelService=t,this._AppModeService=e,this._Apiservice=n,this.TablePaging={InputType:"Table",Type:"TablePaging",GlobalData:{BranchFilter:!0,Url:"Global/GetAll",TableName:"CreateInitGlRecept",Columns:["Id","DocNo","DocDate","DrAmount","CrAmount","Notes"]},Required:!1,TableCell:[{SortName:"DocNo",CellName:"Table.DocNo"},{SortName:"DocDate",CellName:"Table.DocDate",CellDateTime:!0},{SortName:"DrAmount",CellName:"GlManual.TotalDebit"},{SortName:"CrAmount",CellName:"GlManual.TotalCredit"},{SortName:"Notes",CellName:"Table.Notes"}]},this.SubscriptionArr=[],this.CreateInitGlRecept={IsCreated:!1,DocDate:"",DocNo:0,DrAmount:0,CrAmount:0,CreateInitGlReceptLine:[{AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:0,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}],Id:0,Name:"",Notes:"",Code:""},this.InitGlType={None:0,AccTree:1,Client:2,Bank:3,Treasury:4,Supplier:5,Item:6,Branch:7,Salaries:8,EmployeeCustody:9,PartnersDrawingAccounts:10,Revenues:11,Expenses:12,CreditTaxes:13},this.InventoryDetails=[{AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:6,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}],this.TokenBranch=0}ngOnInit(){let t=this._Apiservice.UserIdFromCookies();this.TokenBranch=Number(t.BranchId),this.CreateInitGlRecept.DocDate=new Date(this._Apiservice.FromDate())}OpenModal(){this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){if(this.CreateInitGlRecept=t,this.CreateInitGlRecept.DocDate=new Date(this.CreateInitGlRecept.DocDate),this.InventoryDetails=this.CreateInitGlRecept.CreateInitGlReceptLine.filter(e=>e.InitGlType==this.InitGlType.Item),this.InventoryDetails.length>0)for(let e=0;e<this.InventoryDetails.length;e++)this.InventoryDetails[e].Storages=[],this.InventoryDetails[e].Storages=[{Id:this.InventoryDetails[e].StoreId,Name:this.InventoryDetails[e].StoreName}],this.InventoryDetails[e].ProductUnits=[],this.InventoryDetails[e].ProductUnits=[{Id:this.InventoryDetails[e].ProductUnitId,Name:this.InventoryDetails[e].ProductUnitName}],this.InventoryDetails[e].Items=[{Id:this.InventoryDetails[e].ProductId,Name:this.InventoryDetails[e].ProductName,NameAndCode:this.InventoryDetails[e].ProductName}];else this.InventoryDetails=[{AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:6,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}];this.CreateInitGlRecept.CreateInitGlReceptLine=this.CreateInitGlRecept.CreateInitGlReceptLine.filter(e=>e.InitGlType!=this.InitGlType.Item);for(let e=0;e<this.CreateInitGlRecept.CreateInitGlReceptLine.length;e++){let n=this.CreateInitGlRecept.CreateInitGlReceptLine[e].InitGlType;n==this.InitGlType.AccTree&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].AccTrees=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].AccTrees=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].AccTreeId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].AccTreeName}]),n==this.InitGlType.Client&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Clients=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Clients=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].ClientId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].ClientName}]),n==this.InitGlType.Bank&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].BankAccounts=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].BankAccounts=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].BankAccountId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].BankAccountName}]),n==this.InitGlType.Treasury&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Treasurys=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Treasurys=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].TreasuryId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].TreasuryName}]),n==this.InitGlType.Supplier&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Suppliers=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Suppliers=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].SupplierId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].SupplierName}]),n==this.InitGlType.Branch&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Branches=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Branches=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].BranchClientId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].BranchClientName}]),n==this.InitGlType.EmployeeCustody&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Employees=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Employees=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].EmployeeId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].EmployeeName}]),n==this.InitGlType.PartnersDrawingAccounts&&(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Partners=[],this.CreateInitGlRecept.CreateInitGlReceptLine[e].Partners=[{Id:this.CreateInitGlRecept.CreateInitGlReceptLine[e].PartnerId,Name:this.CreateInitGlRecept.CreateInitGlReceptLine[e].PartnerName}])}}GetPageInfo(){let t=this._Apiservice.get("CreateInitGlReceptEP/GetPageInfo",!1).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.CreateInitGlRecept.DocNo=e.Obj:this._AppModeService._Toastr.error(e.Message)}});this.SubscriptionArr.push(t)}ChangeSearchApiDetails(t,e,n){let l=`${e.searchTerm}`.trim();(l==""||l=="null")&&(e.searchTerm="",l=""),this._AppModeService.CurrentPage+=1;let _={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:l,SearchField:"Name"};if(t=="AllAccTree"&&(_.TableName="AccTree",_.BranchFilter=!0,_.Conditions="AccClass >= 3"),(t=="Treasury"||t=="Partners"||t=="Storages")&&(_.BranchFilter=!0),t=="Branch"&&(_.Conditions=`Id != ${this.TokenBranch}`),t=="Items"&&(_.Columns=["Id","Name","Code"],_.Conditions="ProductType != 2"),t=="ItemUnits"){let T=this.InventoryDetails[n].ProductId;_.Conditions=`ItemId = ${T}`,_.Join=!0,_.JoinTables=["Units U"],_.JoinConditions=["T.UnitId = U.Id"],_.Columns=["T.Id","U.Name","T.Code"],_.SearchField="U.Name"}let R=this._Apiservice.post("Global/GetAll",_,!1).subscribe({next:T=>{T.IsSuccess==!0&&T.Obj!=null?this.HandleResponseDetails(T.Obj,t,n):this._AppModeService._Toastr.error(T.Message)}});this.SubscriptionArr.push(R)}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="AllAccTree"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].AccTrees=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].AccTrees.concat(t.DataReturn),"Id")),e=="Clients"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Clients=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Clients.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].BankAccounts=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].BankAccounts.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Treasurys=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Treasurys.concat(t.DataReturn),"Id")),e=="Suppliers"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Suppliers=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Suppliers.concat(t.DataReturn),"Id")),e=="Branch"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Branches=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Branches.concat(t.DataReturn),"Id")),e=="Employee"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Employees=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Employees.concat(t.DataReturn),"Id")),e=="Partners"&&(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Partners=this._SharedObjectModelService.RemoveDuplicates(this.CreateInitGlRecept.CreateInitGlReceptLine[n].Partners.concat(t.DataReturn),"Id")),e=="Items"&&(this.InventoryDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.InventoryDetails[n].Items.concat(t.DataReturn),"Id"),this.InventoryDetails[n].Items=this.InventoryDetails[n].Items.map(l=>$(O({},l),{NameAndCode:l.Code!=null?`${l.Name} - ${l.Code}`:`${l.Name}`}))),e=="ItemUnits"&&(this.InventoryDetails[n].ProductUnits=t.DataReturn),e=="Storages"&&(this.InventoryDetails[n].Storages=this._SharedObjectModelService.RemoveDuplicates(this.InventoryDetails[n].Storages.concat(t.DataReturn),"Id"))}SelectValueDetails(t,e,n){if(t!=null&&t>0){let l=[];e=="AccTree"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].AccTrees),e=="Client"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Clients),e=="BankAccount"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].BankAccounts),e=="Treasury"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Treasurys),e=="Supplier"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Suppliers),e=="BranchClient"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Branches),e=="Employee"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Employees),e=="Partner"&&(l=this.CreateInitGlRecept.CreateInitGlReceptLine[n].Partners);let _=l.find(R=>R.Id==t);if(_!=null)this.CreateInitGlRecept.CreateInitGlReceptLine[n][`${e}Id`]=_.Id,this.CreateInitGlRecept.CreateInitGlReceptLine[n][`${e}Name`]=_.Name;else{this._Apiservice.DontPlay();return}}else this.CreateInitGlRecept.CreateInitGlReceptLine[n][`${e}Id`]=null,this.CreateInitGlRecept.CreateInitGlReceptLine[n][`${e}Name`]=[]}SelectValueInventoryDetails(t,e,n){if(t!=null&&t>0){let l=[];e=="Product"&&(l=this.InventoryDetails[n].Items),e=="ProductUnit"&&(l=this.InventoryDetails[n].ProductUnits),e=="Store"&&(l=this.InventoryDetails[n].Storages);let _=l.find(R=>R.Id==t);if(_!=null)this.InventoryDetails[n][`${e}Id`]=_.Id,this.InventoryDetails[n][`${e}Name`]=_.Name;else{this._Apiservice.DontPlay();return}}else this.InventoryDetails[n][`${e}Id`]=null,this.InventoryDetails[n][`${e}Name`]="",e=="Product"&&(this.InventoryDetails[n].ProductUnits=[],this.InventoryDetails[n].ProductUnitId=null)}AppendRow(t){this.Row={AccTreeId:null,AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:0,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]},this.CreateInitGlRecept.CreateInitGlReceptLine.push(this.Row)}RemoveRow(t){return this.CreateInitGlRecept.CreateInitGlReceptLine.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.Error.ErrorFirstRow")),!1):(this.CreateInitGlRecept.CreateInitGlReceptLine.splice(t,1),this.TotalDebit(),this.TotalCredit(),!0)}TotalDebit(){let t=0;for(let e=0;e<this.CreateInitGlRecept.CreateInitGlReceptLine.length;e++)t+=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Debit);for(let e=0;e<this.InventoryDetails.length;e++)t+=this.InventoryDetails[e].Total=Number((Number(this.InventoryDetails[e].Quantity)*Number(this.InventoryDetails[e].WA)).toFixed(2));return this.CreateInitGlRecept.DrAmount=Number(t.toFixed(2)),Number(t.toFixed(2))}TotalCredit(){let t=0;for(let e=0;e<this.CreateInitGlRecept.CreateInitGlReceptLine.length;e++)t+=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[e].Credit);return this.CreateInitGlRecept.CrAmount=Number(t.toFixed(2)),Number(t.toFixed(2))}Debit(t,e){t.Credit="",this.TotalDebit(),this.TotalCredit()}Credit(t,e){t.Debit="",this.TotalDebit(),this.TotalCredit()}ChangeType(t){let e=this.CreateInitGlRecept.CreateInitGlReceptLine[t].InitGlType;this.CreateInitGlRecept.CreateInitGlReceptLine[t]={AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:e,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}}AppendRowInventory(t){this.Row={AccTreeId:null,AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:6,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]},this.InventoryDetails.push(this.Row)}RemoveRowInventory(t){return this.InventoryDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.Error.ErrorFirstRow")),!1):(this.InventoryDetails.splice(t,1),this.TotalDebit(),this.TotalCredit(),!0)}TotalWARow(t){let e=this.InventoryDetails[t];e.Total=Number((Number(e.Quantity)*Number(e.WA)).toFixed(2)),this.TotalCredit(),this.TotalDebit()}Save(){if(this.CreateInitGlRecept.DocDate==""){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterDate"));return}if(this.TotalDebit()==0&&this.TotalCredit()==0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GLZero"));return}if(this.TotalDebit()!=this.TotalCredit()){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GL"));return}for(let _=0;_<this.CreateInitGlRecept.CreateInitGlReceptLine.length;_++){let R=_,T=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].InitGlType),P=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].AccTreeId),N=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].ClientId),W=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].BankAccountId),U=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].TreasuryId),Q=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].SupplierId),k=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].BranchClientId),fe=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].EmployeeId),we=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].PartnerId),E=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].Debit),B=Number(this.CreateInitGlRecept.CreateInitGlReceptLine[_].Credit);if(T==0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.Error.Type"));return}if(E<=0&&B<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GL"));return}if(E==null||E==null||B==0&&E==0||B>0&&E>0||isNaN(E)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GL"));return}if(B==null||B==null||B==0&&E==0||B>0&&E>0||isNaN(B)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GL"));return}if(this.CreateInitGlRecept.CreateInitGlReceptLine.filter(L=>L.AccTreeId==P&&T==this.InitGlType.AccTree||L.ClientId==N&&T==this.InitGlType.Client||L.BankAccountId==W&&T==this.InitGlType.Bank||L.TreasuryId==U&&T==this.InitGlType.Treasury||L.SupplierId==Q&&T==this.InitGlType.Supplier||L.BranchClientId==k&&T==this.InitGlType.Branch||L.EmployeeId==fe&&T==this.InitGlType.EmployeeCustody||L.PartnerId==we&&T==this.InitGlType.PartnersDrawingAccounts).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(R+1));return}}let t=this.InventoryDetails.find(_=>_.ProductId>0||Number(_.Quantity)>0||Number(_.WA)>0||_.StoreId>0);if(t!=null)for(let _=0;_<this.InventoryDetails.length;_++){let R=_,T=Number(this.InventoryDetails[_].ProductId),P=Number(this.InventoryDetails[_].StoreId),N=Number(this.InventoryDetails[_].ProductUnitId),W=Number(this.InventoryDetails[_].Quantity),U=Number(this.InventoryDetails[_].WA);if(T==null||T==null||T<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleOffer.Error.EnterProduct"));return}if(N==null||N==null||N<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit"));return}if(W<=0||isNaN(W)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleOffer.Error.EnterQuantity"));return}if(U<=0||isNaN(U)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.Error.EnterWA"));return}if(this.InventoryDetails.filter(k=>k.ProductId==T&&k.ProductUnitId==N&&k.StoreId==P).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(R+1));return}if(this.InventoryDetails[_].Total=Number(this.InventoryDetails[_].WA)*Number(this.InventoryDetails[_].Quantity),P==null||P==null||P<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterStore"));return}}let e=this.CreateInitGlRecept.CreateInitGlReceptLine.map(_=>$(O({},_),{Total:Number(_.Total),DocDate:this.CreateInitGlRecept.DocDate,DocNo:this.CreateInitGlRecept.DocNo,InitGlType:Number(_.InitGlType),Quantity:Number(_.Quantity),WA:Number(_.WA),Credit:Number(_.Credit),Debit:Number(_.Debit)})),n=[];if(t!=null&&(n=this.InventoryDetails.map(_=>$(O({},_),{Total:Number(_.Total),DocDate:this.CreateInitGlRecept.DocDate,DocNo:this.CreateInitGlRecept.DocNo,InitGlType:Number(_.InitGlType),Quantity:Number(_.Quantity),WA:Number(_.WA),Credit:Number(_.Credit),Debit:Number(_.Debit)}))),this.TotalCredit()!=this.TotalDebit()){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("GlManual.Error.GL"));return}let l={IsCreated:this.CreateInitGlRecept.IsCreated,DocDate:this._Apiservice.ConvertISODate(this.CreateInitGlRecept.DocDate),DocNo:this.CreateInitGlRecept.DocNo,CreateInitGlReceptLine:e.concat(n),Id:this.CreateInitGlRecept.Id,Name:"\u0642\u064A\u062F \u0627\u0641\u062A\u062A\u0627\u062D\u064A",Notes:"",Code:"",DrAmount:this.CreateInitGlRecept.DrAmount,CrAmount:this.CreateInitGlRecept.CrAmount};if(this.CreateInitGlRecept.Id==0){let _=this._Apiservice.post("CreateInitGlReceptEP/Add",l,!0).subscribe({next:R=>{R.IsSuccess==!0&&R.Obj!=null?(this._AppModeService._Toastr.success(R.Message),this.ResetPage(),this._SharedObjectModelService.Paging.DataReturn.push(R.Obj)):this._AppModeService._Toastr.error(R.Message)}});this.SubscriptionArr.push(_)}if(this.CreateInitGlRecept.Id>0){let _=this._Apiservice.put("CreateInitGlReceptEP/Update",l,!0).subscribe({next:R=>{if(R.IsSuccess==!0&&R.Obj!=null){this._AppModeService._Toastr.success(R.Message),this.ResetPage();let T=R.Obj,P=this._SharedObjectModelService.Paging.DataReturn.find(N=>N.Id==T.Id);P!=null&&Object.assign(P,T)}else this._AppModeService._Toastr.error(R.Message)}});this.SubscriptionArr.push(_)}}ResetPage(){this.InventoryDetails=[{AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:6,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}],this.CreateInitGlRecept={IsCreated:!1,DocDate:"",DocNo:0,DrAmount:0,CrAmount:0,CreateInitGlReceptLine:[{AccTreeId:null,AccTreeCode:"",AccTreeName:"",BankAccountId:null,BankAccountName:"",ClientId:null,ClientName:"",Code:"",Credit:"",Debit:"",DocDate:"",DocNo:0,InitGlType:0,Id:0,Name:"",SupplierId:null,SupplierName:"",TreasuryId:null,TreasuryName:"",Clients:[],AccTrees:[],Treasurys:[],BankAccounts:[],Suppliers:[],ProductId:null,ProductName:"",ProductUnitId:null,ProductUnitName:"",Quantity:"",Total:"",WA:"",Items:[],ProductUnits:[],StoreId:null,StoreName:"",StorageCode:"",Storages:[],BranchClientId:null,BranchClientName:"",Branches:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Employees:[],Partners:[]}],Id:0,Name:"",Notes:"",Code:""},this.CreateInitGlRecept.DocDate=new Date(this._Apiservice.FromDate())}ServerListener(){this.Hub_Connection?.on("AddInitGlRecept",t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&(this.CreateInitGlRecept.DocNo=t.DocNo)}),this.Hub_Connection?.on("DeleteInitGlRecept",t=>{let e=this._Apiservice.UserIdFromCookies()}),this.Hub_Connection?.on("UpdateInitGlRecept",t=>{let e=this._Apiservice.UserIdFromCookies()})}ngOnDestroy(){for(let t=0;t<this.SubscriptionArr.length;t++)this.SubscriptionArr[t].unsubscribe()}};m.\u0275fac=function(e){return new(e||m)(F(Se),F(xe),F(ne))},m.\u0275cmp=H({type:m,selectors:[["app-create-init-gl-recept"]],viewQuery:function(e,n){if(e&1&&z(ve,5),e&2){let l;J(l=q())&&(n.GLComponent=l.first)}},standalone:!0,features:[Y],decls:5,vars:7,consts:[["content",""],["GLComponent",""],["ddddd",""],["SelectAccTreeDetails",""],["SelectClientDetails",""],["SelectBankAccountsDetails",""],["SelectTreasurysDetails",""],["SelectSuppliersDetails",""],["SelectBranchesDetails",""],["SelectEmployeesDetails",""],["SelectPartnersDetails",""],["SelectItem22",""],["SelectUnits",""],["SelectStorages",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GetById","DeleteUrl","GlResponse","OutModal"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0"],[1,"d-flex","flex-wrap","align-items-end"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","px-1"],["for","DocNo"],["type","number",1,"form-control","text-center",3,"value","disabled"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],[1,"formdate"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","showClear","appendTo","showOtherMonths","ngModel","showTime"],["for","TotalDebit"],["type","number","name","TotalDebit","id","TotalDebit",1,"form-control","text-center",3,"disabled","value"],["for","TotalCredit"],["type","number","name","TotalCredit","id","TotalCredit",1,"form-control","text-center",3,"disabled","value"],["width","35","height","35","fill","#198754","class","bi bi-geo-fill","viewBox","0 0 16 16",4,"ngIf"],["width","35","height","35","fill","#dc3545","class","bi bi-geo-fill","viewBox","0 0 16 16",4,"ngIf"],[1,"table","table-hover","table-striped","table-light","p-0","mx-0","my-3"],[1,"col-2"],[4,"ngFor","ngForOf"],[1,"col-1"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],[1,"btn","py-3","px-5",3,"click","ngClass"],[4,"ngIf"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","py-3","px-5",3,"click"],["width","35","height","35","fill","#198754","viewBox","0 0 16 16",1,"bi","bi-geo-fill"],["fill-rule","evenodd","d","M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"],["width","35","height","35","fill","#dc3545","viewBox","0 0 16 16",1,"bi","bi-geo-fill"],[1,"Flex1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"text-dark"],[1,"col-5","mx-auto","btn","btn-success",3,"click"],[1,"col-5","mx-auto","btn","btn-danger",3,"click","disabled"],["name","Type","id","Type",1,"form-select",3,"change","ngModelChange","ngModel"],["value","0"],[3,"value"],["class","ngSelect border-0",4,"ngIf"],["min","0","type","number",1,"form-control","shadow-none","text-center",3,"keyup","change","ngModelChange","ngModel","name","id"],["type","test",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id","placeholder"],[1,"ngSelect","border-0"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","dropdownPosition","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"form-text","text-muted"],[1,"ngSelect"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","placeholder","searchable","virtualScroll","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","placeholder","disabled","ngModel"],["min","0","type","number",1,"form-control","text-center",3,"keyup","change","ngModelChange","disabled","id","name","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center","col-11",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","placeholder","searchable","virtualScroll","ngModel"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"]],template:function(e,n){if(e&1){let l=A();d(0,"app-dynamic-component",14),h("OpenModalEvent",function(){return a(l),c(n.OpenModal())})("ShowToEditeEvent",function(){return a(l),c(n.ShowToEdite())}),p(),w(1,mt,83,66,"ng-template",null,0,K),M(3,"app-glsheard",null,1)}if(e&2){let l=I(2);C("PageTitle","CreateInitGlRecept.CreateInitGlRecept")("TablePaging",n.TablePaging)("FullScreen",!0)("GetById","CreateInitGlReceptEP/GetById")("DeleteUrl","CreateInitGlReceptEP/Delete")("GlResponse",!0)("OutModal",l)}},dependencies:[Te,he,ge,Ie,ee,te,X,pe,ce,_e,ie,oe,ae,re,se,le,Ce,ue,de,me,ye,Ge,Re]});let o=m;return o})();export{bt as CreateInitGlReceptComponent};
