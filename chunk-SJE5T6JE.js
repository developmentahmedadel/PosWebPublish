import{a as K,b as Q}from"./chunk-UVSBIWKY.js";import"./chunk-5EQTOVFJ.js";import{a as X}from"./chunk-OZ63RRZR.js";import"./chunk-3T7HRBK4.js";import"./chunk-NZD6IPKE.js";import"./chunk-EKOK3I7J.js";import{a as Y,b as $,c as q,d as J}from"./chunk-SU7IEUNK.js";import"./chunk-CETGYK4I.js";import{c as U}from"./chunk-F7IHWOEY.js";import{c as L,d as k}from"./chunk-GJAIQ3XH.js";import{c as D,d as j,i as G,l as z,v as H}from"./chunk-UA6GT64L.js";import"./chunk-GOUT62LL.js";import{$b as A,Cb as c,Db as p,Eb as V,Ib as W,Mb as I,Nb as O,Wb as T,X as M,Xb as u,Yb as E,Zb as _,_b as x,ac as w,bc as C,cc as N,db as l,dc as B,eb as f,ia as y,na as F,nc as h,oc as S,vb as b,xa as a,xb as v,ya as s}from"./chunk-RH76WUG2.js";import{a as R,b as P}from"./chunk-3EYC4JTX.js";function Z(d,m){if(d&1&&(c(0,"small",16),u(1),p()),d&2){let g=O();l(),x("Loaded ",g.Items.length," of ",g._SharedObjectModelService.TotalItems,"")}}function ee(d,m){if(d&1&&u(0),d&2){let g=m.item;_(" ",g.NameAndCode," ")}}var ge=(()=>{let m=class m{constructor(r,o,e){this._SharedObjectModelService=r,this._AppModeService=o,this._Apiservice=e,this._ServiceLifeTime=y(D),this.Reset={FromDate:"",ToDate:""},this.Items=[]}ngOnInit(){this.Reset.FromDate=new Date(this._Apiservice.FromDate()),this.Reset.ToDate=new Date(this._Apiservice.ToNowDate())}ChangeSearchApi(r,o){let e=`${o.searchTerm}`.trim();(e==""||e=="null")&&(o.searchTerm="",e=""),this._AppModeService.CurrentPage+=1;let i={TableName:r,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:e,SearchField:"Name"};r=="Storages"&&(i.BranchFilter=!0),r=="Items"&&(i.Columns=["Id","Name","Code"],i.Conditions="ProductType != 2"),this._Apiservice.post("Global/GetAll",i,!1).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:n=>{this.Items=this._SharedObjectModelService.RemoveDuplicates(this.Items.concat(n.Obj.DataReturn),"Id"),this.Items=this.Items.map(t=>P(R({},t),{NameAndCode:`${t.Name} - ${t.Code}`}))}})}Search(){if(this.Reset.FromDate==null||`${this.Reset.FromDate}`.trim()==""){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Interval.Error.FromDate"));return}if(this.Reset.ToDate==null||`${this.Reset.ToDate}`.trim()==""){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Interval.Error.ToDate"));return}let r={FromDate:this._Apiservice.ConvertISODate(this.Reset.FromDate),ToDate:this._Apiservice.ConvertISODate(this.Reset.ToDate),ProductId:this.Reset.ProductId};if(this._Apiservice.ValidateDate(r.FromDate,r.ToDate)==!1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("StatementOfFinancial.Error.SmallDate"));return}this._Apiservice.post("ResetProductWAEP/Add",r,!0).pipe(M(this._ServiceLifeTime.Destroyed$)).subscribe({next:o=>{this._AppModeService._Toastr.success(o.Message)}})}ngOnDestroy(){}};m.\u0275fac=function(o){return new(o||m)(f(X),f(U),f(j))},m.\u0275cmp=F({type:m,selectors:[["app-reset-product-wa"]],standalone:!0,features:[N([D]),B],decls:32,vars:30,consts:[["SelectFromStore",""],["clas","bg-light"],[1,"title-box","font-weight-normal"],[1,"min","border"],[1,"d-flex","flex-wrap","align-items-end","pb-4"],[1,"col-12","col-md-3","p-2"],[1,"my-1"],[1,"formdate"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],["for","Item"],["placeholder","Search","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-3","p-2","text-center"],[1,"btn-Add","btn",3,"click"],[1,"mx-1","pi","pi-save"],[1,"form-text","text-muted"]],template:function(o,e){if(o&1){let i=W();c(0,"section",1)(1,"div",2)(2,"h4"),u(3),h(4,"translate"),p()(),c(5,"div",3)(6,"div",4)(7,"div",5)(8,"p",6),u(9),h(10,"translate"),p(),c(11,"div",7)(12,"p-calendar",8),C("ngModelChange",function(t){return a(i),w(e.Reset.FromDate,t)||(e.Reset.FromDate=t),s(t)}),p()()(),c(13,"div",5)(14,"p",6),u(15),h(16,"translate"),p(),c(17,"div",7)(18,"p-calendar",8),C("ngModelChange",function(t){return a(i),w(e.Reset.ToDate,t)||(e.Reset.ToDate=t),s(t)}),p()()(),c(19,"div",5)(20,"label",9),u(21),h(22,"translate"),p(),c(23,"ng-select",10,0),I("clear",function(){return a(i),s(e.Items=[])})("focus",function(){a(i);let t=T(24);return e.ChangeSearchApi("Items",t),s(e._AppModeService.ResetCurrentPage())})("keyup",function(){a(i);let t=T(24);return e.ChangeSearchApi("Items",t),s(e._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){a(i);let t=T(24);return s(e.ChangeSearchApi("Items",t))})("close",function(){return a(i),s(e._AppModeService.ResetCurrentPage())})("open",function(){return a(i),s(e._AppModeService.ResetCurrentPage())}),C("ngModelChange",function(t){return a(i),w(e.Reset.ProductId,t)||(e.Reset.ProductId=t),s(t)}),b(25,Z,2,2,"ng-template",11)(26,ee,1,1,"ng-template",12),p()(),c(27,"div",13)(28,"button",14),I("click",function(){return a(i),s(e.Search())}),u(29),h(30,"translate"),V(31,"i",15),p()()()()()}o&2&&(l(3),E(S(4,20,"ResetProductWA.ResetProductWA")),l(6),_(" ",S(10,22,"SupplierAccount.FromDate"),""),l(3),A("ngModel",e.Reset.FromDate),v("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0),l(3),_(" ",S(16,24,"SupplierAccount.ToDate"),""),l(3),A("ngModel",e.Reset.ToDate),v("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0),l(3),_(" ",S(22,26,"BalanceStorage.ItemId"),""),l(2),v("items",e.Items)("autofocus",!1)("virtualScroll",!0)("searchable",!0),A("ngModel",e.Reset.ProductId),l(6),_("",S(30,28,"Model.Send")," "))},dependencies:[Q,K,H,G,z,k,L,J,q,Y,$],styles:[".min[_ngcontent-%COMP%]{min-height:100vh}"]});let d=m;return d})();export{ge as ResetProductWAComponent};
