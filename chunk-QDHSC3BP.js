import{a as rt}from"./chunk-PAI6ZM6M.js";import{a as et,b as tt,c as it}from"./chunk-BZPR73YG.js";import{a as nt}from"./chunk-X4NKGLB3.js";import{a as ot}from"./chunk-3UDBFBON.js";import{a as Le,b as $e,c as ze,d as Je,f as Ke,g as qe,h as Ze,i as Xe,j as Ye}from"./chunk-A6MDEMU4.js";import{d as He}from"./chunk-Y5QDR55A.js";import{a as Qe}from"./chunk-VSYXDL23.js";import{g as Ve,h as Be,o as ae,p as ke,q as Ue,r as Oe,t as je,u as Fe,v as Ge,w as We,x as le}from"./chunk-BHSN7HFD.js";import{a as Ee,b as Re}from"./chunk-6BJKXUWP.js";import{a as ce}from"./chunk-BHTRH7BV.js";import{a as Ae,b as Ne,c as Pe,d as Me}from"./chunk-MZIKAFPE.js";import{k as re}from"./chunk-RVJIMCIT.js";import{c as L}from"./chunk-ITQ57RKD.js";import{c as te,d as ie}from"./chunk-KALZ37GW.js";import{b as Se,c as W,f as fe,h as ne,k as oe,m as xe,n as ye,o as Ce,p as Te,q as be,s as De,u as we}from"./chunk-N4FWSTCP.js";import{A as ge,d as X,e as Y,j as ee}from"./chunk-VTADEU6K.js";import{$b as w,Aa as ve,Ab as he,Cb as c,Db as s,Eb as y,Fb as J,Ga as _e,Gb as K,Ib as C,Mb as g,Nb as r,Qb as P,Rb as B,Tb as U,Ub as O,Vb as j,Wb as T,X as V,Xb as u,Yb as b,Zb as D,_b as E,ab as Ie,ac as A,bc as N,ca as de,db as a,dc as q,eb as G,ec as Z,ha as se,ia as Q,na as z,nc as I,oc as h,pc as H,qc as $,vb as S,wa as me,xa as _,xb as m,ya as p,za as ue}from"./chunk-J5UB44FZ.js";import{a as R,b as k}from"./chunk-3EYC4JTX.js";var vt=["DeleteModalComponent"],It=["ModalUserInfoModal"],ht=()=>({"min-width":"75rem"}),gt=()=>["Name"],St=()=>({"min-width":"100%"});function ft(o,d){if(o&1){let i=C();c(0,"div",19)(1,"div",20)(2,"span",21),u(3),I(4,"translate"),s()(),c(5,"div",22)(6,"p-multiSelect",23),I(7,"translate"),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.selectedColumns,e)||(n.selectedColumns=e),p(e)}),s()()()}if(o&2){let i=r(2);a(3),b(h(4,7,i.PageTitle)),a(3),he(Z(11,St)),B("selectedItemsLabel","{0} ",h(7,9,"ColumnsSelected"),""),m("options",i.TablePaging.TableCell),w("ngModel",i.selectedColumns)}}function xt(o,d){if(o&1&&(c(0,"th",31)(1,"span",32),u(2),I(3,"translate"),s(),y(4,"p-sortIcon",33),s()),o&2){let i=d.$implicit;P("pSortableColumn",i.SortName),a(2),D(" ",h(3,4,i.CellName)," "),a(2),P("pSortableColumn",i.SortName),P("field",i.SortName)}}function yt(o,d){if(o&1){let i=C();c(0,"th",24)(1,"p-columnFilter",34,4),I(3,"translate"),g("keyup",function(){let e=_(i).$implicit,n=T(2),l=r(3);return l.LoadDataPaging(l.TablePaging.GlobalData,n.dt.filters[e.SortName],e.ExistSearchField!=null?e.ExistSearchField:e.SortName,!1),p(l.ClearColumns(e,n.dt.filters))}),s()()}if(o&2){let i=d.$implicit;a(),P("field",i.SortName),P("placeholder",h(3,3,"navBar.Search")),m("showMenu",!1)}}function Ct(o,d){if(o&1){let i=C();c(0,"tr")(1,"th",24)(2,"button",25),g("click",function(){_(i),r();let e=T(5),n=r();return n.LoadDataPaging(n.TablePaging.GlobalData,"","",!0),p(n.ClearColumnFilter(e))}),ue(),c(3,"svg",26),y(4,"path",27)(5,"path",28),s()()(),S(6,xt,5,6,"th",29),ve(),y(7,"td",24),s(),c(8,"tr"),y(9,"td",24),S(10,yt,4,5,"th",30),y(11,"td",24),s()}if(o&2){let i=r(2);a(6),m("ngForOf",i.selectedColumns),a(4),m("ngForOf",i.selectedColumns)}}function Tt(o,d){if(o&1&&(J(0),c(1,"span"),u(2),s(),K()),o&2){let i=r().$implicit,t=r().$implicit;a(2),D(" ",t[i.SortName]," ")}}function bt(o,d){o&1&&y(0,"span")}function Dt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),s()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",H(2,1,t[i.SortName],"yyy-M-d")," ")}}function wt(o,d){if(o&1&&(c(0,"span"),u(1),I(2,"date"),s()),o&2){let i=r().$implicit,t=r().$implicit;a(),D("",H(2,1,t[i.SortName],"yyy-M-d h:mm:ss a")," ")}}function At(o,d){o&1&&(c(0,"span"),y(1,"i",46),s())}function Nt(o,d){o&1&&(c(0,"span"),y(1,"i",47),s())}function Pt(o,d){if(o&1&&(J(0),S(1,At,2,0,"span",10)(2,Nt,2,0,"span",10),K()),o&2){let i=r().$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0),a(),m("ngIf",t[i.SortName]==!1)}}function Mt(o,d){o&1&&(c(0,"span"),y(1,"i",46),s())}function Vt(o,d){if(o&1&&(c(0,"span"),S(1,Mt,2,0,"span",10),s()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Bt(o,d){o&1&&(c(0,"span"),y(1,"i",47),s())}function Et(o,d){if(o&1&&(c(0,"span"),S(1,Bt,2,0,"span",10),s()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!1)}}function Rt(o,d){o&1&&(c(0,"span"),y(1,"i",46),s())}function kt(o,d){if(o&1&&(c(0,"span"),S(1,Rt,2,0,"span",10),s()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function Ut(o,d){o&1&&(c(0,"span"),y(1,"i",47),s())}function Ot(o,d){if(o&1&&(c(0,"span"),S(1,Ut,2,0,"span",10),s()),o&2){let i=r(2).$implicit,t=r().$implicit;a(),m("ngIf",t[i.SortName]==!0)}}function jt(o,d){if(o&1&&(J(0),S(1,Vt,2,1,"span",10)(2,Et,2,1,"span",10)(3,kt,2,1,"span",10)(4,Ot,2,1,"span",10),K()),o&2){let i=r().$implicit;a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean!=null),a(),m("ngIf",i.DataBoolean==!0&&i.CrBoolean==null)}}function Ft(o,d){if(o&1&&(c(0,"td",36),S(1,Tt,3,1,"ng-container",10)(2,bt,1,0,"span",10)(3,Dt,3,4,"span",10)(4,wt,3,4,"span",10)(5,Pt,3,2,"ng-container",10)(6,jt,5,4,"ng-container",10),s()),o&2){let i=d.$implicit,t=r().$implicit,e=r(2);a(),m("ngIf",(i.CellDate==null||i.CellDate==!1)&&(i.CellDateTime==null||i.CellDateTime==!1)&&e.typeOf(t[i.SortName])!="object"&&(i.DataBoolean==null||i.DataBoolean==!1)),a(),m("ngIf",e.typeOf(t[i.SortName])=="object"),a(),m("ngIf",i.CellDate==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.CellDateTime==!0&&e.typeOf(t[i.SortName])!="object"),a(),m("ngIf",i.DataBoolean==!0&&i.DrBoolean==null&&i.CrBoolean==null),a(),m("ngIf",i.DataBoolean==!0&&(i.DrBoolean!=null||i.CrBoolean!=null))}}function Gt(o,d){if(o&1){let i=C();c(0,"button",48),g("click",function(){_(i);let e=r().$implicit,n=r(2);return p(n.ConfirmDelete(e.Id))}),y(1,"i",49),s()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton)}}function Wt(o,d){if(o&1){let i=C();c(0,"tr",35)(1,"td",36)(2,"span"),u(3),s(),y(4,"span",37),s(),S(5,Ft,7,6,"td",38),c(6,"td",39)(7,"div",40)(8,"button",41),g("click",function(){let e=_(i).$implicit,n=r(2);return p(n.ShowToEdite(e))}),y(9,"i",42),s(),c(10,"button",43),g("click",function(){let e=_(i).$implicit,n=r(2);return p(n.OpenUserModal(e,n.TablePaging.GlobalData.TableName))}),y(11,"i",44),s(),S(12,Gt,2,1,"button",45),s()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);m("pContextMenuRow",i)("pReorderableRow",t),a(3),b(t+1),a(2),m("ngForOf",e.selectedColumns),a(3),m("disabled",e._AppModeService.DisabledButton),a(2),m("disabled",e._AppModeService.DisabledButton),a(2),m("ngIf",e.DeleteUrl!="")}}function Lt(o,d){if(o&1){let i=C();c(0,"p-paginator",50),g("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),s()}if(o&2){let i=r(2);m("first",i._SharedObjectModel.PagingModal.CurrentPage)("rows",i._SharedObjectModel.PagingModal.PageSize)("totalRecords",i._SharedObjectModel.PagingModal.TotalItems)("rowsPerPageOptions",i._AppModeService.RowCount)}}function Ht(o,d){if(o&1){let i=C();c(0,"p-paginator",51),g("onPageChange",function(e){_(i);let n=r(2);return p(n.onPageChange(n.TablePaging.GlobalData,e))}),s()}if(o&2){let i=r(2);m("first",i._SharedObjectModel.PagingModal.CurrentPage)("rows",i._SharedObjectModel.PagingModal.PageSize)("totalRecords",i._SharedObjectModel.PagingModal.TotalItems)}}function $t(o,d){if(o&1){let i=C();c(0,"div")(1,"div",11),y(2,"p-contextMenu",12,2),c(4,"p-table",13,3),N("contextMenuSelectionChange",function(e){_(i);let n=r();return A(n.contextSelected,e)||(n.contextSelected=e),p(e)}),g("onSort",function(e){_(i);let n=r();return p(n.SortFunction(e))}),S(6,ft,8,12,"ng-template",14)(7,Ct,12,2,"ng-template",15)(8,Wt,13,7,"ng-template",16),s()(),S(9,Lt,1,4,"p-paginator",17)(10,Ht,1,3,"p-paginator",18),s()}if(o&2){let i=T(3),t=r();a(2),m("model",t.contextitems),a(2),m("value",t._SharedObjectModel.PagingModal.DataReturn)("lazy",!0)("scrollable",!0)("columns",t.selectedColumns)("paginator",!1)("resizableColumns",!0)("reorderableColumns",!0)("rows",t._SharedObjectModel.PagingModal.PageSize)("tableStyle",Z(15,ht)),w("contextMenuSelection",t.contextSelected),m("contextMenu",i)("globalFilterFields",Z(16,gt)),a(5),m("ngIf",t._SharedObjectModel.PagingModal.TotalItems>=10),a(),m("ngIf",t._SharedObjectModel.PagingModal.TotalItems<10)}}var lt=(()=>{let d=class d{constructor(){this._selectedColumns=[],this.contextitems=[],this.contextSelected={},this.DataInfo={CreatedDate:"",CreatedByName:"",LastModifiedDate:"",ModifyByName:"",ModifyCount:0},this.OpenModalEvent=new _e,this.ShowToEditeEvent=new _e,this.PageTitle="",this.OutModal=null,this.FullScreen=!1,this.TablePaging={},this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.SearchText="",this.SearchField="",this.Field="Id",this.Order=1,this._SharedObjectModel=Q(ce),this._AppModeService=Q(L),this._Apiservice=Q(W)}ConfirmDelete(t){this.DeleteModalComponent.ConfirmDelete(t,this.DeleteUrl,"",!0)}OpenUserModal(t,e){this.ModalUserInfoComponent.ShowDetails(t,e)}ngOnInit(){this._SharedObjectModel.PagingModal={PageSize:10,CurrentPage:1,TotalPages:0,TotalItems:0,DataReturn:[]},this.LoadDataPaging(this.TablePaging.GlobalData,"","",!1),this.HandleCol(),this.contextitems=[{label:"Delete",icon:"pi pi-fw pi-times",command:()=>this.ConfirmDelete(this.contextSelected.Id)}]}get selectedColumns(){return this._selectedColumns}set selectedColumns(t){this._selectedColumns=this.TablePaging.TableCell.filter(e=>t.includes(e))}HandleCol(){this.TablePaging.TableCell=this.TablePaging.TableCell.map(t=>k(R({},t),{ConvertCellName:this._AppModeService._Translate.instant(t.CellName)})),this._selectedColumns=this.TablePaging.TableCell}ClearColumnFilter(t){let e=Object.values(t.filters);for(let n=0;n<e.length;n++)e[n].value=null;this.SearchText="",this.SearchField="",this._SharedObjectModel.PagingModal.CurrentPage=1}ClearColumns(t,e){let n=Object.keys(e),l=Object.values(e);for(let v=0;v<n.length;v++)n[v]!=t.SortName&&(l[v].value=null)}LoadDataPaging(t,e,n,l=!0){e=`${e==""?"":e.value}`.trim(),this.SearchText=e,this.SearchField=n;let v={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:t.BranchFilter,CurrentPage:1,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions};this._Apiservice.post(`${t.Url}`,v,l).pipe(V(this._Apiservice.destroy$)).subscribe({next:x=>{x.IsSuccess==!0&&x.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=x.Obj.DataReturn,this._SharedObjectModel.PagingModal.CurrentPage=x.Obj.CurrentPage,this._SharedObjectModel.PagingModal.TotalItems=x.Obj.TotalItems):this._AppModeService._Toastr.error(x.Message)}})}SortFunction(t){let e=t.multisortmeta[0];if(e!=null){this.Field=e.field,this.Order=e.order;let n=this.TablePaging.GlobalData,l={TableName:n.TableName,Columns:n.Columns,Conditions:n.Conditions==null?"":n.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:n.BranchFilter,CurrentPage:this._SharedObjectModel.PagingModal.CurrentPage,Join:n.Join,JoinTables:n.JoinTables,JoinConditions:n.JoinConditions,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${n.Url}`,l,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=v.Obj.DataReturn,this._SharedObjectModel.PagingModal.CurrentPage=v.Obj.CurrentPage,this._SharedObjectModel.PagingModal.TotalItems=v.Obj.TotalItems):this._AppModeService._Toastr.error(v.Message)}})}}onPageChange(t,e){e.page++,e.first,e.rows,this._SharedObjectModel.PagingModal.CurrentPage=e.first,this._SharedObjectModel.PagingModal.PageSize=e.rows;let n={TableName:t.TableName,Columns:t.Columns,Conditions:t.Conditions==null?"":t.Conditions,PageSize:this._SharedObjectModel.PagingModal.PageSize,BranchFilter:t.BranchFilter,CurrentPage:e.page,Join:t.Join,JoinTables:t.JoinTables,JoinConditions:t.JoinConditions,SearchText:this.SearchText,SearchField:this.SearchField,OrderByField:this.Field,Order:this.Order};this._Apiservice.post(`${t.Url}`,n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this._SharedObjectModel.PagingModal.DataReturn=l.Obj.DataReturn,this._SharedObjectModel.PagingModal.TotalItems=l.Obj.TotalItems):this._AppModeService._Toastr.error(l.Message)}})}ShowToEdite(t){this._AppModeService.DisabledButton=!0,this._Apiservice.getById(this.GetById,t.Id).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{this._AppModeService.DisabledButton=!1,e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModel.SecoundPageModel=e.Obj,this.ShowToEditeEvent.emit("ShowToEdite Fire"),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(e.Message))},error:e=>{this._AppModeService.DisabledButton=!1}})}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}typeOf(t){return typeof t}};d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=z({type:d,selectors:[["app-table"]],viewQuery:function(e,n){if(e&1&&(U(vt,5),U(It,5)),e&2){let l;O(l=j())&&(n.DeleteModalComponent=l.first),O(l=j())&&(n.ModalUserInfoComponent=l.first)}},inputs:{PageTitle:"PageTitle",OutModal:"OutModal",FullScreen:"FullScreen",DataView:"DataView",TablePaging:"TablePaging",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl",selectedColumns:"selectedColumns"},outputs:{OpenModalEvent:"OpenModalEvent",ShowToEditeEvent:"ShowToEditeEvent"},standalone:!0,features:[q],decls:10,vars:1,consts:[["ModalUserInfoModal",""],["DeleteModalComponent",""],["cm",""],["dt1",""],["columnFilter",""],["clas",""],["id","container-page",1,"container-page","p-0"],[1,"page-wrapper"],[1,"main-content"],[1,"inner-box","DivPaging"],[4,"ngIf"],[1,"TablePaging","noclear","table","mb-0","p-0","border-top-right-radius-0","border-top-left-radius-0"],[3,"model"],["scrollHeight","100vh","styleClass","p-datatable-striped","dataKey","Id","sortMode","multiple",3,"contextMenuSelectionChange","onSort","value","lazy","scrollable","columns","paginator","resizableColumns","reorderableColumns","rows","tableStyle","contextMenuSelection","contextMenu","globalFilterFields"],["pTemplate","caption",1,"d-flex","p-0","GridTable"],["pTemplate","header"],["pTemplate","body"],["appendTo","table",3,"first","rows","totalRecords","rowsPerPageOptions","onPageChange",4,"ngIf"],["appendTo","table",3,"first","rows","totalRecords","onPageChange",4,"ngIf"],[1,"d-flex","align-items-center","bg-white"],[1,"col-3","my-2","px-2"],[1,"PageTitle","fs-4"],[1,"col-6","my-2","px-2"],["optionLabel","ConvertCellName","placeholder","Choose Columns",1,"w-100",3,"ngModelChange","options","ngModel","selectedItemsLabel"],["pResizableColumn",""],["type","button","icon","pi pi-file-excel",1,"mx-2","px-3","py-1","btn","btn-success",3,"click"],["width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-counterclockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"],["pResizableColumn","","class","col-2 ",3,"pSortableColumn",4,"ngFor","ngForOf"],["pResizableColumn","",4,"ngFor","ngForOf"],["pResizableColumn","",1,"col-2",3,"pSortableColumn"],[1,"mx-2"],[3,"pSortableColumn","field"],["type","text",3,"keyup","showMenu","field","placeholder"],[3,"pContextMenuRow","pReorderableRow"],[1,"bg-white"],["pReorderableRowHandle","",1,"pi","pi-bars"],["class","bg-white",4,"ngFor","ngForOf"],[1,"p-0","bg-white"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-search"],[1,"btn","btn-light","border","border-1","border-dark","px-3","py-3",3,"click","disabled"],[1,"mx-1","pi","pi-info"],["class","btn btn-danger text-white shadow-none mx-2 py-2 px-3",3,"disabled","click",4,"ngIf"],[1,"pi","pi-check","text-success",2,"font-size","2rem !important"],[1,"pi","pi-times","text-danger",2,"font-size","2rem !important"],[1,"btn","btn-danger","text-white","shadow-none","mx-2","py-2","px-3",3,"click","disabled"],[1,"mx-1","pi","pi-trash"],["appendTo","table",3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["appendTo","table",3,"onPageChange","first","rows","totalRecords"]],template:function(e,n){e&1&&(c(0,"section",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),S(5,$t,11,17,"div",10),s()()()()(),y(6,"app-modal-user-info",null,0)(8,"app-modal-delete",null,1)),e&2&&(a(5),m("ngIf",n.TablePaging.Type=="TablePaging"))},dependencies:[Be,Ve,re,ne,oe,le,ae,ke,Oe,je,Ue,Fe,Ge,We,Y,X,Xe,Ze,qe,Ke,ie,te,ee,Je,He]});let o=d;return o})();var ct=(()=>{let d=class d{constructor(t,e){this._Apiservice=t,this._AppModeService=e,this.ScaleSettingsArr=[],this.GetScaleSettings()}GetScaleSettings(){let t={TableName:"ScaleSettings",Columns:["Id","Name","ZaraNumber","BarCodeLength","ProductCodeLength","WeightCodeLength"],Conditions:"",NoPaging:!0};this._Apiservice.post("Global/GetAll",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?this.ScaleSettingsArr=e.Obj.DataReturn:this._AppModeService._Toastr.error(e.Message)}})}};d.\u0275fac=function(e){return new(e||d)(se(W),se(L))},d.\u0275prov=de({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var Kt=["GLComponent"],qt=["content"],Zt=["OherModal"],Xt=["AllHold"],Yt=["ProductTable"];function ei(o,d){o&1&&(c(0,"th",59),u(1),I(2,"translate"),s()),o&2&&(a(),D(" ",h(2,1,"SaleInvoice.DiscountRate")," % "))}function ti(o,d){o&1&&(c(0,"th",62),u(1),I(2,"translate"),s()),o&2&&(a(),D(" ",h(2,1,"SaleInvoice.Discount"),""))}function ii(o,d){if(o&1&&(c(0,"tr")(1,"th",56)(2,"span",57),u(3,"#"),s()(),c(4,"th",58),u(5),I(6,"translate"),s(),c(7,"th",59),u(8),I(9,"translate"),s(),c(10,"th",59),u(11),I(12,"translate"),s(),c(13,"th",59),u(14),I(15,"translate"),s(),S(16,ei,3,3,"th",60)(17,ti,3,3,"th",61),c(18,"th",62),u(19),I(20,"translate"),s()()),o&2){let i=r(2);a(5),b(h(6,7,"SaleInvoice.Name")),a(3),b(h(9,9,"SaleInvoice.Unit")),a(3),b(h(12,11,"SaleInvoice.Quantity")),a(3),b(h(15,13,"SaleInvoice.Price")),a(2),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(2),b(h(20,15,"SaleInvoice.TotalPriceAfterDiscount"))}}function ni(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r().$implicit,t=r(2);a(),E("Loaded ",i.Items.length," of ",t._SharedObjectModelService.TotalItems,"")}}function oi(o,d){if(o&1&&u(0),o&2){let i=d.item;E(" ",i.Name," - ",i.Code," ")}}function ri(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r().$implicit,t=r(2);a(),E("Loaded ",i.ProductUnits.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ai(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.NameAndUnitFactor," ")}}function li(o,d){if(o&1&&(c(0,"span",90),u(1),s()),o&2){let i=r().$implicit;a(),b(i.Price)}}function ci(o,d){if(o&1){let i=C();c(0,"input",92),I(1,"translate"),g("change",function(){_(i);let e=r(3);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(3);return p(e.CalcInvoice())}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Price,e)||(n.Price=e),p(e)}),s()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;P("placeholder",h(1,7,"SaleInvoice.Price")),B("id","Price",e,""),B("name","Price",e,""),m("disabled",t.ProductId==null||t.ProductUnitId==null),w("ngModel",t.Price)}}function si(o,d){if(o&1){let i=C();c(0,"td",77)(1,"div",78)(2,"button",79),g("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","+",e),p(n.Discount("DiscountRate",e))}),y(3,"i",67),s(),c(4,"div",80)(5,"input",92),I(6,"translate"),g("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("DiscountRate",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.DiscountRate,e)||(n.DiscountRate=e),p(e)}),s()(),c(7,"button",82),g("click",function(){_(i);let e=r().rowIndex,n=r(2);return n.Button("DiscountRate","-",e),p(n.Discount("DiscountRate",e))}),c(8,"i",83),u(9," - "),s()()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(2),m("disabled",t.ProductId==null||t.ProductUnitId==null),a(3),B("placeholder","",h(6,10,"SaleInvoice.DiscountRate")," %"),B("id","DiscountRate",e,""),B("name","DiscountRate",e,""),m("disabled",t.ProductId==null||t.ProductUnitId==null),w("ngModel",t.DiscountRate),a(2),m("disabled",t.ProductId==null||t.ProductUnitId==null)}}function _i(o,d){if(o&1){let i=C();c(0,"td",77)(1,"div",88)(2,"input",92),I(3,"translate"),g("change",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))})("keyup",function(){_(i);let e=r().rowIndex,n=r(2);return p(n.Discount("Discount",e))}),N("ngModelChange",function(e){_(i);let n=r().$implicit;return A(n.Discount,e)||(n.Discount=e),p(e)}),s()()()}if(o&2){let i=r(),t=i.$implicit,e=i.rowIndex;a(2),P("placeholder",h(3,7,"SaleInvoice.Discount")),B("id","Discount",e,""),B("name","Discount",e,""),m("disabled",t.ProductId==null||t.ProductUnitId==null),w("ngModel",t.Discount)}}function pi(o,d){if(o&1){let i=C();c(0,"tr")(1,"td",63)(2,"div",64)(3,"span",65),u(4),s(),c(5,"button",66),g("click",function(){_(i);let e=r(2);return p(e.AppendRow())}),y(6,"i",67),s(),c(7,"button",68),g("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.RemoveRow(e))}),y(8,"i",69),s()()(),c(9,"td",70),I(10,"translate"),c(11,"div",71)(12,"ng-select",72,6),I(14,"translate"),g("clear",function(){let e=_(i).$implicit;return p(e.Items=[])})("focus",function(){let e=_(i).rowIndex,n=T(13),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),p(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=T(13),l=r(2);return l.ChangeSearchApiDetails("Items",n,e),p(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=T(13),l=r(2);return p(l.ChangeSearchApiDetails("Items",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,l=e.rowIndex,v=T(13);return r(2).SelectItem(n.ProductId,l),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductId,e)||(n.ProductId=e),p(e)}),S(15,ni,2,2,"ng-template",26)(16,oi,1,2,"ng-template",27),s(),c(17,"button",73),g("click",function(){let e=_(i).rowIndex,n=r(2),l=T(6);return p(n.ProductBalance(e,l))}),y(18,"i",74),s()()(),c(19,"td",75),I(20,"translate"),c(21,"ng-select",76,7),I(23,"translate"),g("clear",function(){let e=_(i).$implicit;return p(e.ProductUnits=[])})("focus",function(){let e=_(i).rowIndex,n=T(22),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),p(l._AppModeService.ResetCurrentPage())})("keyup",function(){let e=_(i).rowIndex,n=T(22),l=r(2);return l.ChangeSearchApiDetails("ItemUnits",n,e),p(l._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){let e=_(i).rowIndex,n=T(22),l=r(2);return p(l.ChangeSearchApiDetails("ItemUnits",n,e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){let e=_(i),n=e.$implicit,l=e.rowIndex,v=T(22);return r(2).SelectUnit(n.ProductUnitId,l),p(v.blur())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.ProductUnitId,e)||(n.ProductUnitId=e),p(e)}),S(24,ri,2,2,"ng-template",26)(25,ai,1,1,"ng-template",27),s()(),c(26,"td",77)(27,"div",78)(28,"button",79),g("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","+",e))}),y(29,"i",67),s(),c(30,"div",80)(31,"input",81),I(32,"translate"),g("change",function(){_(i);let e=r(2);return p(e.CalcInvoice())})("keyup",function(){_(i);let e=r(2);return p(e.CalcInvoice())}),N("ngModelChange",function(e){let n=_(i).$implicit;return A(n.Quantity,e)||(n.Quantity=e),p(e)}),s()(),c(33,"button",82),g("click",function(){let e=_(i).rowIndex,n=r(2);return p(n.Button("Quantity","-",e))}),c(34,"i",83),u(35," - "),s()()()(),c(36,"td",77)(37,"div",84),S(38,li,2,1,"span",85)(39,ci,2,9,"input",86),s()(),S(40,si,10,12,"td",87)(41,_i,4,9,"td",87),c(42,"td",77)(43,"div",88)(44,"span",89),u(45),I(46,"translate"),s(),c(47,"span",90),u(48),s()()()()}if(o&2){let i=d.$implicit,t=d.rowIndex,e=r(2);a(),P("title",t+1),a(3),b(t+1),a(3),m("disabled",e.Invoice.InvoiceDetails.length==1),a(2),P("title",h(10,36,"TransferStorage.Name")),a(3),B("placeholder","  ",h(14,38,"SaleInvoice.ChooseProduct"),""),m("dropdownPosition","bottom")("items",i.Items)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductId),a(5),m("disabled",e._AppModeService.DisabledButton||i.ProductId==null),a(2),P("title",h(20,40,"Item.ItemUnit")),a(2),B("placeholder","  ",h(23,42,"Item.ItemUnit"),""),m("dropdownPosition","bottom")("items",i.ProductUnits)("disabled",i.ProductId==0||i.ProductId==null)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductUnitId),a(7),m("disabled",i.ProductId==null||i.ProductUnitId==null),a(3),B("id","Quantity",t,""),B("name","Quantity",t,""),P("placeholder",h(32,44,"SaleInvoice.Quantity")),m("disabled",i.ProductId==null||i.ProductUnitId==null),w("ngModel",i.Quantity),a(2),m("disabled",i.ProductId==null||i.ProductUnitId==null),a(5),m("ngIf",e.ScreenName=="SaleInvoice"),a(),m("ngIf",e.ScreenName!="SaleInvoice"),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate==!1),a(),m("ngIf",e._DefaultSettingsService.DefaultSettings.HideColumnDiscount==!1),a(4),b(h(46,46,"SaleInvoice.TotalPriceAfterDiscount")),a(3),b(i.TotalPriceAfterDiscount.toFixed(2))}}function di(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(2);a(),E("Loaded ",i.ItemsBarCode.length," of ",i._SharedObjectModelService.TotalItems,"")}}function mi(o,d){if(o&1&&u(0),o&2){let i=d.item;E(" ",i.Name," - ",i.Code," ")}}function ui(o,d){if(o&1){let i=C();c(0,"div",93)(1,"input",94),I(2,"translate"),g("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscountRate"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscountRate,e)||(n.GlobalDiscountRate=e),p(e)}),s()()}if(o&2){let i=r(2);a(),B("placeholder","",h(2,3,"SaleInvoice.DiscountRate")," %"),w("ngModel",i.GlobalDiscountRate)}}function vi(o,d){if(o&1){let i=C();c(0,"div",93)(1,"input",95),I(2,"translate"),g("change",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))})("keyup",function(){_(i);let e=r(2);return p(e.ChangeGlobalDis("GlobalDiscount"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.GlobalDiscount,e)||(n.GlobalDiscount=e),p(e)}),s()()}if(o&2){let i=r(2);a(),P("placeholder",h(2,2,"SaleInvoice.Discount")),w("ngModel",i.GlobalDiscount)}}function Ii(o,d){if(o&1){let i=C();c(0,"div",96)(1,"div",97)(2,"div",98)(3,"label",99),u(4),I(5,"translate"),s(),c(6,"div",100)(7,"input",101),g("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(1))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),s()()()(),c(8,"div",97)(9,"div",98)(10,"label",102),u(11),I(12,"translate"),s(),c(13,"div",100)(14,"input",103),g("change",function(){_(i);let e=r(2);return p(e.ChangeClientType(2))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.ClientType,e)||(n.Invoice.ClientType=e),p(e)}),s()()()()()}if(o&2){let i=r(2);a(4),D(" ",h(5,8,"SaleInvoice.Window")," "),a(3),w("ngModel",i.Invoice.ClientType),m("checked",i.Invoice.ClientType==1)("value",1),a(4),D(" ",h(12,10,"SaleInvoice.Always")," "),a(3),m("value",2)("checked",i.Invoice.ClientType==2),w("ngModel",i.Invoice.ClientType)}}function hi(o,d){if(o&1&&(c(0,"span",57),u(1),I(2,"date"),s()),o&2){let i=r(2);a(),D(" ",H(2,1,i.Invoice.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function gi(o,d){if(o&1){let i=C();c(0,"p-calendar",104),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.DocDate,e)||(n.Invoice.DocDate=e),p(e)}),s()}if(o&2){let i=r(2);w("ngModel",i.Invoice.DocDate),m("showTime",!0)("showIcon",!0)("showOnFocus",!0)("showOtherMonths",!0)}}function Si(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(3);a(),E("Loaded ",i.StoreArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function fi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function xi(o,d){if(o&1){let i=C();c(0,"button",110),g("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.Storage))}),y(1,"i",111),s()}}function yi(o,d){if(o&1){let i=C();c(0,"div",105)(1,"div",106)(2,"ng-select",107,8),I(4,"translate"),g("clear",function(){_(i);let e=r(2);return p(e.StoreArr=[])})("focus",function(){_(i);let e=T(3),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(3),n=r(2);return n.ChangeSearchApi("Storages",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(3),n=r(2);return p(n.ChangeSearchApi("Storages",e))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.StoreId,"Store"))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.StoreId,e)||(n.Invoice.StoreId=e),p(e)}),S(5,Si,2,2,"ng-template",26)(6,fi,1,1,"ng-template",27),s()(),c(7,"div",108),S(8,xi,2,0,"button",109),s()()}if(o&2){let i=r(2);a(2),P("placeholder",h(4,8,"Place")),m("items",i.StoreArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.StoreId),a(6),m("ngIf",i.ScreenName=="BuyInvoice")}}function Ci(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(3);a(),E("Loaded ",i.SupplierArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ti(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function bi(o,d){if(o&1){let i=C();c(0,"div",105)(1,"div",106)(2,"ng-select",112,9),I(4,"translate"),g("clear",function(){_(i);let e=r(2);return p(e.SupplierArr=[])})("focus",function(){_(i);let e=T(3),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(3),n=r(2);return n.ChangeSearchApi("Suppliers",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(3),n=r(2);return p(n.ChangeSearchApi("Suppliers",e))})("change",function(){_(i);let e=r(2);return p(e.SelectValue(e.Invoice.SupplierId,"Supplier"))})("close",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(2);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.SupplierId,e)||(n.Invoice.SupplierId=e),p(e)}),S(5,Ci,2,2,"ng-template",26)(6,Ti,1,1,"ng-template",27),s()(),c(7,"div",113)(8,"button",114),g("click",function(){_(i);let e=r(2);return p(e.SecoundScreen(e.EnumScreen.Supplier))}),y(9,"i",115),s()()()}if(o&2){let i=r(2);a(2),P("placeholder",h(4,7,"BuyOffer.Supplier")),m("items",i.SupplierArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.SupplierId)}}function Di(o,d){if(o&1){let i=C();c(0,"input",118),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientName,e)||(n.Invoice.ClientName=e),p(e)}),s()}if(o&2){let i=r(3);m("disabled",!0),w("ngModel",i.Invoice.ClientName)}}function wi(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(4);a(),E("Loaded ",i.ClientArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ai(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Ni(o,d){if(o&1){let i=C();c(0,"ng-select",119,10),I(2,"translate"),g("clear",function(){_(i);let e=r(3);return p(e.ClientArr=[])})("focus",function(){_(i);let e=T(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(1),n=r(3);return n.ChangeSearchApi("Clients",e),p(n._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=T(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("scrollToEnd",function(){_(i);let e=T(1),n=r(3);return p(n.ChangeSearchApi("Clients",e))})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.ClientId,"Client"))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.ClientId,e)||(n.Invoice.ClientId=e),p(e)}),S(3,wi,2,2,"ng-template",26)(4,Ai,1,1,"ng-template",27),s()}if(o&2){let i=r(3);P("placeholder",h(2,7,"SaleOffer.Client")),m("items",i.ClientArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.ClientId)}}function Pi(o,d){if(o&1){let i=C();c(0,"div",105)(1,"div",106),S(2,Di,1,2,"input",116)(3,Ni,5,9,"ng-select",117),s(),c(4,"div",113)(5,"button",114),g("click",function(){_(i);let e=r(2);return p(e.SecoundScreen(e.EnumScreen.Client))}),y(6,"i",115),s()()()}if(o&2){let i=r(2);a(2),m("ngIf",i.Invoice.ClientType==1),a(),m("ngIf",i.Invoice.ClientType==2)}}function Mi(o,d){if(o&1&&(c(0,"div",120)(1,"div",121)(2,"span",122),u(3),I(4,"translate"),s(),c(5,"div",123),y(6,"input",124),s()(),c(7,"div",121)(8,"span",125),u(9),I(10,"translate"),s(),c(11,"div",123),y(12,"input",126),s()()()),o&2){let i=r(2);a(3),b(h(4,6,"NetThamBranch")),a(3),m("disabled",!0)("value",i.NetAccountPerson.NetThamBranch),a(3),b(h(10,8,"NetOtherBranch")),a(3),m("disabled",!0)("value",i.NetAccountPerson.NetOtherBranch)}}function Vi(o,d){o&1&&(c(0,"option",130),u(1),I(2,"translate"),s()),o&2&&(m("value",3),a(),b(h(2,2,"SaleInvoice.Delivery")))}function Bi(o,d){if(o&1){let i=C();c(0,"div",36)(1,"input",133),I(2,"translate"),g("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Cash,e)||(n.Invoice.Cash=e),p(e)}),s()()}if(o&2){let i=r(3);a(),P("placeholder",h(2,3,"SaleInvoice.Cash")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Cash)}}function Ei(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(4);a(),E("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ri(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function ki(o,d){if(o&1){let i=C();c(0,"div",105)(1,"div",106)(2,"ng-select",134,11),I(4,"translate"),g("clear",function(){_(i);let e=r(3);return p(e.TreasuryArr=[])})("focus",function(){_(i);let e=T(3),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(3),n=r(3);return n.ChangeSearchApi("Treasury",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(3),n=r(3);return p(n.ChangeSearchApi("Treasury",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.TreasuryId,"Treasury"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.TreasuryId,e)||(n.Invoice.TreasuryId=e),p(e)}),S(5,Ei,2,2,"ng-template",26)(6,Ri,1,1,"ng-template",27),s()(),c(7,"div",113)(8,"button",114),g("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.Treasury))}),y(9,"i",115),s()()()}if(o&2){let i=r(3);a(2),P("placeholder",h(4,8,"BuyInvoice.Treasury")),m("items",i.TreasuryArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Cash==""||i.Invoice.Cash==0),w("ngModel",i.Invoice.TreasuryId)}}function Ui(o,d){if(o&1){let i=C();c(0,"div",36)(1,"input",135),I(2,"translate"),g("keyup",function(){_(i);let e=r(3);return p(e.ChangeCash())})("change",function(){_(i);let e=r(3);return p(e.ChangeCash())}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.Visa,e)||(n.Invoice.Visa=e),p(e)}),s()()}if(o&2){let i=r(3);a(),P("placeholder",h(2,3,"SaleInvoice.Visa")),m("disabled",i.Invoice.PaymentType==3),w("ngModel",i.Invoice.Visa)}}function Oi(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(4);a(),E("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function ji(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Fi(o,d){if(o&1){let i=C();c(0,"div",105)(1,"div",106)(2,"ng-select",136,12),I(4,"translate"),g("clear",function(){_(i);let e=r(3);return p(e.BankAccountArr=[])})("focus",function(){_(i);let e=T(3),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(3),n=r(3);return n.ChangeSearchApi("BankAccounts",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(3),n=r(3);return p(n.ChangeSearchApi("BankAccounts",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.BankAccountId,"BankAccount"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.BankAccountId,e)||(n.Invoice.BankAccountId=e),p(e)}),S(5,Oi,2,2,"ng-template",26)(6,ji,1,1,"ng-template",27),s()(),c(7,"div",113)(8,"button",114),g("click",function(){_(i);let e=r(3);return p(e.SecoundScreen(e.EnumScreen.BankAccount))}),y(9,"i",115),s()()()}if(o&2){let i=r(3);a(2),P("placeholder",h(4,7,"BuyInvoice.Bank")),m("items",i.BankAccountArr)("dropdownPosition","top")("virtualScroll",!0)("searchable",!0)("disabled",i.Invoice.PaymentType==3||i.Invoice.Visa==""||i.Invoice.Visa==0),w("ngModel",i.Invoice.BankAccountId)}}function Gi(o,d){if(o&1&&(c(0,"small",91),u(1),s()),o&2){let i=r(4);a(),E("Loaded ",i.EmployeeArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Wi(o,d){if(o&1&&u(0),o&2){let i=d.item;D(" ",i.Name," ")}}function Li(o,d){if(o&1){let i=C();c(0,"div",36)(1,"p",137),u(2),I(3,"translate"),s(),c(4,"ng-select",138,13),g("clear",function(){_(i);let e=r(3);return p(e.EmployeeArr=[])})("focus",function(){_(i);let e=T(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(5),n=r(3);return n.ChangeSearchApi("Employee",e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(5),n=r(3);return p(n.ChangeSearchApi("Employee",e))})("close",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("open",function(){_(i);let e=r(3);return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=r(3);return p(e.SelectValue(e.Invoice.EmployeeId,"Employee"))}),N("ngModelChange",function(e){_(i);let n=r(3);return A(n.Invoice.EmployeeId,e)||(n.Invoice.EmployeeId=e),p(e)}),S(6,Gi,2,2,"ng-template",26)(7,Wi,1,1,"ng-template",27),s()()}if(o&2){let i=r(3);a(2),b(h(3,7,"BuyReport.Employee")),a(2),m("items",i.EmployeeArr)("dropdownPosition","top")("autofocus",!1)("virtualScroll",!0)("searchable",!0),w("ngModel",i.Invoice.EmployeeId)}}function Hi(o,d){if(o&1&&(y(0,"input",140),I(1,"translate")),o&2){let i=r(4);P("placeholder",h(1,3,"BuyInvoice.Debt")),P("value",i.Invoice.Debt),m("disabled",!0)}}function $i(o,d){if(o&1&&(c(0,"div",36),S(1,Hi,2,5,"input",139),s()),o&2){let i=r(3);a(),m("ngIf",i.Invoice.Debt!=null)}}function Qi(o,d){if(o&1){let i=C();c(0,"div",127)(1,"div",128)(2,"select",129),g("change",function(){_(i);let e=r(2);return p(e.ChangePamentType(e.Invoice.PaymentType))}),N("ngModelChange",function(e){_(i);let n=r(2);return A(n.Invoice.PaymentType,e)||(n.Invoice.PaymentType=e),p(e)}),c(3,"option",130),u(4),I(5,"translate"),s(),c(6,"option",130),u(7),I(8,"translate"),s(),S(9,Vi,3,4,"option",131),s()(),S(10,Bi,3,5,"div",132)(11,ki,10,10,"div",40)(12,Ui,3,5,"div",132)(13,Fi,10,9,"div",40)(14,Li,8,9,"div",132)(15,$i,2,1,"div",132),s()}if(o&2){let i=r(2);a(2),w("ngModel",i.Invoice.PaymentType),a(),m("value",1),a(),b(h(5,12,"SaleInvoice.Cash")),a(2),m("value",2),a(),b(h(8,14,"SaleInvoice.Debt")),a(2),m("ngIf",i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType!=3),a(),m("ngIf",i.Invoice.PaymentType==3),a(),m("ngIf",i.Invoice.PaymentType==2)}}function zi(o,d){if(o&1&&(c(0,"div")(1,"span",44),u(2),I(3,"translate"),s(),c(4,"span",45),u(5),s()()),o&2){let i=r(2);a(2),b(h(3,2,"SaleInvoice.TotalDiscount")),a(3),D("",i.Invoice.TotalDisc.toFixed(2)," ")}}function Ji(o,d){if(o&1&&(c(0,"div")(1,"span",44),u(2),I(3,"translate"),s(),c(4,"span",45),u(5),s()()),o&2){let i=r(2);a(2),b(h(3,2,"SaleInvoice.DiscountRate")),a(3),D("",i.Invoice.TotalDiscRate.toFixed(2)," ")}}function Ki(o,d){if(o&1&&(c(0,"i",44),u(1),I(2,"translate"),c(3,"i",54),u(4),s()()),o&2){let i=r(2);a(),D("",h(2,2,"SaleInvoice.TotalVat")," "),a(3),D(" ",i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.Vat," % ")}}function qi(o,d){if(o&1&&(c(0,"i",44),u(1),I(2,"translate"),c(3,"i",54),u(4),s()()),o&2){let i=r(2);a(),D(" ",h(2,2,"SaleInvoice.TotalVat")," "),a(3),D(" ",i.Invoice.TotalVatRate.toFixed(2)," % ")}}function Zi(o,d){if(o&1&&(c(0,"div")(1,"span",44),u(2),I(3,"translate"),s(),c(4,"span",45),u(5),s()()),o&2){let i=r(2);a(2),b(h(3,2,"BuyInvoice.ReturnAmount")),a(3),D(" ",i._SharedObjectModelService.ReturnAmount.toFixed(2)," ")}}function Xi(o,d){if(o&1){let i=C();c(0,"button",141),g("click",function(){_(i);let e=r(2);return p(e.Save())}),u(1),I(2,"translate"),c(3,"span",54),u(4,"Ctrl + Space"),s(),y(5,"i",142),s()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Save")," ")}}function Yi(o,d){if(o&1){let i=C();c(0,"button",73),g("click",function(){_(i);let e=r(3);return p(e.Save())}),u(1),I(2,"translate"),c(3,"span",54),u(4,"Ctrl + Space"),s(),y(5,"i",142),s()}if(o&2){let i=r(3);m("disabled",i._AppModeService.DisabledButton),a(),D(" ",h(2,2,"Model.Update")," ")}}function en(o,d){if(o&1&&(c(0,"span"),S(1,Yi,6,4,"button",143),s()),o&2){let i=r(2);a(),m("ngIf",i.Invoice.Id!=0)}}function tn(o,d){if(o&1){let i=C();c(0,"button",144),g("click",function(){_(i);let e=r(2);return p(e.OpenGl())}),u(1),I(2,"translate"),s()}o&2&&(a(),D(" ",h(2,1,"Model.Gl")," "))}function nn(o,d){if(o&1){let i=C();c(0,"button",145),g("click",function(){_(i);let e=r(2);return p(e.HoldInvoice())}),u(1," \u062A\u0639\u0644\u064A\u0642 Hold "),c(2,"span",54),u(3,"Ctrl + X"),s()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function on(o,d){if(o&1){let i=C();c(0,"button",146),g("click",function(){_(i);let e=r(2);return p(e.ShowHoldInvoice())}),u(1," \u0639\u0631\u0636 Hold "),c(2,"span",54),u(3,"Ctrl + Z"),s()()}if(o&2){let i=r(2);m("disabled",i._AppModeService.DisabledButton)}}function rn(o,d){if(o&1){let i=C();y(0,"app-modal-header",17),c(1,"div",18)(2,"div",19)(3,"p-table",20),S(4,ii,21,17,"ng-template",21)(5,pi,49,48,"ng-template",22),s()()(),c(6,"div",23)(7,"div",24)(8,"ng-select",25,5),g("clear",function(){_(i);let e=r();return p(e.ItemsBarCode=[])})("focus",function(){_(i);let e=T(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("keyup",function(){_(i);let e=T(9),n=r();return n.HandleProductCode(e),p(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){_(i);let e=T(9),n=r();return p(n.HandleProductCode(e))})("close",function(){_(i);let e=r();return e._AppModeService.ResetCurrentPage(),p(e.ItemsBarCode=[])})("open",function(){_(i);let e=r();return p(e._AppModeService.ResetCurrentPage())})("change",function(){_(i);let e=T(9),n=r();return n.SelectProductScan(n.ProductBarCodeId),e.handleClearClick(),e.blur(),p(n.ItemsBarCode=[])}),N("ngModelChange",function(e){_(i);let n=r();return A(n.ProductBarCodeId,e)||(n.ProductBarCodeId=e),p(e)}),S(10,di,2,2,"ng-template",26)(11,mi,1,2,"ng-template",27),s()(),c(12,"div",28),S(13,ui,3,5,"div",29)(14,vi,3,4,"div",29),s(),c(15,"div",30),y(16,"input",31),s(),c(17,"div",32)(18,"input",33),I(19,"translate"),N("ngModelChange",function(e){_(i);let n=r();return A(n.Invoice.Notes,e)||(n.Invoice.Notes=e),p(e)}),s()(),S(20,Ii,15,12,"div",34),s(),c(21,"div",35)(22,"div",36),S(23,hi,3,4,"span",37)(24,gi,1,5,"p-calendar",38),s(),S(25,yi,9,10,"div",39)(26,bi,10,9,"div",39)(27,Pi,7,2,"div",40)(28,Mi,13,10,"div",41)(29,Qi,16,16,"div",42),s(),c(30,"div",43)(31,"div")(32,"span",44),u(33),I(34,"translate"),s(),c(35,"span",45),u(36),s()(),c(37,"div")(38,"span",44),u(39),I(40,"translate"),s(),c(41,"span",45),u(42),s()(),S(43,zi,6,4,"div",46)(44,Ji,6,4,"div",46),c(45,"div")(46,"span"),S(47,Ki,5,4,"i",47)(48,qi,5,4,"i",47),s(),c(49,"span",45),u(50),s()(),c(51,"div")(52,"span",44),u(53),I(54,"translate"),s(),c(55,"span",45),u(56),s()(),S(57,Zi,6,4,"div",46),s(),c(58,"div",48),S(59,Xi,6,4,"button",49)(60,en,2,1,"span",46)(61,tn,3,3,"button",50)(62,nn,4,1,"button",51)(63,on,4,1,"button",52),c(64,"button",53),g("click",function(){let e=_(i).$implicit,n=r();return e.close("Close click"),p(n.ResetPage())}),u(65),I(66,"translate"),c(67,"span",54),u(68,"Esc"),s(),y(69,"i",55),s()()}if(o&2){let i=r();m("PageTitle",i.PageTitle),a(3),m("value",i.Invoice.InvoiceDetails)("responsive",!0)("scrollable",!0),a(5),m("dropdownPosition","top")("items",i.ItemsBarCode)("virtualScroll",!0)("searchable",!0),w("ngModel",i.ProductBarCodeId),a(5),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(2),m("value",i.Invoice.DocNo)("disabled",!0),a(2),P("placeholder",h(19,41,"Table.Notes")),w("ngModel",i.Invoice.Notes),a(2),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(3),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"&&i._DefaultSettingsService.DefaultSettings.HideSorage==!1),a(),m("ngIf",i.ScreenName=="BuyOffer"||i.ScreenName=="BuyInvoice"),a(),m("ngIf",i.ScreenName=="SaleOffer"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(4),b(h(34,43,"ProductCount")),a(3),b(i.Invoice.InvoiceDetails.length),a(3),b(h(40,45,"SaleInvoice.TotalInvoice")),a(3),D(" ",i.Invoice.TotalInvoice.toFixed(2)," "),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscount)==!1),a(),m("ngIf",(i._DefaultSettingsService.DefaultSettings==null?null:i._DefaultSettingsService.DefaultSettings.HideColumnDiscountRate)==!1),a(3),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i.Invoice.Id>0),a(2),b(i.Invoice.TotalInvoiceVatAmount.toFixed(2)),a(3),b(h(54,47,"SaleInvoice.TotalAfterVat")),a(3),D("",i.Invoice.TotalInvoiceAfterVat.toFixed(2)," "),a(),m("ngIf",(i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice")&&i.Invoice.Id>0),a(2),m("ngIf",i.Invoice.Id==0),a(),m("ngIf",i._Apiservice.environment.SystemUpdate&&(i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice")||i.ScreenName!="BuyInvoice"&&i.ScreenName!="SaleInvoice"),a(),m("ngIf",i.Invoice.Id>0),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(),m("ngIf",i.ScreenName=="BuyInvoice"||i.ScreenName=="SaleInvoice"),a(2),D(" ",h(66,49,"Model.Close")," ")}}function an(o,d){if(o&1){let i=C();c(0,"app-table",147),g("ShowToEditeEvent",function(){let e=_(i).$implicit,n=r();return p(n.GetSaleHold(e))}),s(),c(1,"div",48)(2,"button",148),g("click",function(){let e=_(i).$implicit;return p(e.close("Close click"))}),u(3),I(4,"translate"),s()()}if(o&2){let i=r();m("PageTitle","SaleInvoice.AllHold")("TablePaging",i.OutTablePaging)("GetById","HoldInvoiceEP/GetById")("DeleteUrl","HoldInvoiceEP/Delete"),a(3),b(h(4,5,"Model.Close"))}}function ln(o,d){if(o&1&&(c(0,"tr")(1,"td")(2,"span",152),u(3),s()(),c(4,"td")(5,"span",152),u(6),s()()()),o&2){let i=d.$implicit;a(3),b(i.Name+" - "+i.UnitFactor),a(3),b(i.Qty)}}function cn(o,d){if(o&1&&(c(0,"div",149)(1,"table",150)(2,"thead")(3,"tr")(4,"th"),u(5),I(6,"translate"),s(),c(7,"th"),u(8),I(9,"translate"),s()()(),c(10,"tbody"),S(11,ln,7,2,"tr",151),s()()()),o&2){let i=r();a(5),b(h(6,3,"SaleInvoice.Name")),a(3),b(h(9,5,"Table.Balance")),a(3),m("ngForOf",i.ItemBalanceList)}}function sn(o,d){if(o&1){let i=C();c(0,"app-dynamic-modal",153),g("CloseParentModel",function(){let e=_(i).$implicit,n=r();return e.close("model close"),p(n.ResetSharedScreen())}),s()}if(o&2){let i=r();m("PageTitle",i.SharedScreen.PageTitle)("DataView",i.SharedScreen.DataView)("AddUrl",i.SharedScreen.AddUrl)("UpdateUrl",i.SharedScreen.UpdateUrl)("DeleteUrl",i.SharedScreen.DeleteUrl)("NotInsertTablePaging",!0)("GetById",i.SharedScreen.GetById)}}var io=(()=>{let d=class d{constructor(t,e,n,l,v,x,f){this._SharedScreenService=t,this._ScaleSettingsService=e,this._ActivatedRoute=n,this._SharedObjectModelService=l,this._DefaultSettingsService=v,this._AppModeService=x,this._Apiservice=f,this.SignalR=!1,this.GlResponse=!1,this.TablePaging={},this.OutTablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.SupplierArr=[],this.ClientArr=[],this.TreasuryArr=[],this.BankAccountArr=[],this.EmployeeArr=[],this.StoreArr=[],this.ItemBalanceList=[],this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this.ItemsBarCode=[],this.ProductBarCodeId=null,this.Weight="",this.SharedScreen={AddUrl:"",DataView:[],DeleteUrl:"",PageTitle:"",TablePaging:{},UpdateUrl:"",GetById:""},this.EnumScreen={None:0,Client:1,Supplier:2,Treasury:3,BankAccount:4,Storage:5}}ngOnChanges(){let t=Number(this._ActivatedRoute.snapshot.queryParams.Id);t>0&&this.GetByIdRoute(t)}ngOnInit(){this.SignalR&&(this.StartConnection(),this.Hub_Connection?.state=="Connecting"&&this.ServerListener())}StartConnection(){this.Hub_Connection=new it().withUrl(`${Se.signalrUrl}/${this.ScreenName}`,{skipNegotiation:!0,transport:tt.WebSockets,accessTokenFactory:()=>this._Apiservice.getToken()}).configureLogging(et.Error).build(),this.Hub_Connection.start().then(()=>{console.log("Hub Connection Success")}).catch(t=>{console.log(t)})}ServerListener(){this.Hub_Connection?.on(`Update${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.UpdateModelAnother"),t.User),this._AppModeService._NgbModal.dismissAll())}),this.Hub_Connection?.on(`Delete${this.ScreenName}`,t=>{let e=this._Apiservice.UserIdFromCookies();Number(e.BranchId)==t.BranchId&&t.UserId!=e.Id&&t.Id==this.Invoice.Id&&(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.DeleteModelAnother"),t.User),this._SharedObjectModelService.Paging.DataReturn=this._SharedObjectModelService.Paging.DataReturn.filter(n=>n.Id!=t.Id),this._AppModeService._NgbModal.dismissAll())})}GetPageInfo(){this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:t=>{t.IsSuccess==!0&&t.Obj!=null?(this.Invoice.DocNo=t.Obj,this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(t.Message))},error:t=>{this._AppModeService.DisabledButton=!1}})}OpenModal(){this._AppModeService.DisabledButton=!0,this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ChangeSearchApi(t,e){let n="";n=`${e.searchTerm}`.trim(),(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let l={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Storages"&&(l.BranchFilter=!0),t=="Treasury"&&(l.BranchFilter=!0),t=="Items"&&(l.Columns=["Id","Name","Code"],l.SearchField="Code"),this._Apiservice.post("Global/GetAll",l,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?this.HandleResponse(v.Obj,t):this._AppModeService._Toastr.error(v.Message)}})}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Suppliers"&&(this.SupplierArr=this._SharedObjectModelService.RemoveDuplicates(this.SupplierArr.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ClientArr=this._SharedObjectModelService.RemoveDuplicates(this.ClientArr.concat(t.DataReturn),"Id")),e=="Storages"&&(this.StoreArr=this._SharedObjectModelService.RemoveDuplicates(this.StoreArr.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id")),e=="Employee"&&(this.EmployeeArr=this._SharedObjectModelService.RemoveDuplicates(this.EmployeeArr.concat(t.DataReturn),"Id")),e=="Items"&&(this.ItemsBarCode=this._SharedObjectModelService.RemoveDuplicates(this.ItemsBarCode.concat(t.DataReturn),"Id").map(n=>k(R({},n),{NameAndCode:n.Code!=null?`${n.Name} - ${n.Code}`:`${n.Name}`})))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Supplier"&&(n=this.SupplierArr),e=="Client"&&(n=this.ClientArr),e=="Store"&&(n=this.StoreArr),e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr),e=="Employee"&&(n=this.EmployeeArr);let l=n.find(v=>v.Id==t);if(l==null){this._AppModeService.DontPlay();return}else this.Invoice[`${e}Id`]=t,this.Invoice[`${e}Name`]=l.Name,e=="Supplier"&&this.GetNetSupplier(t),e=="Client"&&this.GetNetClient(t)}else this.Invoice[`${e}Id`]=null,this.Invoice[`${e}Name`]="",(e=="Supplier"||e=="Client")&&(this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0})}HandleProductCode(t){let e="";if(e=`${t.searchTerm}`.trim(),e=="null"&&(t.searchTerm="",e="",t.searchTerm=e),e!=""){for(let n=0;n<this._ScaleSettingsService.ScaleSettingsArr.length;n++){let l=this._ScaleSettingsService.ScaleSettingsArr[n];if(e.length==l.BarCodeLength&&e.startsWith(l.ZaraNumber)){let v=e.substring(l.ZaraNumber.length,l.BarCodeLength).substring(0,l.ProductCodeLength);this.Weight=e.substring(l.ZaraNumber.length).substring(l.ProductCodeLength);let x=Number(this.Weight.substring(0,2)),f=Number(this.Weight.substring(2,this.Weight.length));this.Weight=`${x}.${f}`,t.searchTerm=v,this.ChangeSearchApi("Items",t);break}}return}else this.ChangeSearchApi("Items",t)}SelectProductScan(t){if(t!=null&&t>0){let e=this.ItemsBarCode.find(v=>v.Id==t),n=this.Invoice.InvoiceDetails.findIndex(v=>v.ProductId===null),l=this.Invoice.InvoiceDetails[n];if(l!=null)l.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],l.ProductId=t,this.AfterSelectem(t,n);else{this.AppendRow();let v=this.Invoice.InvoiceDetails.findIndex(f=>f.ProductId===null),x=this.Invoice.InvoiceDetails[v];x.Items=[{Id:e.Id,Name:e.Name,NameAndCode:e.Name+" - "+e.Code}],x.ProductId=t,this.AfterSelectem(t,v)}this.ItemsBarCode=[],this.ProductBarCodeId=null}this._AppModeService._Toastr.ScannerSound()}ChangeSearchApiDetails(t,e,n){let l=`${e.searchTerm}`.trim();(l==""||l=="null")&&(e.searchTerm="",l="");let v="";this.ScreenName=="BuyInvoice"&&t=="Items"&&(v="ProductType != 2"),this.ScreenName=="SaleInvoice"&&this._DefaultSettingsService.DefaultSettings.HideSorage==!0&&t=="Items"&&(v="ProductType = 2"),this._AppModeService.CurrentPage+=1;let x={TableName:t,Columns:["Id","Name"],Conditions:v,PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:l,SearchField:"Name"};if(t=="Items"&&(x.Columns=["Id","Name","Code"],x.ItemWithItemUnit=!0),t=="ItemUnits"){let f=this.Invoice.InvoiceDetails[n].ProductId==null?0:this.Invoice.InvoiceDetails[n].ProductId;x.Conditions=`ItemId = ${f}`,x.Join=!0,x.JoinTables=["Units U"],x.NoPaging=!0,x.JoinConditions=["T.UnitId = U.Id"],x.Columns=["T.Id","U.Name","T.UnitFactor"],x.SearchField="U.Name"}this._Apiservice.post("Global/GetAll",x,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:f=>{f.IsSuccess==!0&&f.Obj!=null?this.HandleResponseDetails(f.Obj,t,n):this._AppModeService._Toastr.error(f.Message)}})}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Items"&&(this.Invoice.InvoiceDetails[n].Items=this._SharedObjectModelService.RemoveDuplicates(this.Invoice.InvoiceDetails[n].Items.concat(t.DataReturn),"Id"),this.Invoice.InvoiceDetails[n].Items=this.Invoice.InvoiceDetails[n].Items.map(l=>k(R({},l),{NameAndCode:l.Code!=null?`${l.Name} - ${l.Code}`:`${l.Name}`}))),e=="ItemUnits"&&(this.Invoice.InvoiceDetails[n].ProductUnits=t.DataReturn.map(l=>k(R({},l),{NameAndUnitFactor:l.UnitFactor!=null?`${l.Name} - ${l.UnitFactor}`:`${l.Name}`})))}AppendRow(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};this.Invoice.InvoiceDetails.push(t),this._AppModeService.AppendTd()}RemoveRow(t){return this.Invoice.InvoiceDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorFirstRow")),!1):(this.Invoice.InvoiceDetails.splice(t,1),this.CalcInvoice(),!0)}SelectItem(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].Items.find(l=>l.Id==t);if(n!=null)this.Invoice.InvoiceDetails[e].ProductId=n.Id,this.Invoice.InvoiceDetails[e].ProductName=n.Name,this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.AfterSelectem(n.Id,e);else{this._Apiservice.DontPlay();return}}else this.Invoice.InvoiceDetails[e].ProductUnitId=null,this.Invoice.InvoiceDetails[e].ProductUnits=[],this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}AfterSelectem(t,e){if(t>0){let n={TableName:"ItemUnits",Columns:["Id","Name"],NoPaging:!0,SearchText:"",SearchField:"Name"};n.Conditions=`ItemId = ${t}`,n.Join=!0,n.JoinTables=["Units U"],n.JoinConditions=["T.UnitId = U.Id"],n.Columns=["T.Id","U.Name","T.UnitFactor","T.DefaultUnit"],n.SearchField="U.Name",this._Apiservice.post("Global/GetAll",n,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{if(l.IsSuccess==!0&&l.Obj!=null){l.Obj.DataReturn=l.Obj.DataReturn.map(f=>k(R({},f),{NameAndUnitFactor:f.UnitFactor!=null?`${f.Name} - ${f.UnitFactor}`:`${f.Name}`}));let v=l.Obj.DataReturn,x=v.find(f=>f.DefaultUnit==!0);if(x&&this.Invoice.InvoiceDetails.find(M=>M.ProductId==t&&M.ProductUnitId==x.Id)==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:x.Id,NameAndUnitFactor:x.Name+" - "+x.UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=x.Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(x.Id,e):this.ChangeGlobalDis("");return}for(let f=0;f<v.length;f++){let M=this.Invoice.InvoiceDetails.find(F=>F.ProductId==t&&F.ProductUnitId==v[f].Id);if(M==null){this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:v[f].Id,NameAndUnitFactor:v[f].Name+" - "+v[f].UnitFactor}],this.Invoice.InvoiceDetails[e].ProductUnitId=v[f].Id,this.Invoice.InvoiceDetails[e].Quantity=this.Weight!=""?this.Weight:1,Number(this.GlobalDiscount)>0&&(this.Invoice.InvoiceDetails[e].Discount=Number(this.GlobalDiscount)),Number(this.GlobalDiscountRate)>0&&(this.Invoice.InvoiceDetails[e].DiscountRate=Number(this.GlobalDiscountRate)),this.Weight="",this.ScreenName=="SaleInvoice"?this.SelectUnit(v[f].Id,e):this.ChangeGlobalDis("");break}M!=null&&f==v.length-1&&this.Invoice.InvoiceDetails.splice(e,1)}this.CalcInvoice()}else this._AppModeService._Toastr.error(l.Message)}})}}SelectUnit(t,e){if(t!=null&&t>0){let n=this.Invoice.InvoiceDetails[e].ProductUnits.find(l=>l.Id==t);if(n!=null){if(this.Invoice.InvoiceDetails[e].ProductUnitId=n.Id,this.Invoice.InvoiceDetails[e].ProductUnitName=n.Name,this.ScreenName=="SaleInvoice"){this._AppModeService.DisabledButton=!0;let l={ProductId:this.Invoice.InvoiceDetails[e].ProductId,ProductUnitId:n.Id};this._Apiservice.post("ProductPricingEP/ProductPice",l,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:v=>{v.IsSuccess==!0&&v.Obj!=null?(this.Invoice.InvoiceDetails[e].Price=v.Obj,this.ChangeGlobalDis(""),this._AppModeService.DisabledButton=!1):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(v.Message))},error:v=>{this._AppModeService.DisabledButton=!1},complete:()=>{this._AppModeService.DisabledButton=!1}})}}else{this._Apiservice.DontPlay();return}}else this.ScreenName=="SaleInvoice"&&(this.Invoice.InvoiceDetails[e].Price="")}ProductBalance(t,e){this._AppModeService.DisabledButton=!0;let n={ProductId:this.Invoice.InvoiceDetails[t].ProductId==null?0:this.Invoice.InvoiceDetails[t].ProductId,StoreId:this.Invoice.StoreId==null?0:this.Invoice.StoreId};this._Apiservice.post("ItemEP/ProductBalance",n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this._AppModeService.DisabledButton=!1,this.ItemBalanceList=l.Obj.StorageBalance,this._AppModeService._NgbModal.open(e,{size:"xl",centered:!0})):(this._AppModeService.DisabledButton=!1,this._AppModeService._Toastr.error(l.Message))},error:l=>{this._AppModeService.DisabledButton=!1}})}ChangeClientType(t){this.Invoice.ClientId=null,this.Invoice.ClientName=" ",t==1&&(this.Invoice.ClientType=1,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),t==2&&(this.Invoice.ClientType=2),this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0}}Discount(t,e){let n=this.Invoice.InvoiceDetails[e];t=="DiscountRate"&&Number(n.DiscountRate)>0&&(n.Discount=""),t=="Discount"&&Number(n.Discount)>0&&(n.DiscountRate=""),(Number(n.DiscountRate)>100||Number(n.DiscountRate)<0)&&(n.DiscountRate=""),Number(n.Discount)<0&&(n.Discount=""),Number(n.Price)<0&&(n.Price=""),Number(n.Quantity)<0&&(n.Quantity=""),this.CalcInvoice()}ChangeGlobalDis(t){let e="",n="";if(t=="GlobalDiscountRate"&&(n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),this.GlobalDiscount="",e=""),t=="GlobalDiscount"&&(e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate="",n=""),t==""){n=isNaN(Number(this.GlobalDiscountRate))==!0||Number(this.GlobalDiscountRate)==0?"":Number(this.GlobalDiscountRate),e=isNaN(Number(this.GlobalDiscount))==!0||Number(this.GlobalDiscount)==0?"":Number(this.GlobalDiscount),this.GlobalDiscountRate=n,this.GlobalDiscount=e,Number(e)==0&&Number(n)==0&&this.CalcInvoice();return}for(let l=0;l<this.Invoice.InvoiceDetails.length;l++)Number(this.Invoice.InvoiceDetails[l].ProductId)>0&&(this.Invoice.InvoiceDetails[l].Discount=e,this.Invoice.InvoiceDetails[l].DiscountRate=n);this.CalcInvoice()}Button(t,e,n){e=="+"&&this.Invoice.InvoiceDetails[n][`${t}`]++,e=="-"&&(this.Invoice.InvoiceDetails[n][`${t}`]=this.Invoice.InvoiceDetails[n][`${t}`]<=0?0:this.Invoice.InvoiceDetails[n][`${t}`]-1),this.CalcInvoice()}GetNetSupplier(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("SupplierEP/SupplierNetAmount",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{this._AppModeService.DisabledButton=!1,e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)},error:e=>{this._AppModeService.DisabledButton=!1}})}GetNetClient(t){this._DefaultSettingsService.DefaultSettings.HidePersonBalanceBranch==!1&&this._Apiservice.getById("ClientEP/ClientNetAmount",t,!1).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{this._AppModeService.DisabledButton=!1,e.IsSuccess==!0&&e.Obj!=null?this.NetAccountPerson={NetThamBranch:e.Obj.NetThamBranch,NetOtherBranch:e.Obj.NetOtherBranch}:this._AppModeService._Toastr.error(e.Message)},error:e=>{this._AppModeService.DisabledButton=!1}})}GetByIdRoute(t){this._Apiservice.getById(this.GetById,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._SharedObjectModelService.PageModel=e.Obj.model,this._SharedObjectModelService.Gl=e.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(e.Message)}})}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){this.Invoice={Id:t.Id,PaymentType:t.PaymentType,Name:t.Name,Notes:t.Notes,Code:t.Code,InvoiceCollection:t.InvoiceCollection,InvoiceCollected:t.InvoiceCollected,ClientType:t.ClientType,DocNo:t.DocNo,DocDate:new Date(t.DocDate),TotalInvoice:t.TotalInvoice,TotalDiscRate:t.TotalDiscRate,TotalDisc:t.TotalDisc,TotalInvoiceAfterDisc:t.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:t.TotalInvoiceAfterVat,TotalInvoiceVatAmount:t.TotalInvoiceVatAmount,TotalVatRate:t.TotalVatRate,Cash:t.Cash,Visa:t.Visa,Debt:t.Debt,SupplierId:t.SupplierId,SupplierName:t.SupplierName,ClientId:t.ClientId,ClientName:t.ClientName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,EmployeeId:t.EmployeeId,EmployeeName:t.EmployeeName,StoreId:t.StoreId,StoreName:t.StoreName,InvoiceDetails:t[`${this.ScreenName}Details`]},t.SupplierId>0&&(this.SupplierArr=[{Id:t.SupplierId,Name:t.SupplierName}]),t.ClientId>0&&(this.ClientArr=[{Id:t.ClientId,Name:t.ClientName}]),t.TreasuryId>0&&(this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName}]),t.BankAccountId>0&&(this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]),t.EmployeeId>0&&(this.EmployeeArr=[{Id:t.EmployeeId,Name:t.EmployeeName}]),t.StoreId>0&&(this.StoreArr=[{Id:t.StoreId,Name:t.StoreName}]);for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=this.Invoice.InvoiceDetails[e];n.Discount=n.Discount==0?"":n.Discount,n.DiscountRate=n.DiscountRate==0?"":n.DiscountRate,this.Invoice.InvoiceDetails[e].Items=[{Id:n.ProductId,Name:n.ProductName,NameAndCode:n.ProductName}],this.Invoice.InvoiceDetails[e].ProductUnits=[{Id:n.ProductUnitId,Name:n.ProductUnitName,NameAndUnitFactor:n.ProductUnitName}]}this._AppModeService.DisabledButton=!1}TotalInvoiceVatAmount(){let t=0;for(let e=0;e<this.Invoice.InvoiceDetails.length;e++){let n=Number(this.Invoice.InvoiceDetails[e].Price),l=Number(this.Invoice.InvoiceDetails[e].Quantity),v=n*l,x=Number(this.Invoice.InvoiceDetails[e].Vat),f=Number(this.Invoice.InvoiceDetails[e].Discount),M=Number(this.Invoice.InvoiceDetails[e].DiscountRate);if(f>0&&(t+=(v-f)*(x/100)),M>0){let F=M/100*v;t+=(v-F)*(x/100)}f==0&&M==0&&(t+=v*(x/100))}return Number(t)}CalcInvoice(){this.Invoice.TotalDiscRate=0,this.Invoice.TotalInvoiceAfterDisc=0,this.Invoice.TotalInvoiceAfterVat=0,this.Invoice.TotalVatRate=0,this.Invoice.TotalDisc=0,this.Invoice.TotalInvoice=0,this.Invoice.TotalInvoiceVatAmount=0;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=Number(this.Invoice.InvoiceDetails[t].Price),n=Number(this.Invoice.InvoiceDetails[t].Quantity),l=Number(this.Invoice.InvoiceDetails[t].Discount),v=Number(this.Invoice.InvoiceDetails[t].DiscountRate),x=Number(this.Invoice.InvoiceDetails[t].Vat),f=e*n;this.Invoice.InvoiceDetails[t].TotalPrice=Number(f),this.Invoice.TotalInvoice+=Number(f),this.Invoice.InvoiceDetails[t].Discount=l==0?"":l;let M=0;v>0&&(M=v/100*f),l>0&&(M=l),this.Invoice.TotalDisc+=M,this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount=f-M,this.Invoice.InvoiceDetails[t].TotalPriceAfterVat=Number((e*n-M)*(x/100)+(e*n-M))}this.Invoice.TotalDiscRate=this.Invoice.TotalInvoice==0?0:Number(this.Invoice.TotalDisc/this.Invoice.TotalInvoice*100),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoice-this.Invoice.TotalDisc),this.Invoice.TotalInvoiceVatAmount=this.TotalInvoiceVatAmount(),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterDisc+this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=this.Invoice.TotalInvoiceAfterDisc==0?0:Number(this.Invoice.TotalInvoiceVatAmount/this.Invoice.TotalInvoiceAfterDisc*100),this.Invoice.TotalDiscRate=Number(this.Invoice.TotalDiscRate),this.Invoice.TotalInvoiceAfterDisc=Number(this.Invoice.TotalInvoiceAfterDisc),this.Invoice.TotalInvoiceVatAmount=Number(this.Invoice.TotalInvoiceVatAmount),this.Invoice.TotalVatRate=Number(this.Invoice.TotalVatRate),this.Invoice.TotalInvoice=Number(this.Invoice.TotalInvoice),this.Invoice.TotalDisc=Number(this.Invoice.TotalDisc),this.Invoice.TotalInvoiceAfterVat=Number(this.Invoice.TotalInvoiceAfterVat),this.ChangeCash()}Validate(){if((this.ScreenName=="BuyOffer"||this.ScreenName=="BuyInvoice")&&(this.Invoice.SupplierId==0||this.Invoice.SupplierId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterSupplier")),!1;if(this.ScreenName=="BuyInvoice"&&(this.Invoice.StoreId==0||this.Invoice.StoreId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterStore")),!1;if(this.ScreenName=="SaleOffer"&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient")),!1;if(this.Invoice.DocDate==""||this.Invoice.DocDate==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterDate")),!1;for(let t=0;t<this.Invoice.InvoiceDetails.length;t++){let e=t,n=Number(this.Invoice.InvoiceDetails[t].ProductId),l=Number(this.Invoice.InvoiceDetails[t].Price),v=Number(this.Invoice.InvoiceDetails[t].Quantity),x=Number(this.Invoice.InvoiceDetails[t].Discount),f=Number(this.Invoice.InvoiceDetails[t].DiscountRate),M=Number(this.Invoice.InvoiceDetails[t].Vat),F=Number(this.Invoice.InvoiceDetails[t].ProductUnitId),st=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterDiscount),_t=Number(this.Invoice.InvoiceDetails[t].TotalPriceAfterVat);if(isNaN(n)||n<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterProduct")+" "+(e+1)),!1;if(F<=0||isNaN(F))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterUnit")+" "+(e+1)),!1;if(this.Invoice.InvoiceDetails.filter(pe=>pe.ProductId==n&&pe.ProductUnitId==F).length>=2)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(e+1)),!1;if(isNaN(l)||l<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterPrice")+" "+(e+1)),!1;if(isNaN(v)||v<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.EnterQuantity")+" "+(e+1)),!1;if(isNaN(x)||x<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorDiscount")+" "+(e+1)),!1;if(isNaN(f)||f<0||f>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.ErrorDiscountRate")+" "+(e+1)),!1;if(isNaN(M)||M<0||M>100)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorVat")+" "+(e+1)),!1;if(_t<0||st<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorNetRow")+" "+(e+1)),!1}if(this.Invoice.TotalInvoice<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.TotalInvoiceAfterVat<0||this.Invoice.TotalInvoiceAfterVat<0&&this.Invoice.TotalInvoiceAfterDisc<0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("BuyInvoice.Error.ErrorTotal")),!1;if(this.ScreenName=="SaleInvoice"||this.ScreenName=="BuyInvoice"){if(Number(this.Invoice.Visa)<0||isNaN(Number(this.Invoice.Visa)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Cash)<0||isNaN(Number(this.Invoice.Cash)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(Number(this.Invoice.Debt)<0||isNaN(Number(this.Invoice.Debt)))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(Number(this.Invoice.Visa)>0&&(this.Invoice.BankAccountId<=0||this.Invoice.BankAccountId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterBank")),!1;if(Number(this.Invoice.Cash)>0&&(this.Invoice.TreasuryId<=0||this.Invoice.TreasuryId==null))return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.EnterTreasury")),!1;if(this.Invoice.PaymentType==1&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorCash")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Cash)+Number(this.Invoice.Visa)+Number(this.Invoice.Debt)!=this.Invoice.TotalInvoiceAfterVat)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==2&&Number(this.Invoice.Debt)<=0)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("ReturnBuyInvoice.Error.ErrorDebt")),!1;if(this.Invoice.PaymentType==3&&this.Invoice.EmployeeId==null)return this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SalesReport.ChooseEmployee")),!1}return!0}ChangePamentType(t){this.Invoice.BankAccountId=null,this.Invoice.BankAccountName="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.EmployeeId=null,this.Invoice.EmployeeName="",t==1&&(this.Invoice.PaymentType=1,this.Invoice.Visa="",this.Invoice.Debt="",this.Invoice.Cash=this.Invoice.TotalInvoiceAfterVat),t==2&&(this.Invoice.PaymentType=2,this.Invoice.Cash="",this.Invoice.Visa="",this.Invoice.Debt=this.Invoice.TotalInvoiceAfterVat),t==3&&(this.Invoice.Visa="",this.Invoice.Cash="",this.Invoice.Debt="",this.Invoice.TreasuryId=null,this.Invoice.TreasuryName="",this.Invoice.BankAccountId=null,this.Invoice.BankAccountName=""),this.ChangeCash()}ChangeCash(){this.Invoice.PaymentType==2&&(this.Invoice.Debt=Number(this.Invoice.TotalInvoiceAfterVat-(Number(this.Invoice.Cash)+Number(this.Invoice.Visa)))),this.Invoice.PaymentType==1&&(this.Invoice.Cash=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Visa)),this.Invoice.Visa=Number(this.Invoice.TotalInvoiceAfterVat-Number(this.Invoice.Cash))),this.Invoice.TreasuryId=Number(this.Invoice.Cash)==0?null:this.Invoice.TreasuryId,this.Invoice.BankAccountId=Number(this.Invoice.Visa)==0?null:this.Invoice.BankAccountId,this.Invoice.TreasuryName=Number(this.Invoice.Cash)==0?"":this.Invoice.TreasuryName,this.Invoice.BankAccountName=Number(this.Invoice.Visa)==0?"":this.Invoice.BankAccountName,this.Invoice.Cash=Number(this.Invoice.Cash)==0?"":this.Invoice.Cash,this.Invoice.Visa=Number(this.Invoice.Visa)==0?"":this.Invoice.Visa,this.Invoice.Debt=Number(this.Invoice.Debt)==0?"":this.Invoice.Debt,this.DefaultBankTreasury()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.PaymentType=t.SaleInvoicePaymentType>0?t.SaleInvoicePaymentType:1,t.SaleInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.SaleInvoiceStoreId,this.StoreArr.push({Id:t.SaleInvoiceStoreId,Name:t.SaleInvoiceStoreName})),t.SaleInvoiceClientType>0&&(this.Invoice.ClientType=t.SaleInvoiceClientType,this.Invoice.ClientName="\u0627\u0644\u0639\u0645\u064A\u0644 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A")),this.ScreenName=="BuyInvoice"&&(this.Invoice.PaymentType=t.BuyInvoicePaymentType>0?t.BuyInvoicePaymentType:1,t.BuyInvoiceStoreId>0&&(this.StoreArr=[],this.Invoice.StoreId=t.BuyInvoiceStoreId,this.StoreArr.push({Id:t.BuyInvoiceStoreId,Name:t.BuyInvoiceStoreName})))}DefaultBankTreasury(){let t=this._DefaultSettingsService.DefaultSettings;this.ScreenName=="SaleInvoice"&&(this.Invoice.Cash>0&&t.SaleInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.SaleInvoiceTreasuryId,this.TreasuryArr.push({Id:t.SaleInvoiceTreasuryId,Name:t.SaleInvoiceTreasuryName})),this.Invoice.Visa>0&&t.SaleInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.SaleInvoiceBankAccountId,this.BankAccountArr.push({Id:t.SaleInvoiceBankAccountId,Name:t.SaleInvoiceBankAccountName}))),this.ScreenName=="BuyInvoice"&&(this.Invoice.Cash>0&&t.BuyInvoiceTreasuryId>0&&this.Invoice.Id==0&&(this.TreasuryArr=[],this.Invoice.TreasuryId=t.BuyInvoiceTreasuryId,this.TreasuryArr.push({Id:t.BuyInvoiceTreasuryId,Name:t.BuyInvoiceTreasuryName})),this.Invoice.Visa>0&&t.BuyInvoiceBankAccountId>0&&this.Invoice.Id==0&&(this.BankAccountArr=[],this.Invoice.BankAccountId=t.BuyInvoiceBankAccountId,this.BankAccountArr.push({Id:t.BuyInvoiceBankAccountId,Name:t.BuyInvoiceBankAccountName})))}Save(){if(this.CalcInvoice(),this.Validate()==!1)return;this.Invoice.Cash=this.Invoice.Cash==""?0:this.Invoice.Cash,this.Invoice.Visa=this.Invoice.Visa==""?0:this.Invoice.Visa,this.Invoice.Debt=this.Invoice.Debt==""?0:this.Invoice.Debt,this.Invoice[`${this.ScreenName}Details`]=this.Invoice.InvoiceDetails.map(e=>k(R({},e),{Discount:e.Discount==""?0:e.Discount,DiscountRate:e.DiscountRate==""?0:e.DiscountRate}));let t={Id:this.Invoice.Id,PaymentType:Number(this.Invoice.PaymentType),Name:this.Invoice.Name,Notes:this.Invoice.Notes,Code:this.Invoice.Code,InvoiceCollection:this.Invoice.InvoiceCollection,InvoiceCollected:this.Invoice.InvoiceCollected,ClientType:this.Invoice.ClientType,DocNo:this.Invoice.DocNo,DocDate:this._Apiservice.ConvertISODate(this.Invoice.DocDate),TotalInvoice:this.Invoice.TotalInvoice,TotalDiscRate:this.Invoice.TotalDiscRate,TotalDisc:this.Invoice.TotalDisc,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate,Cash:Number(this.Invoice.Cash),Visa:Number(this.Invoice.Visa),Debt:Number(this.Invoice.Debt),TreasuryId:this.Invoice.TreasuryId,TreasuryName:this.Invoice.TreasuryName,BankAccountId:this.Invoice.BankAccountId,BankAccountName:this.Invoice.BankAccountName,EmployeeId:this.Invoice.EmployeeId,EmployeeName:this.Invoice.EmployeeName,StoreId:this.Invoice.StoreId,StoreName:this.Invoice.StoreName,ClientId:this.Invoice.ClientId==null?0:this.Invoice.ClientId,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName};t[`${this.ScreenName}Details`]=this.Invoice[`${this.ScreenName}Details`],t.Id==0&&this._Apiservice.post(this.AddUrl,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this._AppModeService._Toastr.success(e.Message),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(e.Obj)):this._AppModeService._Toastr.error(e.Message)}}),t.Id>0&&this._Apiservice.put(this.UpdateUrl,t,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:e=>{if(e.IsSuccess==!0&&e.Obj!=null){this._AppModeService._Toastr.success(e.Message);let n=e.Obj,l=this._SharedObjectModelService.Paging.DataReturn.find(v=>v.Id==n.Id);l!=null&&Object.assign(l,n),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(e.Message)}})}HoldInvoice(){let t=this.Invoice.InvoiceDetails.filter(l=>l.ProductId>0).map(l=>k(R({},l),{Discount:l.Discount==""?0:l.Discount,DiscountRate:l.DiscountRate==""?0:l.DiscountRate,Price:l.Price==""?0:l.Price}));if(t.length==0)return;if(this.ScreenName=="SaleInvoice"&&this.Invoice.ClientType==2&&(this.Invoice.ClientId==0||this.Invoice.ClientId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterClient"));return}let e=0;this.ScreenName=="SaleInvoice"&&(e=1),this.ScreenName=="BuyInvoice"&&(e=2);let n={ClientId:this.Invoice.ClientId,ClientType:this.Invoice.ClientType,ClientName:this.Invoice.ClientName,SupplierId:this.Invoice.SupplierId,SupplierName:this.Invoice.SupplierName,HoldType:e,HoldInvoiceDetails:t,Id:0,TotalInvoice:this.Invoice.TotalInvoice,TotalDisc:this.Invoice.TotalDisc,TotalDiscRate:this.Invoice.TotalDiscRate,TotalInvoiceAfterDisc:this.Invoice.TotalInvoiceAfterDisc,TotalInvoiceAfterVat:this.Invoice.TotalInvoiceAfterVat,TotalInvoiceVatAmount:this.Invoice.TotalInvoiceVatAmount,TotalVatRate:this.Invoice.TotalVatRate};this._Apiservice.post("HoldInvoiceEP/Add",n,!0).pipe(V(this._Apiservice.destroy$)).subscribe({next:l=>{l.IsSuccess==!0&&l.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo()):this._AppModeService._Toastr.error(l.Message)}})}ShowHoldInvoice(){let t="",e=[],n=[],l="Name",v={};this.ScreenName=="SaleInvoice"&&(t="HoldType = 1",e=["Clients Client"],n=["T.ClientId = Client.Id"],l="Client.Name AS ClientName",v={SortName:"ClientName",CellName:"SaleInvoice.Client",ExistSearchField:"Client.Name"}),this.ScreenName=="BuyInvoice"&&(t="HoldType = 2",e=["Suppliers Supplier"],n=["T.SupplierId = Supplier.Id"],l="Supplier.Name AS SupplierName",v={SortName:"SupplierName",CellName:"BuyInvoice.Supplier",ExistSearchField:"Supplier.Name"}),this.OutTablePaging={InputType:"Table",Type:"TablePaging",GlobalData:{BranchFilter:!0,Url:"Global/GetAll",TableName:"HoldInvoice",Conditions:t,Join:!0,JoinTables:e,JoinConditions:n,Columns:["T.Id",l,"T.TotalInvoice","T.TotalDisc","T.TotalInvoiceVatAmount","T.TotalInvoiceAfterVat","T.Notes"]},Required:!1,TableCell:[v,{SortName:"TotalInvoice",CellName:"Table.Total"},{SortName:"TotalDisc",CellName:"Table.Discount"},{SortName:"TotalInvoiceVatAmount",CellName:"Table.Vat"},{SortName:"TotalInvoiceAfterVat",CellName:"Table.NetTotal"},{SortName:"Notes",CellName:"Table.Notes"}]},this._AppModeService._NgbModal.open(this.AllHoldModel,{size:"xl"})}GetSaleHold(t){let e=this._SharedObjectModelService.SecoundPageModel;this.Invoice.ClientId=e.ClientId,this.Invoice.ClientName=e.ClientName,this.Invoice.SupplierId=e.SupplierId,this.Invoice.SupplierName=e.SupplierName,e.SupplierId>0&&(this.SupplierArr=[{Id:e.SupplierId,Name:e.SupplierName}]),e.ClientId>0&&(this.ClientArr=[{Id:e.ClientId,Name:e.ClientName}]),this.Invoice.InvoiceDetails=[];for(let n=0;n<e.HoldInvoiceDetails.length;n++){let l=e.HoldInvoiceDetails[n];l.Items=[{Id:l.ProductId,Name:l.ProductName,NameAndCode:l.ProductName}],l.ProductUnits=[{Id:l.ProductUnitId,Name:l.ProductUnitName,NameAndUnitFactor:l.ProductUnitName}],this.Invoice.InvoiceDetails.push(l)}t.close("Close click"),this.CalcInvoice(),this.ChangeCash()}ResetPage(){this.Invoice={InvoiceCollected:!1,ClientType:2,DocNo:0,DocDate:"",InvoiceDetails:[{Code:"",Name:"",ProductType:0,Items:[],ProductUnits:[],Balance:0,ProductId:null,ProductUnitId:null,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Id:0,Notes:"",ProductName:"",UnitName:""}],TotalInvoice:0,TotalDiscRate:0,TotalDisc:0,TotalInvoiceAfterDisc:0,TotalInvoiceAfterVat:0,TotalInvoiceVatAmount:0,TotalVatRate:0,Cash:"",Visa:"",Debt:"",TreasuryId:null,TreasuryName:"",BankAccountId:null,BankAccountName:"",EmployeeId:null,EmployeeName:"",StoreId:null,StoreName:"",ClientId:null,ClientName:"",SupplierId:null,SupplierName:"",Id:0,PaymentType:1,Name:"",Notes:"",Code:"",InvoiceCollection:0},this.NetAccountPerson={NetThamBranch:0,NetOtherBranch:0},this.GlobalDiscountRate="",this.GlobalDiscount="",this._DefaultSettingsService.ResetDate(this.Invoice),this.HandleMyDefaultSettings(),this._SharedObjectModelService.ReturnAmount=0}ResetDetails(){let t={ProductType:0,ProductUnits:[],Items:[],ProductId:null,ProductUnitId:null,Balance:0,Price:"",Quantity:"",TotalPrice:0,TotalPriceAfterVat:0,TotalPriceAfterDiscount:0,Discount:"",DiscountRate:"",Vat:this._DefaultSettingsService.DefaultSettings.Vat,Code:"",Name:"",Id:0,Notes:"",ProductName:"",UnitName:""};if(this.Invoice.InvoiceDetails.length>0&&(this.Invoice.InvoiceDetails=this.Invoice.InvoiceDetails.filter(e=>e.ProductId!=0&&e.ProductId!=null&&e.ProductType!=2),this.Invoice.InvoiceDetails.length==0)){this.Invoice.InvoiceDetails.push(t),this.CalcInvoice();return}}ngOnDestroy(){this._Apiservice.destroy$.next(),this._Apiservice.destroy$.complete()}handleKeyboardEvent(t){if(t.ctrlKey&&t.key==="Shift"&&(t.preventDefault(),this.AppendRow()),t.ctrlKey&&(t.key==="\u064A"||t.key==="d"||t.key==="D")&&(t.preventDefault(),this.Invoice.InvoiceDetails.length>1)){for(let e=this.Invoice.InvoiceDetails.length-1;e>0;e--)if(this.Invoice.InvoiceDetails[e].ProductId==null){this.RemoveRow(e);break}}t.ctrlKey&&(t.key===" "||t.key==="Space")&&(t.preventDefault(),this._Apiservice.environment.SystemUpdate==!0&&(this.ScreenName=="BuyInvoice"||this.ScreenName=="SaleInvoice")&&this.Save(),this.ScreenName!="BuyInvoice"&&this.ScreenName!="SaleInvoice"&&this.Save()),t.ctrlKey&&(t.key==="\u0621"||t.key==="x"||t.key==="X")&&(t.preventDefault(),this.HoldInvoice()),t.ctrlKey&&(t.key==="\u0626"||t.key==="z"||t.key==="Z")&&(t.preventDefault(),this.ShowHoldInvoice())}SecoundScreen(t){t==this.EnumScreen.Client&&(this.SharedScreen=this._SharedScreenService.ClientScreen()),t==this.EnumScreen.Supplier&&(this.SharedScreen=this._SharedScreenService.SupplierScreen()),t==this.EnumScreen.Treasury&&(this.SharedScreen=this._SharedScreenService.TreasuryScreen()),t==this.EnumScreen.BankAccount&&(this.SharedScreen=this._SharedScreenService.BankAccountScreen()),t==this.EnumScreen.Storage&&(this.SharedScreen=this._SharedScreenService.StorageScreen()),this._AppModeService._NgbModal.open(this.OherModal,{size:"xl"})}ResetSharedScreen(){this.SharedScreen={AddUrl:"",DataView:[],DeleteUrl:"",PageTitle:"",TablePaging:{},UpdateUrl:"",GetById:""}}};d.\u0275fac=function(e){return new(e||d)(G(rt),G(ct),G(ge),G(ce),G(ot),G(L),G(W))},d.\u0275cmp=z({type:d,selectors:[["app-dynamic-invoice"]],viewQuery:function(e,n){if(e&1&&(U(Kt,5),U(qt,5),U(Zt,5),U(Xt,5),U(Yt,5)),e&2){let l;O(l=j())&&(n.GLComponent=l.first),O(l=j())&&(n.ContentModel=l.first),O(l=j())&&(n.OherModal=l.first),O(l=j())&&(n.AllHoldModel=l.first),O(l=j())&&(n.tableContainer=l.first)}},hostBindings:function(e,n){e&1&&g("keydown",function(v){return n.handleKeyboardEvent(v)},!1,Ie)},inputs:{SignalR:"SignalR",GlResponse:"GlResponse",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[me,q],decls:11,vars:8,consts:[["content",""],["AllHold",""],["ItemBalance",""],["OherModal",""],["GLComponent",""],["Select",""],["SelectItem22",""],["SelectUnits",""],["SelectStore",""],["SelectSupplier",""],["SelectClient",""],["SelectTreasury",""],["SelectBank",""],["SelectEmployee",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","PrintUrl","DeleteUrl","OutModal"],[1,"modalConent"],[1,"col-8"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0","Invoicemodalbody"],["id","ProductTable",1,"DivPaging","table-responsive","col-12","p-0","ProductTable"],[1,"",3,"value","responsive","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"bg-white","InvoiceContent","col-12","d-flex","flex-wrap","align-items-center"],["id","myContainer",1,"col-12","col-md-4","p-1"],["id","ngSelectComponent","placeholder","BarCode","bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"col-12","col-md-6","col-xl-3","p-1","d-flex"],["class","d-inline-block mx-1",4,"ngIf"],[1,"col-12","col-md-6","col-xl-1","p-1"],["type","number","appNumericInput","",1,"form-control","text-center",3,"value","disabled"],[1,"col-12","col-md-6","col-xl-2","p-1"],["type","text",1,"form-control","text-center",3,"ngModelChange","placeholder","ngModel"],["class","col-12  col-md-4 col-xl-2 p-1 d-flex text-center justify-content-center ",4,"ngIf"],[1,"bg-white","d-flex","flex-wrap","align-items-end","col-12","InvoiceContent"],[1,"col-12","col-md-4","col-lg-3","col-xl-2","p-1"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class","  text-center w-100",3,"ngModel","showTime","showIcon","showOnFocus","showOtherMonths","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1  d-flex align-items-end",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1 d-flex align-items-end",4,"ngIf"],["class","col-12 col-sm-6 col-md-12 col-lg-4 col-xl-4 p-1 d-flex flex-wrap align-items-center    ",4,"ngIf"],["class","col-12  p-1 d-flex flex-wrap align-items-end",4,"ngIf"],[1,"d-flex","flex-wrap","px-lg-2","TotalsContainer"],[1,"smal-header"],[1,""],[4,"ngIf"],["class","smal-header",4,"ngIf"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],["class","btn btn-Add m-0",3,"disabled","click",4,"ngIf"],["class","btn btn-Add",3,"click",4,"ngIf"],["class","btn btn-Primary ",3,"disabled","click",4,"ngIf"],["class","btn btn-Info ",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-light","btn-Close","border","border-1","border-dark",3,"click"],[1,"mx-1"],[1,"mx-1","pi","pi-cancle"],[1,"col-"],[1,"d-block","text-center"],[1,"col-3"],[1,"col-2"],["class","col-2",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"col-1"],[1,"Flex1",3,"title"],[1,"d-flex","justify-content-center","align-items-center","col-11","col-md-12"],[1,"d-none","d-lg-inline"],[1,"btn-Primary","py-2","px-2","btn","mx-2",3,"click"],[1,"mx-1","fw-bold","pi","pi-plus"],[1,"btn-Delete","btn-Page","btn","py-2","px-2",3,"click","disabled"],[1,"mx-1","pi","pi-trash","fw-bold"],[1,"SelectProduct",3,"title"],[1,"d-flex","col-12"],["bindLabel","NameAndCode","bindValue","Id",1,"p-0","text-center","col-11","col-lg-10",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","virtualScroll","searchable","ngModel"],[1,"btn","btn-Refresh",3,"click","disabled"],[1,"pi","pi-eye","d-block","mx-auto","fw-bold"],[1,"ngSelect",3,"title"],["bindLabel","NameAndUnitFactor","bindValue","Id",1,"p-0","text-center","col-10","col-lg-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","dropdownPosition","items","placeholder","disabled","virtualScroll","searchable","ngModel"],[1,"p-1"],[1,"d-flex","justify-content-around","align-items-center","col-12"],[1,"btn","btn-Primary","px-1","py-1",3,"click","disabled"],[1,"col-8","px-1"],["min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"change","keyup","ngModelChange","id","name","placeholder","disabled","ngModel"],[1,"btn","btn-Info","px-1","py-1",3,"click","disabled"],[1,"mx-1","px-1","pi","fw-bold"],[1,"col-12"],["class","text-dark d-block text-center",4,"ngIf"],["min","0","type","number","appNumericInput","","class","form-control text-center px-0",3,"placeholder","id","name","disabled","ngModel","change","keyup","ngModelChange",4,"ngIf"],["class","p-1",4,"ngIf"],[1,"text-center","col-12"],[1,"text-dark","d-block","d-md-none","text-center"],[1,"text-dark","d-block","text-center"],[1,"form-text","text-muted"],["min","0","type","number","appNumericInput","",1,"form-control","text-center","px-0",3,"change","keyup","ngModelChange","placeholder","id","name","disabled","ngModel"],[1,"d-inline-block","mx-1"],["type","number","appNumericInput","","name","GlobalDiscountRate","id","GlobalDiscountRate",1,"form-control","text-center",3,"change","keyup","ngModelChange","placeholder","ngModel"],["type","number","appNumericInput","","name","GlobalDiscount","id","GlobalDiscount",1,"form-control","text-center",3,"change","keyup","ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","col-xl-2","p-1","d-flex","text-center","justify-content-center"],[1,"form-check","p-0","text-center","mx-2"],[1,"d-flex","align-items-center"],["for","ClientType1",1,"p-0","text-center"],[1,"text-end"],["type","radio","name","ClientType","id","ClientType1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","ClientType2",1,"p-0","text-center"],["type","radio","name","ClientType","id","ClientType2",1,"form-check-input","mx-2",3,"change","ngModelChange","value","checked","ngModel"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"text-center","w-100",3,"ngModelChange","ngModel","showTime","showIcon","showOnFocus","showOtherMonths"],[1,"col-12","col-md-4","col-lg-3","col-xl-2","p-1","d-flex","align-items-end"],[1,"col-10","p-0"],["bindLabel","Name","bindValue","Id",1,"p-0","col-12",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"p-0"],["class","btn btn-Refresh px-2 py-2 mb-0",3,"click",4,"ngIf"],[1,"btn","btn-Refresh","px-2","py-2","mb-0",3,"click"],[1,"m-0","p-0","text-center","fw-bold","pi","pi-plus"],["bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","change","close","open","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"col-2","px-0"],[1,"btn","btn-Refresh","px-2","py-1","mb-0",3,"click"],[1,"m-0","my-2","p-0","text-center","fw-bold","pi","pi-plus"],["placeholder","Name","type","text","class","form-control text-center","name","","id","Client_Name",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["class","p-0 text-center","bindLabel","Name","bindValue","Id",3,"items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel","clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange",4,"ngIf"],["placeholder","Name","type","text","name","","id","Client_Name",1,"form-control","text-center",3,"ngModelChange","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","change","scrollToEnd","close","open","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","ngModel"],[1,"col-12","col-sm-6","col-md-12","col-lg-4","col-xl-4","p-1","d-flex","flex-wrap","align-items-center"],[1,"col-6","p-1","d-flex","align-items-center","justify-content-between"],[1,"col-5","text-center"],[1,"col-6"],["type","number","appNumericInput","","name","NetThamBranch","id","NetThamBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-6","text-center"],["type","number","appNumericInput","","name","NetOtherBranch","id","NetOtherBranch",1,"form-control","text-center",3,"disabled","value"],[1,"col-12","p-1","d-flex","flex-wrap","align-items-end"],[1,"col-12","col-md-4","col-lg-2","col-xl-1","p-1"],["name","","id","",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],["class","col-12 col-md-4 col-lg-3 col-xl-2 p-1",4,"ngIf"],["min","0","type","number","appNumericInput","","id","Cash",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","placeholder","virtualScroll","searchable","disabled","ngModel"],["min","0","type","number","appNumericInput","","id","Visa",1,"form-control","py-2","text-center",3,"keyup","change","ngModelChange","placeholder","disabled","ngModel"],["bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","placeholder","virtualScroll","searchable","disabled","ngModel"],[1,"d-inline"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","dropdownPosition","autofocus","virtualScroll","searchable","ngModel"],["id","Debt","min","0","type","number","appNumericInput","","class","form-control text-center",3,"placeholder","disabled","value",4,"ngIf"],["id","Debt","min","0","type","number","appNumericInput","",1,"form-control","text-center",3,"placeholder","disabled","value"],[1,"btn","btn-Add","m-0",3,"click","disabled"],[1,"mx-1","pi","pi-save"],["class","btn btn-Refresh",3,"disabled","click",4,"ngIf"],[1,"btn","btn-Add",3,"click"],[1,"btn","btn-Primary",3,"click","disabled"],[1,"btn","btn-Info",3,"click","disabled"],[3,"ShowToEditeEvent","PageTitle","TablePaging","GetById","DeleteUrl"],["type","button",1,"btn","btn-light","border","border-1","border-dark","px-5","py-3",3,"click"],[1,"modal-body"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"text-dark"],[3,"CloseParentModel","PageTitle","DataView","AddUrl","UpdateUrl","DeleteUrl","NotInsertTablePaging","GetById"]],template:function(e,n){if(e&1){let l=C();c(0,"app-dynamic-component",14),g("OpenModalEvent",function(){return _(l),p(n.OpenModal())})("ShowToEditeEvent",function(){return _(l),p(n.ShowToEdite())}),s(),S(1,rn,70,51,"ng-template",15,0,$)(3,an,5,7,"ng-template",16,1,$)(5,cn,12,7,"ng-template",16,2,$)(7,sn,1,7,"ng-template",16,3,$),y(9,"app-glsheard",null,4)}if(e&2){let l=T(2);m("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!0)("GlResponse",n.GlResponse)("GetById",n.GetById)("PrintUrl",n.PrintUrl)("DeleteUrl",n.DeleteUrl)("OutModal",l)}},dependencies:[le,ae,re,ee,Re,Ee,we,Te,be,fe,xe,Ce,ye,ne,De,oe,Me,Pe,Ae,Ne,X,Y,Le,ie,te,Ye,nt,lt,Qe,$e,ze]});let o=d;return o})();export{io as a};
