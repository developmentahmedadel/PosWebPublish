import{a as Ae}from"./chunk-N7IVJGNV.js";import{a as De}from"./chunk-BSPLJHNP.js";import{a as Ie,c as Me,j as Se}from"./chunk-GCFZKOIQ.js";import{a as ge,b as Te}from"./chunk-73GIXY73.js";import{a as fe}from"./chunk-64BGN5RD.js";import{a as de,b as me,c as ue,d as he}from"./chunk-YTUM3KNK.js";import{b as xe}from"./chunk-BEBWNCBB.js";import{c as ie,f as ne,h as re,k as ae,m as se,n as le,o as oe,p as ce,q as _e,u as pe}from"./chunk-SLSEXWRZ.js";import{c as Ce,d as ye}from"./chunk-4L6P5Z5M.js";import{A as te,c as K,d as X,e as Z,j as ee}from"./chunk-JM67XKKX.js";import{$b as S,Bb as _,Cb as p,Db as j,Hb as D,Lb as f,Mb as r,Pb as R,Qb as N,Sb as F,Tb as U,Ub as H,Vb as y,Wb as m,Xb as E,Yb as C,Zb as V,_b as M,ac as A,cb as c,cc as q,db as k,fc as z,mc as x,na as Q,nc as g,oc as Y,pc as J,ub as I,wb as h,xa as l,ya as o}from"./chunk-VIO7ZK3G.js";var ve=["content"],we=["GLComponent"],Re=(s,d)=>({"btn-success":s,"btn-primary":d});function Ve(s,d){if(s&1&&(_(0,"span",49),m(1),x(2,"date"),p()),s&2){let i=r(2);c(),C(" ",Y(2,1,i.ModelCash.DocDate,"d-M-yyyy h:mm:ss a")," ")}}function Be(s,d){if(s&1){let i=D();_(0,"p-calendar",50),A("ngModelChange",function(e){l(i);let n=r(2);return S(n.ModelCash.DocDate,e)||(n.ModelCash.DocDate=e),o(e)}),p()}if(s&2){let i=r(2);h("showOtherMonths",!0)("showTime",!0)("showIcon",!0)("showOnFocus",!1),M("ngModel",i.ModelCash.DocDate)}}function Ee(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.TreasuryArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Pe(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function be(s,d){if(s&1){let i=D();_(0,"div",51)(1,"p"),m(2),x(3,"translate"),p(),_(4,"ng-select",52,2),f("clear",function(){l(i);let e=r(2);return o(e.TreasuryArr=[])})("focus",function(){l(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Treasury",e),o(n._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(5),n=r(2);return n.ChangeSearchApi("Treasury",e),o(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(5),n=r(2);return o(n.ChangeSearchApi("Treasury",e))})("close",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(2);return o(e.SelectValue(e.ModelCash.TreasuryId,"Treasury"))}),A("ngModelChange",function(e){l(i);let n=r(2);return S(n.ModelCash.TreasuryId,e)||(n.ModelCash.TreasuryId=e),o(e)}),I(6,Ee,2,2,"ng-template",53)(7,Pe,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),E(g(3,6,"MoneyIn.Treasury")),c(2),h("items",i.TreasuryArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.TreasuryId)}}function ke(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(3);c(),V("Loaded ",i.BankAccountArr.length," of ",i._SharedObjectModelService.TotalItems,"")}}function Ge(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function Ne(s,d){if(s&1){let i=D();_(0,"div",51)(1,"p",56),m(2),x(3,"translate"),p(),_(4,"ng-select",52,3),f("clear",function(){l(i);let e=r(2);return o(e.BankAccountArr=[])})("focus",function(){l(i);let e=y(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),o(n._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(5),n=r(2);return n.ChangeSearchApi("BankAccounts",e),o(n._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(5),n=r(2);return o(n.ChangeSearchApi("BankAccounts",e))})("close",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(2);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(2);return o(e.SelectValue(e.ModelCash.BankAccountId,"BankAccount"))}),A("ngModelChange",function(e){l(i);let n=r(2);return S(n.ModelCash.BankAccountId,e)||(n.ModelCash.BankAccountId=e),o(e)}),I(6,ke,2,2,"ng-template",53)(7,Ge,1,1,"ng-template",54),p()()}if(s&2){let i=r(2);c(2),E(g(3,6,"MoneyIn.Bank")),c(2),h("items",i.BankAccountArr)("autofocus",!1)("virtualScroll",!0)("searchable",!0),M("ngModel",i.ModelCash.BankAccountId)}}function Oe(s,d){s&1&&(_(0,"th",57),m(1,"#"),p())}function We(s,d){s&1&&(_(0,"th",58),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.AccTree")," "))}function je(s,d){s&1&&(_(0,"th",42),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.Clients")," "))}function Le(s,d){s&1&&(_(0,"th",58),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.BankAccount")," "))}function $e(s,d){s&1&&(_(0,"th",58),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.Treasury")," "))}function Fe(s,d){s&1&&(_(0,"th",42),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"InitGlRecept.Branch")," "))}function Ue(s,d){s&1&&(_(0,"th",42),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.Suppliers")," "))}function He(s,d){s&1&&(_(0,"th",42),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"InitGlRecept.Employee")," "))}function Qe(s,d){s&1&&(_(0,"th",58),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"MoneyIn.AmountTax")," "))}function qe(s,d){if(s&1){let i=D();_(0,"td",63)(1,"div",64)(2,"span",65),m(3),p(),_(4,"button",66),f("click",function(){l(i);let e=r().index,n=r(2);return o(n.AppendRow(e))}),m(5,"+"),p(),_(6,"button",67),f("click",function(){l(i);let e=r().index,n=r(2);return o(n.RemoveRow(e))}),m(7,"-"),p()()()}if(s&2){let i=r().index,t=r(2);c(3),E(i+1),c(3),h("disabled",t.ModelCash.ModelCashDetails.length==1)}}function ze(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ye(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function Je(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,4),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AllAccTree",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AllAccTree",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.AccTreeId,"AccTree",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),I(3,ze,2,2,"ng-template",53)(4,Ye,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function Ke(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Clients.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Xe(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function Ze(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,5),f("clear",function(){l(i);let e=r().$implicit;return o(e.Clients=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Clients",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Clients",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.ClientId,"Client",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.ClientId,e)||(n.ClientId=e),o(e)}),I(3,Ke,2,2,"ng-template",53)(4,Xe,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Clients)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.ClientId)}}function et(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.BankAccounts.length," of ",t._SharedObjectModelService.TotalItems,"")}}function tt(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function it(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,6),f("clear",function(){l(i);let e=r().$implicit;return o(e.BankAccounts=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("BankAccounts",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("BankAccounts",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.BankAccountId,"BankAccount",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.BankAccountId,e)||(n.BankAccountId=e),o(e)}),I(3,et,2,2,"ng-template",53)(4,tt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.BankAccounts)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BankAccountId)}}function nt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Treasurys.length," of ",t._SharedObjectModelService.TotalItems,"")}}function rt(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function at(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,7),f("clear",function(){l(i);let e=r().$implicit;return o(e.Treasurys=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Treasury",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Treasury",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.TreasuryId,"Treasury",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.TreasuryId,e)||(n.TreasuryId=e),o(e)}),I(3,nt,2,2,"ng-template",53)(4,rt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Treasurys)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.TreasuryId)}}function st(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Branches.length," of ",t._SharedObjectModelService.TotalItems,"")}}function lt(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function ot(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,8),f("clear",function(){l(i);let e=r().$implicit;return o(e.Branches=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Branch",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Branch",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.BranchClientId,"BranchClient",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.BranchClientId,e)||(n.BranchClientId=e),o(e)}),I(3,st,2,2,"ng-template",53)(4,lt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Branches)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.BranchClientId)}}function ct(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Suppliers.length," of ",t._SharedObjectModelService.TotalItems,"")}}function _t(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function pt(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,9),f("clear",function(){l(i);let e=r().$implicit;return o(e.Suppliers=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Suppliers",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Suppliers",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.SupplierId,"Supplier",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.SupplierId,e)||(n.SupplierId=e),o(e)}),I(3,ct,2,2,"ng-template",53)(4,_t,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Suppliers)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.SupplierId)}}function dt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Partners.length," of ",t._SharedObjectModelService.TotalItems,"")}}function mt(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function ut(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,10),f("clear",function(){l(i);let e=r().$implicit;return o(e.Partners=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Partners",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Partners",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.PartnerId,"Partner",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.PartnerId,e)||(n.PartnerId=e),o(e)}),I(3,dt,2,2,"ng-template",53)(4,mt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Partners)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.PartnerId)}}function ht(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.Employees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function Ct(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function yt(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,11),f("clear",function(){l(i);let e=r().$implicit;return o(e.Employees=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("Employee",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("Employee",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.EmployeeId,"Employee",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.EmployeeId,e)||(n.EmployeeId=e),o(e)}),I(3,ht,2,2,"ng-template",53)(4,Ct,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.Employees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.EmployeeId)}}function xt(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function gt(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function Tt(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,12),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeRevenue",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AccTreeRevenue",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.AccTreeId,"AccTree",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),I(3,xt,2,2,"ng-template",53)(4,gt,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function It(s,d){if(s&1&&(_(0,"small",55),m(1),p()),s&2){let i=r(2).$implicit,t=r(2);c(),V("Loaded ",i.AccTrees.length," of ",t._SharedObjectModelService.TotalItems,"")}}function ft(s,d){if(s&1&&m(0),s&2){let i=d.item;C(" ",i.Name," ")}}function Mt(s,d){if(s&1){let i=D();_(0,"td",68)(1,"ng-select",69,13),f("clear",function(){l(i);let e=r().$implicit;return o(e.AccTrees=[])})("focus",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),o(a._AppModeService.ResetCurrentPage())})("keyup",function(){l(i);let e=y(2),n=r().index,a=r(2);return a.ChangeSearchApiDetails("AccTreeExpenses",e,n),o(a._AppModeService.ResetCurrentPage())})("scrollToEnd",function(){l(i);let e=y(2),n=r().index,a=r(2);return o(a.ChangeSearchApiDetails("AccTreeExpenses",e,n))})("close",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("open",function(){l(i);let e=r(3);return o(e._AppModeService.ResetCurrentPage())})("change",function(){l(i);let e=r(),n=e.$implicit,a=e.index,u=r(2);return o(u.SelectValueDetails(n.AccTreeId,"AccTree",a))}),A("ngModelChange",function(e){l(i);let n=r().$implicit;return S(n.AccTreeId,e)||(n.AccTreeId=e),o(e)}),I(3,It,2,2,"ng-template",53)(4,ft,1,1,"ng-template",54),p()()}if(s&2){let i=r(),t=i.$implicit,e=i.index,n=r(2);c(),h("items",t.AccTrees)("autofocus",!1)("dropdownPosition",n._AppModeService.DropdownPosition(e))("virtualScroll",!0)("searchable",!0),M("ngModel",t.AccTreeId)}}function St(s,d){s&1&&(_(0,"span",72),m(1," \u0645\u062F\u064A\u0648\u0646 \u0644\u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function At(s,d){s&1&&(_(0,"span",72),m(1," \u0645\u062F\u0627\u064A\u0646 \u0645\u0635\u0644\u062D\u0647 \u0636\u0631\u0627\u0626\u0628 "),p())}function Dt(s,d){if(s&1&&(_(0,"td",68)(1,"span",70),m(2),p(),I(3,St,2,0,"span",71)(4,At,2,0,"span",71),p()),s&2){let i=r().$implicit,t=r(2);c(2),C(" ",i.Name," "),c(),h("ngIf",t.ConvertNumber(i.Name)>0),c(),h("ngIf",t.ConvertNumber(i.Name)<0)}}function vt(s,d){if(s&1){let i=D();_(0,"tr"),I(1,qe,8,2,"td",59)(2,Je,5,6,"td",60)(3,Ze,5,6,"td",60)(4,it,5,6,"td",60)(5,at,5,6,"td",60)(6,ot,5,6,"td",60)(7,pt,5,6,"td",60)(8,ut,5,6,"td",60)(9,yt,5,6,"td",60)(10,Tt,5,6,"td",60)(11,Mt,5,6,"td",60)(12,Dt,5,3,"td",60),_(13,"td")(14,"input",61),A("ngModelChange",function(e){let n=l(i).$implicit;return S(n.Amount,e)||(n.Amount=e),o(e)}),p()(),_(15,"td")(16,"input",62),A("ngModelChange",function(e){let n=l(i).$implicit;return S(n.Notes,e)||(n.Notes=e),o(e)}),p()()()}if(s&2){let i=d.$implicit,t=d.index,e=r(2);c(),h("ngIf",e.ModelCash.InitGlType!=e.InitGlType.CreditTaxes),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.AccTree),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Client),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Bank),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Treasury),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Branch),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Supplier),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.PartnersDrawingAccounts),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Salaries||e.ModelCash.InitGlType==e.InitGlType.EmployeeCustody),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Revenues),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.Expenses),c(),h("ngIf",e.ModelCash.InitGlType==e.InitGlType.CreditTaxes),c(2),N("name","Amount",t,""),N("id","Amount",t,""),M("ngModel",i.Amount),c(2),N("name","Notes",t,""),N("id","Notes",t,""),M("ngModel",i.Notes)}}function wt(s,d){s&1&&(_(0,"span"),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"Model.Save"),""))}function Rt(s,d){s&1&&(_(0,"span"),m(1),x(2,"translate"),p()),s&2&&(c(),C(" ",g(2,1,"Model.Update"),""))}function Vt(s,d){if(s&1){let i=D();_(0,"button",73),f("click",function(){l(i);let e=r(2);return o(e.OpenGl())}),m(1),x(2,"translate"),p()}s&2&&(c(),C(" ",g(2,1,"Model.Gl"),`
`))}function Bt(s,d){if(s&1){let i=D();j(0,"app-modal-header",15),_(1,"div",16)(2,"div",17)(3,"div",18)(4,"label",19),m(5),x(6,"translate"),p(),j(7,"input",20),p(),_(8,"div",18)(9,"label",21),m(10),x(11,"translate"),p(),_(12,"input",22),A("ngModelChange",function(e){l(i);let n=r();return S(n.ModelCash.Notes,e)||(n.ModelCash.Notes=e),o(e)}),p()(),_(13,"div",18),I(14,Ve,3,4,"span",23)(15,Be,1,5,"p-calendar",24),p(),_(16,"div",25)(17,"div",26)(18,"label",27),m(19),x(20,"translate"),p(),_(21,"input",28),f("change",function(){l(i);let e=r();return o(e.ChangePaymentType(1))}),A("ngModelChange",function(e){l(i);let n=r();return S(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),o(e)}),p()(),_(22,"div",26)(23,"label",29),m(24),x(25,"translate"),p(),_(26,"input",30),f("change",function(){l(i);let e=r();return o(e.ChangePaymentType(2))}),A("ngModelChange",function(e){l(i);let n=r();return S(n.ModelCash.TreasuryCashType,e)||(n.ModelCash.TreasuryCashType=e),o(e)}),p()()(),_(27,"div",31),I(28,be,8,8,"div",32)(29,Ne,8,8,"div",33),p(),_(30,"div",34)(31,"label",35),m(32),x(33,"translate"),p(),_(34,"select",36),f("change",function(){l(i);let e=r();return o(e.ChangeType())}),A("ngModelChange",function(e){l(i);let n=r();return S(n.ModelCash.InitGlType,e)||(n.ModelCash.InitGlType=e),o(e)}),_(35,"option",37),m(36),x(37,"translate"),p(),_(38,"option",37),m(39),x(40,"translate"),p(),_(41,"option",37),m(42),x(43,"translate"),p(),_(44,"option",37),m(45),x(46,"translate"),p(),_(47,"option",37),m(48),x(49,"translate"),p(),_(50,"option",37),m(51),x(52,"translate"),p(),_(53,"option",37),m(54),x(55,"translate"),p(),_(56,"option",37),m(57),x(58,"translate"),p(),_(59,"option",37),m(60),x(61,"translate"),p(),_(62,"option",37),m(63),x(64,"translate"),p(),_(65,"option",37),m(66),x(67,"translate"),p(),_(68,"option",37),m(69),x(70,"translate"),p()()()(),_(71,"table",38)(72,"thead")(73,"tr"),I(74,Oe,2,0,"th",39)(75,We,3,3,"th",40)(76,je,3,3,"th",41)(77,Le,3,3,"th",40)(78,$e,3,3,"th",40)(79,Fe,3,3,"th",41)(80,Ue,3,3,"th",41)(81,He,3,3,"th",41)(82,Qe,3,3,"th",40),_(83,"th",42),m(84),x(85,"translate"),p(),_(86,"th",42),m(87),x(88,"translate"),p()()(),_(89,"tbody"),I(90,vt,17,22,"tr",43),p()()(),_(91,"div",44)(92,"button",45),f("click",function(){l(i);let e=r();return o(e.Save())}),I(93,wt,3,3,"span",46)(94,Rt,3,3,"span",46),p(),I(95,Vt,3,3,"button",47),_(96,"button",48),f("click",function(){let e=l(i).$implicit,n=r();return e.close("Close click"),o(n.ResetPage())}),m(97),x(98,"translate"),p()()}if(s&2){let i=r();h("PageTitle",i.PageTitle),c(5),E(g(6,62,"Table.DocNo")),c(2),h("value",i.ModelCash.DocNo)("disabled",!0),c(3),E(g(11,64,"Table.Notes")),c(2),M("ngModel",i.ModelCash.Notes),c(2),h("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!1),c(),h("ngIf",i._DefaultSettingsService.DefaultSettings.DateTimeReadOnly==!0),c(4),C(" ",g(20,66,"MoneyIn.Treasury")," "),c(2),M("ngModel",i.ModelCash.TreasuryCashType),h("checked",i.ModelCash.TreasuryCashType==1)("value",1),c(3),C(" ",g(25,68,"MoneyIn.Bank")," "),c(2),h("checked",i.ModelCash.TreasuryCashType==2)("value",2),M("ngModel",i.ModelCash.TreasuryCashType),c(2),h("ngIf",i.ModelCash.TreasuryCashType==1),c(),h("ngIf",i.ModelCash.TreasuryCashType==2),c(3),E(g(33,70,"MoneyIn.Type")),c(2),M("ngModel",i.ModelCash.InitGlType),c(),R("value",i.InitGlType.AccTree),c(),C(" ",g(37,72,"MoneyIn.AccTree")," "),c(2),R("value",i.InitGlType.Client),c(),C(" ",g(40,74,"MoneyIn.Clients")," "),c(2),R("value",i.InitGlType.Bank),c(),C(" ",g(43,76,"MoneyIn.Bank")," "),c(2),R("value",i.InitGlType.Treasury),c(),C(" ",g(46,78,"MoneyIn.Treasury")," "),c(2),R("value",i.InitGlType.Supplier),c(),C(" ",g(49,80,"MoneyIn.Suppliers")," "),c(2),R("value",i.InitGlType.Branch),c(),C(" ",g(52,82,"InitGlRecept.Branches")," "),c(2),R("value",i.InitGlType.Salaries),c(),C(" ",g(55,84,"InitGlRecept.Salaries")," "),c(2),R("value",i.InitGlType.EmployeeCustody),c(),C(" ",g(58,86,"InitGlRecept.EmployeeCustody")," "),c(2),R("value",i.InitGlType.PartnersDrawingAccounts),c(),C(" ",g(61,88,"InitGlRecept.PartnersDrawingAccounts")," "),c(2),R("value",i.InitGlType.Revenues),c(),C(" ",g(64,90,"MoneyIn.Revenues")," "),c(2),R("value",i.InitGlType.Expenses),c(),C(" ",g(67,92,"MoneyIn.ProofOfExpenses")," "),c(2),R("value",i.InitGlType.CreditTaxes),c(),C(" ",g(70,94,"MoneyIn.CreditTaxes")," "),c(5),h("ngIf",i.ModelCash.InitGlType!=i.InitGlType.CreditTaxes),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.AccTree||i.ModelCash.InitGlType==i.InitGlType.Revenues||i.ModelCash.InitGlType==i.InitGlType.Expenses),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Client),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Bank),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Treasury),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Branch),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Supplier),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.Salaries||i.ModelCash.InitGlType==i.InitGlType.EmployeeCustody||i.ModelCash.InitGlType==i.InitGlType.PartnersDrawingAccounts),c(),h("ngIf",i.ModelCash.InitGlType==i.InitGlType.CreditTaxes),c(2),C(" ",g(85,96,"MoneyIn.Price")," "),c(3),C(" ",g(88,98,"MoneyIn.Notes")," "),c(3),h("ngForOf",i.ModelCash.ModelCashDetails)("ngForTrackBy",i.trackByMethod),c(2),h("ngClass",z(102,Re,i.ModelCash.Id==0,i.ModelCash.Id!=0)),c(),h("ngIf",i.ModelCash.Id==0),c(),h("ngIf",i.ModelCash.Id!=0),c(),h("ngIf",i.ModelCash.Id>0),c(2),E(g(98,100,"Model.Close"))}}var Kt=(()=>{let d=class d{constructor(t,e,n,a,u){this._ActivatedRoute=t,this._SharedObjectModelService=e,this._DefaultSettingsService=n,this._AppModeService=a,this._Apiservice=u,this.SubscriptionArr=[],this.SignalR=!1,this.TablePaging={},this.PageTitle="",this.ScreenName="",this.AddUrl="",this.UpdateUrl="",this.DeleteUrl="",this.GetById="",this.PrintUrl="",this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this.InitGlType={None:0,AccTree:1,Client:2,Bank:3,Treasury:4,Supplier:5,Item:6,Branch:7,Salaries:8,EmployeeCustody:9,PartnersDrawingAccounts:10,Revenues:11,Expenses:12,CreditTaxes:13},this.TokenBranch=0,this.TreasuryArr=[],this.BankAccountArr=[]}ngOnInit(){let t=this._Apiservice.UserIdFromCookies();this.TokenBranch=Number(t.BranchId);let e=Number(this._ActivatedRoute.snapshot.queryParams.Id);e>0&&this.GetByIdRoute(e)}GetByIdRoute(t){let e=this._Apiservice.getById(this.GetById,t,!0).subscribe({next:n=>{n.IsSuccess==!0&&n.Obj!=null?(this._SharedObjectModelService.PageModel=n.Obj.model,this._SharedObjectModelService.Gl=n.Obj.Gl,this.Drow(this._SharedObjectModelService.PageModel),this._AppModeService._NgbModal.open(this.ContentModel,{fullscreen:!0,backdrop:"static"})):this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}ConvertNumber(t){return Number(t)}GetPageInfo(){this._AppModeService.DisabledButton=!0;let t=this._Apiservice.get(`${this.ScreenName}EP/GetPageInfo`,!1).subscribe({next:e=>{e.IsSuccess==!0&&e.Obj!=null?(this.ModelCash.DocNo=e.Obj,this._AppModeService.DisabledButton=!1):this._AppModeService._Toastr.error(e.Message)},error:e=>{this._AppModeService.DisabledButton=!1}});this.SubscriptionArr.push(t)}OpenModal(){this.ResetPage(),this.GetPageInfo()}OpenGl(){this.GLComponent.Open()}ShowToEdite(){this.Drow(this._SharedObjectModelService.PageModel)}Drow(t){t.TreasuryId>0&&(t.PaymentType=1,t.PaymentType=1,this.TreasuryArr=[],this.TreasuryArr=[{Id:t.TreasuryId,Name:t.TreasuryName,Code:""}]),t.BankAccountId>0&&(t.PaymentType=2,this.BankAccountArr=[],this.BankAccountArr=[{Id:t.BankAccountId,Name:t.BankAccountName}]);let e=t[`${this.ScreenName}Details`];this.ModelCash={Id:t.Id,DocNo:t.DocNo,DocDate:new Date(`${t.DocDate}`),Notes:t.Notes,Code:t.Code,TotalAmount:t.TotalAmount,InitGlType:t.InitGlType,BankAccountId:t.BankAccountId,BankAccountName:t.BankAccountName,TreasuryId:t.TreasuryId,TreasuryName:t.TreasuryName,TreasuryCashType:t.TreasuryCashType,ModelCashDetails:e};for(let n=0;n<this.ModelCash.ModelCashDetails.length;n++){let a=this.ModelCash.ModelCashDetails[n];a.AccTreeId>0&&(a.AccTrees=[{Id:a.AccTreeId,Name:a.AccTreeName}]),a.ClientId>0&&(a.Clients=[{Id:a.ClientId,Name:a.ClientName}]),a.BankAccountId>0&&(a.BankAccounts=[{Id:a.BankAccountId,Name:a.BankAccountName}]),a.TreasuryId>0&&(a.Treasurys=[{Id:a.TreasuryId,Name:a.TreasuryName}]),a.SupplierId>0&&(a.Suppliers=[{Id:a.SupplierId,Name:a.SupplierName}]),a.BranchClientId>0&&(a.Branches=[{Id:a.BranchClientId,Name:a.BranchClientName}]),a.EmployeeId>0&&(a.Employees=[{Id:a.EmployeeId,Name:a.EmployeeName}]),a.PartnerId>0&&(a.Partners=[{Id:a.PartnerId,Name:a.PartnerName}])}this._AppModeService.DisabledButton=!1}AppendRow(t){let e={Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]};return this.ModelCash.ModelCashDetails.push(e),this.TotalMoneyIn(),!0}RemoveRow(t){return this.ModelCash.ModelCashDetails.length==1?(this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorFirstRow")),!1):(this.ModelCash.ModelCashDetails.splice(t,1),this.TotalMoneyIn(),!0)}TotalMoneyIn(){let t=0;for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++)t+=Number(this.ModelCash.ModelCashDetails[e].Amount);return Number(t.toFixed(2))}ChangeType(){if(this.ModelCash.ModelCashDetails=[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,BranchClientId:null,BranchClientName:"",Id:0,Name:"",Notes:"",Code:"",SaleInvoices:[],BuyInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}],Number(this.ModelCash.InitGlType)==this.InitGlType.CreditTaxes){let e=this._Apiservice.get("AccTreeEP/NetCreditTaxes",!1).subscribe({next:n=>{n.IsSuccess==!0&&n.Obj!=null?this.ModelCash.ModelCashDetails[0].Name=`${n.Obj}`:this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}}ChangePaymentType(t){this.ModelCash.BankAccountId=null,this.ModelCash.BankAccountName="",this.ModelCash.TreasuryId=null,this.ModelCash.TreasuryName=""}ChangeSearchApi(t,e){let n=`${e.searchTerm}`.trim();(n==""||n=="null")&&(e.searchTerm="",n=""),this._AppModeService.CurrentPage+=1;let a={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:n,SearchField:"Name"};t=="Treasury"&&(a.BranchFilter=!0);let u=this._Apiservice.post("Global/GetAll",a,!1).subscribe({next:w=>{w.IsSuccess==!0&&w.Obj!=null?this.HandleResponse(w.Obj,t):this._AppModeService._Toastr.error(w.Message)}});this.SubscriptionArr.push(u)}HandleResponse(t,e){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,e=="Treasury"&&(this.TreasuryArr=this._SharedObjectModelService.RemoveDuplicates(this.TreasuryArr.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.BankAccountArr=this._SharedObjectModelService.RemoveDuplicates(this.BankAccountArr.concat(t.DataReturn),"Id"))}SelectValue(t,e){if(t!=null&&(t>0||t!="")){let n=[];e=="Treasury"&&(n=this.TreasuryArr),e=="BankAccount"&&(n=this.BankAccountArr);let a=n.find(u=>u.Id==t);if(a==null){this._AppModeService.DontPlay();return}else this.ModelCash[`${e}Id`]=t,this.ModelCash[`${e}Name`]=a.Name}else this.ModelCash[`${e}Id`]=null,this.ModelCash[`${e}Name`]=""}ChangeSearchApiDetails(t,e,n){let a=`${e.searchTerm}`.trim();(a==""||a=="null")&&(e.searchTerm="",a=""),this._AppModeService.CurrentPage+=1;let u={TableName:t,Columns:["Id","Name"],Conditions:"",PageSize:this._AppModeService.TabTake,CurrentPage:this._AppModeService.CurrentPage,SearchText:a,SearchField:"Name"};if((t=="AllAccTree"||t=="AccTreeRevenue"||t=="AccTreeExpenses")&&(u.TableName="AccTree",u.BranchFilter=!0,u.Conditions="AccClass >= 3"),t=="AccTreeRevenue"&&(u.Conditions="AccClass >= 3 And Level = 4"),t=="AccTreeExpenses"&&(u.Conditions="AccClass >= 3 And Level = 5"),(t=="Treasury"||t=="Partners")&&(u.BranchFilter=!0),t=="Branch"&&(u.Conditions=`Id != ${this.TokenBranch}`),t=="SaleInvoices"){let B=this.ModelCash.ModelCashDetails[n].ClientId;u.Conditions=`ClientId = ${B} And PaymentType = 2`,u.Columns=["Id","DocNo","Debt","InvoiceCollected","InvoiceCollection"],u.SearchField="",u.SearchText=""}let w=this._Apiservice.post("Global/GetAll",u,!1).subscribe({next:B=>{B.IsSuccess==!0&&B.Obj!=null?this.HandleResponseDetails(B.Obj,t,n):this._AppModeService._Toastr.error(B.Message)}});this.SubscriptionArr.push(w)}HandleResponseDetails(t,e,n){this._SharedObjectModelService.TotalItems=0,this._SharedObjectModelService.TotalItems=t.TotalItems,(e=="AllAccTree"||e=="AccTreeRevenue"||e=="AccTreeExpenses")&&(this.ModelCash.ModelCashDetails[n].AccTrees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].AccTrees.concat(t.DataReturn),"Id")),e=="Clients"&&(this.ModelCash.ModelCashDetails[n].Clients=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Clients.concat(t.DataReturn),"Id")),e=="SaleInvoices"&&(this.ModelCash.ModelCashDetails[n].SaleInvoices=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].SaleInvoices.concat(t.DataReturn),"Id")),e=="BankAccounts"&&(this.ModelCash.ModelCashDetails[n].BankAccounts=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].BankAccounts.concat(t.DataReturn),"Id")),e=="Treasury"&&(this.ModelCash.ModelCashDetails[n].Treasurys=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Treasurys.concat(t.DataReturn),"Id")),e=="Suppliers"&&(this.ModelCash.ModelCashDetails[n].Suppliers=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Suppliers.concat(t.DataReturn),"Id")),e=="Branch"&&(this.ModelCash.ModelCashDetails[n].Branches=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Branches.concat(t.DataReturn),"Id")),e=="Employee"&&(this.ModelCash.ModelCashDetails[n].Employees=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Employees.concat(t.DataReturn),"Id")),e=="Partners"&&(this.ModelCash.ModelCashDetails[n].Partners=this._SharedObjectModelService.RemoveDuplicates(this.ModelCash.ModelCashDetails[n].Partners.concat(t.DataReturn),"Id"))}SelectValueDetails(t,e,n){if(t!=null&&t>0){let a=[];e=="AccTree"&&(a=this.ModelCash.ModelCashDetails[n].AccTrees),e=="Client"&&(a=this.ModelCash.ModelCashDetails[n].Clients),e=="BankAccount"&&(a=this.ModelCash.ModelCashDetails[n].BankAccounts),e=="Treasury"&&(a=this.ModelCash.ModelCashDetails[n].Treasurys),e=="Supplier"&&(a=this.ModelCash.ModelCashDetails[n].Suppliers),e=="BranchClient"&&(a=this.ModelCash.ModelCashDetails[n].Branches),e=="Employee"&&(a=this.ModelCash.ModelCashDetails[n].Employees),e=="Partner"&&(a=this.ModelCash.ModelCashDetails[n].Partners);let u=a.find(w=>w.Id==t);if(u!=null)this.ModelCash.ModelCashDetails[n][`${e}Id`]=u.Id,this.ModelCash.ModelCashDetails[n][`${e}Name`]=u.Name;else{this._Apiservice.DontPlay();return}}else this.ModelCash.ModelCashDetails[n][`${e}Id`]=null,this.ModelCash.ModelCashDetails[n][`${e}Name`]=[]}Save(){if(this.ModelCash.DocDate==""||this.ModelCash.DocDate==null){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleOffer.Error.EnterDate"));return}if(this.ModelCash.InitGlType<=0){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ChooseType"));return}if(this.ModelCash.TreasuryCashType==1&&(this.ModelCash.TreasuryId==0||this.ModelCash.TreasuryId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterTreasury"));return}if(this.ModelCash.TreasuryCashType==2&&(this.ModelCash.BankAccountId==0||this.ModelCash.BankAccountId==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("SaleInvoice.Error.EnterBank"));return}for(let e=0;e<this.ModelCash.ModelCashDetails.length;e++){let n=e,a=Number(this.ModelCash.ModelCashDetails[e].AccTreeId),u=Number(this.ModelCash.ModelCashDetails[e].ClientId),w=Number(this.ModelCash.ModelCashDetails[e].BankAccountId),B=Number(this.ModelCash.ModelCashDetails[e].TreasuryId),G=Number(this.ModelCash.ModelCashDetails[e].SupplierId),O=Number(this.ModelCash.ModelCashDetails[e].SaleInvoiceId),W=Number(this.ModelCash.ModelCashDetails[e].BuyInvoiceId),L=Number(this.ModelCash.ModelCashDetails[e].BranchClientId),P=Number(this.ModelCash.ModelCashDetails[e].EmployeeId),$=Number(this.ModelCash.ModelCashDetails[e].PartnerId),b=Number(this.ModelCash.ModelCashDetails[e].Amount);if(this.ModelCash.InitGlType==this.InitGlType.AccTree&&(a==0||a==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAccTree"));return}if(this.ModelCash.InitGlType==this.InitGlType.AccTree&&a>0&&this.ModelCash.ModelCashDetails.filter(T=>T.AccTreeId==a).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&(u==0||u==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterClient"));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&u>0&&O>0&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==u&&T.SaleInvoiceId==O).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&this.ModelCash.ModelCashDetails.filter(T=>T.ClientId==u).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&(w==0||w==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterBankAccount"));return}if(this.ModelCash.InitGlType==this.InitGlType.Bank&&w>0&&this.ModelCash.ModelCashDetails.filter(T=>T.BankAccountId==w).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&(B==0||B==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterTreasury"));return}if(this.ModelCash.InitGlType==this.InitGlType.Treasury&&B>0&&this.ModelCash.ModelCashDetails.filter(T=>T.TreasuryId==B).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&(G==0||G==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterSupplier"));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==G).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&G>0&&W>0&&this.ModelCash.ModelCashDetails.filter(T=>T.SupplierId==G&&T.BuyInvoiceId==W).length>1){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Client&&O>0){let v=this.ModelCash.ModelCashDetails[e].SaleInvoices.find(T=>T.DocNo==O);if(v!=null){let T=v.Debt-v.InvoiceCollection;if(b>T){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}}if(this.ModelCash.InitGlType==this.InitGlType.Supplier&&W>0){let v=this.ModelCash.ModelCashDetails[e].BuyInvoices.find(T=>T.DocNo==W);if(v!=null&&b>v.InvoiceCollection){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.ErrorDebt"));return}}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&(L==0||L==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseBranch"));return}if(this.ModelCash.InitGlType==this.InitGlType.Branch&&this.ModelCash.ModelCashDetails.filter(T=>T.BranchClientId==L).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&(P==0||P==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.Salaries&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==P).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&(P==0||P==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("InitGlRecept.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.EmployeeCustody&&this.ModelCash.ModelCashDetails.filter(T=>T.EmployeeId==P).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&($==0||$==null)){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Partners.ChooseEmployee"));return}if(this.ModelCash.InitGlType==this.InitGlType.PartnersDrawingAccounts&&this.ModelCash.ModelCashDetails.filter(T=>T.PartnerId==$).length>=2){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("Show.ItemDuplicated")+" "+(n+1));return}if(b<=0||isNaN(b)||b==null||b==null){this._AppModeService._Toastr.error(this._AppModeService._Translate.instant("MoneyIn.Error.EnterAmount"));return}}let t={Id:this.ModelCash.Id,DocNo:this.ModelCash.DocNo,DocDate:this._Apiservice.ConvertISODate(this.ModelCash.DocDate),Notes:this.ModelCash.Notes,Code:this.ModelCash.Code,TotalAmount:this.ModelCash.TotalAmount,InitGlType:Number(this.ModelCash.InitGlType),BankAccountId:this.ModelCash.BankAccountId,BankAccountName:this.ModelCash.BankAccountName,TreasuryId:this.ModelCash.TreasuryId,TreasuryName:this.ModelCash.TreasuryName,TreasuryCashType:this.ModelCash.TreasuryCashType,ModelCashDetails:this.ModelCash.ModelCashDetails};if(t[`${this.ScreenName}Details`]=t.ModelCashDetails,t.Id==0){let e=this._Apiservice.post(`${this.AddUrl}`,t,!0).subscribe({next:n=>{n.IsSuccess==!0&&n.Obj!=null?(this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.AddSuccess")),this.ResetPage(),this.GetPageInfo(),this._SharedObjectModelService.Paging.DataReturn.push(n.Obj)):this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}if(t.Id>0){let e=this._Apiservice.put(`${this.UpdateUrl}`,t,!0).subscribe({next:n=>{if(n.IsSuccess==!0&&n.Obj!=null){this._AppModeService._Toastr.success(this._AppModeService._Translate.instant("Success.UpdateSuccess"));let a=n.Obj,u=this._SharedObjectModelService.Paging.DataReturn.find(w=>w.Id==a.Id);u!=null&&Object.assign(u,a),this.ResetPage(),this.GetPageInfo()}else this._AppModeService._Toastr.error(n.Message)}});this.SubscriptionArr.push(e)}}ResetPage(){this._AppModeService.DisabledButton=!1,this.ModelCash={Id:0,DocNo:0,DocDate:"",Notes:"",Code:"",TotalAmount:0,InitGlType:1,BankAccountId:null,BankAccountName:"",TreasuryId:null,TreasuryName:"",TreasuryCashType:1,ModelCashDetails:[{Debt:"",Amount:"",AccTreeId:null,AccTreeName:"",ClientId:null,ClientName:"",TreasuryId:null,TreasuryName:"",SaleInvoiceId:null,BankAccountId:null,BankAccountName:"",SupplierId:null,SupplierName:"",BuyInvoiceId:null,Id:0,Name:"",Notes:"",Code:"",BuyInvoices:[],SaleInvoices:[],AccTrees:[],BankAccounts:[],Clients:[],Suppliers:[],Treasurys:[],BranchClientId:null,BranchClientName:"",EmployeeId:null,EmployeeName:"",PartnerId:null,PartnerName:"",Branches:[],Employees:[],Partners:[]}]},this._DefaultSettingsService.ResetDate(this.ModelCash),this.HandleMyDefaultSettings()}HandleMyDefaultSettings(){let t=this._DefaultSettingsService.DefaultSettings;this.TreasuryArr=[],this.BankAccountArr=[],this.ModelCash.Id==0&&(this.ScreenName=="TreasuryIn"&&(t.MoneyInType>0&&(this.ModelCash.TreasuryCashType=t.MoneyInType),t.MoneyInInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyInInitGlType),t.MoneyInBankId>0&&(this.ModelCash.BankAccountId=t.MoneyInBankId,this.BankAccountArr.push({Id:t.MoneyInBankId,Name:t.MoneyInBankName})),t.MoneyInTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyInTreasuryId,this.TreasuryArr.push({Id:t.MoneyInTreasuryId,Name:t.MoneyInTreasuryName}))),this.ScreenName=="TreasuryOut"&&(t.MoneyOutType>0&&(this.ModelCash.TreasuryCashType=t.MoneyOutType),t.MoneyOutInitGlType>0&&(this.ModelCash.InitGlType=t.MoneyOutInitGlType),t.MoneyOutBankId>0&&(this.ModelCash.BankAccountId=t.MoneyOutBankId,this.BankAccountArr.push({Id:t.MoneyOutBankId,Name:t.MoneyOutBankName})),t.MoneyOutTreasuryId>0&&(this.ModelCash.TreasuryId=t.MoneyOutTreasuryId,this.TreasuryArr.push({Id:t.MoneyOutTreasuryId,Name:t.MoneyOutTreasuryName}))))}trackByMethod(t,e){return e.Id}ngOnDestroy(){for(let t=0;t<this.SubscriptionArr.length;t++)this.SubscriptionArr[t].unsubscribe()}};d.\u0275fac=function(e){return new(e||d)(k(te),k(fe),k(De),k(xe),k(ie))},d.\u0275cmp=Q({type:d,selectors:[["app-dynamic-cash-receipt"]],viewQuery:function(e,n){if(e&1&&(F(ve,5),F(we,5)),e&2){let a;U(a=H())&&(n.ContentModel=a.first),U(a=H())&&(n.GLComponent=a.first)}},inputs:{SignalR:"SignalR",TablePaging:"TablePaging",PageTitle:"PageTitle",ScreenName:"ScreenName",AddUrl:"AddUrl",UpdateUrl:"UpdateUrl",DeleteUrl:"DeleteUrl",GetById:"GetById",PrintUrl:"PrintUrl"},standalone:!0,features:[q],decls:5,vars:8,consts:[["content",""],["GLComponent",""],["SelectTreasury1",""],["SelectBankAccounts1",""],["SelectAccTreeDetails",""],["SelectClientDetails",""],["SelectBankAccountsDetails",""],["SelectTreasurysDetails",""],["SelectBranchesDetails",""],["SelectSuppliersDetails",""],["SelectPartnersDetails",""],["SelectEmployeesDetails",""],["SelectAccTreeRevenuesDetails",""],["SelectAccTreeExpensesDetails",""],[3,"OpenModalEvent","ShowToEditeEvent","PageTitle","TablePaging","FullScreen","GlResponse","GetById","DeleteUrl","PrintUrl","OutModal"],[3,"PageTitle"],[1,"modal-body","bg-white","p-0","m-0"],[1,"d-flex","flex-wrap","align-items-end","col-12"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","px-1"],["for","DocNo"],["type","number",1,"form-control","text-center",3,"value","disabled"],["for","Notes"],["type","text",1,"form-control","text-center",3,"ngModelChange","ngModel"],["class","d-block text-center ",4,"ngIf"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12","class"," shadow-none text-center w-100",3,"showOtherMonths","showTime","showIcon","showOnFocus","ngModel","ngModelChange",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","px-1","d-flex"],[1,"d-flex","align-items-center","justify-content-center","col-6"],["for","Payment1",1,"p-0"],["type","radio","name","Payment","id","Payment1",1,"form-check-input","mx-2",3,"change","ngModelChange","ngModel","checked","value"],["for","Payment2",1,"p-0"],["type","radio","name","Payment","id","Payment2",1,"form-check-input","mx-2",3,"change","ngModelChange","checked","value","ngModel"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],["class","col-12  ",4,"ngIf"],["class","col-12   ",4,"ngIf"],[1,"col-12","px-1"],["for","Type"],["name","Type","id","Type",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value"],[1,"table","table-hover","table-striped","table-light","mt-3"],["class","col-2",4,"ngIf"],["class","col-4",4,"ngIf"],["class","col-3",4,"ngIf"],[1,"col-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer","bg-white","py-2","px-4","m-0"],[1,"btn","py-3","px-5",3,"click","ngClass"],[4,"ngIf"],["class","btn btn-info mx-3 py-3 px-5",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","py-3","px-5",3,"click"],[1,"d-block","text-center"],["placeholder","D-M-Y","dateFormat","dd-mm-yy","hourFormat","12",1,"shadow-none","text-center","w-100",3,"ngModelChange","showOtherMonths","showTime","showIcon","showOnFocus","ngModel"],[1,"col-12"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","virtualScroll","searchable","ngModel"],["ng-header-tmp",""],["ng-option-tmp",""],[1,"form-text","text-muted"],["for","PaymentTypeBankAccountId"],[1,"col-2"],[1,"col-4"],["class","Flex1",4,"ngIf"],["class","ngSelect",4,"ngIf"],["type","number",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],["type","text",1,"form-control","shadow-none","text-center",3,"ngModelChange","ngModel","name","id"],[1,"Flex1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"mx-1","text-dark"],[1,"col-5","mx-2","btn","btn-success",3,"click"],[1,"col-5","mx-auto","btn","btn-danger",3,"click","disabled"],[1,"ngSelect"],["placeholder","Search","bindLabel","Name","bindValue","Id",1,"p-0","text-center",3,"clear","focus","keyup","scrollToEnd","close","open","change","ngModelChange","items","autofocus","dropdownPosition","virtualScroll","searchable","ngModel"],[1,"text-dark","d-block","text-center"],["class","text-dark",4,"ngIf"],[1,"text-dark"],[1,"btn","btn-info","mx-3","py-3","px-5",3,"click"]],template:function(e,n){if(e&1){let a=D();_(0,"app-dynamic-component",14),f("OpenModalEvent",function(){return l(a),o(n.OpenModal())})("ShowToEditeEvent",function(){return l(a),o(n.ShowToEdite())}),p(),I(1,Bt,99,105,"ng-template",null,0,J),j(3,"app-glsheard",null,1)}if(e&2){let a=y(2);h("PageTitle",n.PageTitle)("TablePaging",n.TablePaging)("FullScreen",!1)("GlResponse",!0)("GetById",n.GetById)("DeleteUrl",n.DeleteUrl)("PrintUrl",n.PrintUrl)("OutModal",a)}},dependencies:[ee,Te,ge,he,ue,de,me,pe,ce,_e,ne,se,oe,le,re,ae,X,Z,K,Ie,ye,Ce,Se,Ae,Me],styles:["input.form-check-input[_ngcontent-%COMP%]{width:2rem!important;height:2rem!important}"]});let s=d;return s})();export{Kt as a};
